# 진행상황 피드백 태스크 정리 (20260114)

> 각 태스크별로 관련 이미지를 정리한 문서입니다.

> ⚠️ **작업 완료 후 반드시 이 문서의 체크박스를 업데이트해주세요!**

---

## 📋 목차

1. [텍스트/용어 수정](#1-텍스트용어-수정)
2. [새 프로그램 등록 화면](#2-새-프로그램-등록-화면)
3. [프로그램 수정 화면](#3-프로그램-수정-화면)
4. [진행 중인 프로그램 목록](#4-진행-중인-프로그램-목록)
5. [비핵심 탭 관련](#5-비핵심-탭-관련)
6. [담보물건 탭](#6-담보물건-탭)
7. [선순위 탭](#7-선순위-탭)
8. [평가 탭](#8-평가-탭)
9. [경(공)매 일정 탭](#9-경공매-일정-탭)
10. [권리분석 탭](#10-권리분석-탭)
11. [QA 집계 메뉴 추가](#11-qa-집계-메뉴-추가)
12. [기초데이터 탭](#12-기초데이터-탭)
13. [인쇄/엑셀 기능](#13-인쇄엑셀-기능)
14. [마감 화면](#14-마감-화면)
15. [메뉴 구조 변경](#15-메뉴-구조-변경)
16. [UI 통일성 개선](#16-ui-통일성-개선)
17. [권한 관리](#17-권한-관리)
18. [알림 기능](#18-알림-기능)

---

## 1. 텍스트/용어 수정

### 📸 관련 이미지
- `page_01.png`

### 📝 내용
- **MPV → NPV로 변경** 필요
- 상단 네비게이션에 표시되는 용어 수정

### ✅ 작업 항목
- [x] "MPV" 텍스트를 "NPV"로 전체 변경 ✔️

---

## 2. 새 프로그램 등록 화면

### 📸 관련 이미지
- `page_03.png`
- `page_04.png`

### 📝 내용
1. **Pool 부분 UI 문제** (page_03)
   - Pool 부분이 잘려서 검색이 제대로 되지 않음
   - 스크롤 대신 팝업 크기가 딱 맞게 나오도록 변경

2. **시트 매핑 기능** (page_04)
   - 업로드된 시트 매핑이 아직 불가능
   - 매핑 가능한 리스트: 차주일반정보, 회생차주정보, 채권일반정보, 물건정보, 등기부등본정보, 설정순위, 신용보증서, 가압류

3. **여백 조정** (page_04)
   - 아래 여백이 많음
   - 시트 부분의 높이를 더 높여도 됨

### ✅ 작업 항목
- [x] Pool 선택 팝업 크기 자동 조정 ✔️
- [x] 시트 매핑 기능 구현 ✔️
- [x] 하단 여백 조정 및 시트 영역 높이 증가 ✔️

---

## 3. 프로그램 수정 화면

### 📸 관련 이미지
- `page_05.png`

### 📝 내용
- 업로드가 된 프로그램의 경우:
  - 아래 업로드 영역이 활성화된 상태가 아니라
  - **데이터디스크 탭 내에서 시트 정보만 보여주고**
  - **재업로드 버튼**을 통해 필요 시 재업로드할 수 있게 변경

### ✅ 작업 항목
- [x] 업로드된 프로그램: 시트 정보 표시 모드로 변경 ✔️
- [x] 재업로드 버튼 추가 ✔️

---

## 4. 진행 중인 프로그램 목록

### 📸 관련 이미지
- `page_06.png`

### 📝 내용
- **버그**: 완료 물건 필터링 후 위에 필터 창이 사라지는 경우 발생

### ✅ 작업 항목
- [x] 완료 물건 필터링 후 필터 창 유지 버그 수정 ✔️
- [x] 상태 필터 더블클릭 → 한 번 클릭으로 변경 ✔️

---

## 5. 비핵심 탭 관련

### 📸 관련 이미지
- `page_09.png`
- `page_10.png`
- `page_11.png`

### 📝 내용
1. **비핵심의 "전체" 정의** (page_09)
   - 전체 = 차주개요, Loan, 담보물건, 선순위, 평가, 경(공)매일정이 하나로 합쳐진 파트

2. **담보물건 메뉴 오류** (page_10, page_11)
   - 비핵심에서 담보물건 메뉴 클릭 시 오류와 함께 이동 불가
   - XamlParseException 오류 발생

### ✅ 작업 항목
- [x] 비핵심 "전체" 탭 구성 확인 (차주개요+Loan+담보물건+선순위+평가+경공매일정) ✔️
- [x] 담보물건 메뉴 클릭 시 오류 수정 (BasicDataTab → MapView로 변경) ✔️

---

## 6. 담보물건 탭

### 📸 관련 이미지
- `page_12.png`
- `page_13.png`

### 📝 내용
1. **버튼 배치** (page_12)
   - 위성도, 지적도, 로드뷰, 토지이용계획, 건축물대장이 **한 행에 들어가도록** 배치

2. **레이아웃 개선** (page_13)
   - 여백이 너무 많음
   - 한 눈에 최대한 많은 정보가 전달될 수 있도록 **테이블 형태**로 변경

### ✅ 작업 항목
- [x] 지도/대장 버튼들을 한 행으로 배치 (위성도/지적도/로드뷰/토지이용계획/건축물대장) ✔️
- [x] 담보물건 정보를 테이블 형태로 변경하여 여백 줄이기 ✔️
  - 물건 기본 정보 (주소, 면적, 층수, 담보종류 등)
  - 등기부등본 정보 (표제부, 갑구, 을구)
  - 감정평가 정보 (구분, 기관, 일자, 금액)
  - 선순위 요약 (임차인 보증금, 당해세, 기타)

---

## 7. 선순위 탭

### 📸 관련 이미지
- `page_14.png`
- `page_20.png`

### 📝 내용
1. **권리분석 내용 이동** (page_14, page_20)
   - 현재 권리분석에 있는 내용들이 **선순위 탭에 들어와야** 함
   - 산출화면 엑셀 참고 필요

### ✅ 작업 항목
- [x] 권리분석 내용을 선순위 탭으로 이동 ✔️
- [x] 산출화면 엑셀 참고하여 레이아웃 구성 ✔️

> **구현 내용:**
> - 경매사건 정보 섹션 추가 (경매개시여부, 선행/후행, 관할법원, 경매사건번호, 청구금액 등)
> - 전입/임차 현황 체크리스트 추가 (물건지 일치, 소유주 전입, 임차인 존재, 채무자 유형 등)
> - 배당 시뮬레이션 섹션 추가 (예상낙찰가, 경매수수료, 선순위 공제, Cap 반영 배당액, 회수율)
> - 위험도 평가 섹션 추가 (자동 평가, 수동 설정, 판단 근거, 권장 의견)
> - 분석 완료 체크 기능 추가

---

## 8. 평가 탭

### 📸 관련 이미지
- `page_15.png`
- `page_16.png`

### 📝 내용
1. **물건 유형 기본 선택** (page_15)
   - 해당 물건에 해당하는 유형이 **처음부터 선택**되어 있어야 함

2. **낙찰통계 계산** (page_15)
   - 전달드린 엑셀 데이터를 기반으로 **계산되어 디스플레이** 되어야 함

3. **시나리오 정리** (page_16)
   - 시나리오 3은 **제거**
   - 시나리오 1 = 하한
   - 시나리오 2 = 상한

### ✅ 작업 항목
- [x] 평가 탭 진입 시 물건 유형 자동 선택 ✔️
- [-] 낙찰통계 엑셀 데이터 기반 계산 로직 구현(나중에 하기로함 넘어가야해)
- [x] 시나리오 3 제거 (시나리오 1=하한, 2=상한만 유지) ✔️

---

## 9. 경(공)매 일정 탭

### 📸 관련 이미지
- `page_17.png`

### 📝 내용
- 현재 경(공)매 일정에 **내용이 없음**
- **산출화면 참고**하여 화면 구현 필요

### ✅ 작업 항목
- [x] 경(공)매 일정 화면 구현 (산출화면 참고) ✔️

> **구현 내용:**
> - 경매/공매 선택 탭 추가
> - 평가결과 섹션 (시나리오1/2 낙찰가액, 낙찰가율, 토지/건물 평당 낙찰가)
> - 대금 회수 섹션 (1안/2안 일자, 금액, 비고)
> - 수익자변경비용 섹션 (경매/공매 개시일, 낙찰가역, 낙찰가율)
> - 경(공)매비용 섹션 (경매비용/온비드수수료, 감정평가료, 합계)
> - 배당/회수 계산 섹션 (추정낙찰액, 선순위차감, 경(공)매비용, 환가처분보수, 배당가능액-안분전, LoanCap, MortgageCap, Cap반영배당액)
> - Lead time 추정 섹션 (회차별 일정, 최저입찰가, 저감율 설정)
> - 회수가능액 요약 (1안/2안 최종 회수가능액 표시)

---

## 10. 권리분석 탭

### 📸 관련 이미지
- `page_20.png`

### 📝 내용
- 현재 권리분석의 내용은 **선순위로 이동**
- 권리분석에는 전달드린 **"SHB 2025-8"에 해당하는 권리분석 엑셀** 업로드 후
- **차주별로 내용 분할**하는 작업 필요

### ✅ 작업 항목
- [x] 기존 권리분석 내용 → 선순위 탭으로 이동 ✔️
- [x] 권리분석 엑셀 업로드 기능 구현 ✔️ (RLS 정책 수정 + CreateAsync 반환값 사용)
- [x] 차주별 내용 분할 로직 구현 ✔️

---

## 11. QA 집계 메뉴 추가

### 📸 관련 이미지
- `page_21.png`
- `page_22.png`
- `page_23.png`

### 📝 내용
1. **메뉴 위치** (page_21)
   - 기초데이터와 권리분석 사이에 **QA 집계 메뉴** 추가
   - 비핵심과 같은 레벨의 QA 집계 부분에서
   - **차주, 파트, 질문, 답변 형식**으로 총괄 관리 가능해야 함

2. **답변 매칭** (page_22)
   - 답변이 왔을 때 엑셀을 업로드하면 **맞는 Q에 답변이 매칭**되어야 함
   - 양식은 별도 전달 예정

3. **알림 기능** (page_23)
   - 답변이 오면 배정된 계정 로그인 시 **팝업 알람**
   - 해당 팝업은 **닫기를 누르지 않으면 꺼지지 않고 떠있어야** 함

### ✅ 작업 항목
- [x] QA 집계 메뉴 추가 (기초데이터 ↔ 권리분석 사이) ✔️
- [x] QA 집계 화면 구현 (차주/파트/질문/답변 형식) ✔️
- [x] 답변 엑셀 업로드 시 Q-A 매칭 로직 구현 ✔️
- [x] 답변 도착 시 팝업 알람 기능 구현 ✔️

---

## 12. 기초데이터 탭

### 📸 관련 이미지
- `page_24.png`

### 📝 내용
기초데이터에 포함되어야 하는 항목:
- 법원별 저감율
- 주택임대차
- 상가임대차
- 경매비용
- 공매비용

> 해당 데이터들은 산출화면에 있음

### ✅ 작업 항목
- [x] 기초데이터에 법원별 저감율 추가 ✔️
- [x] 기초데이터에 주택임대차 추가 ✔️
- [x] 기초데이터에 상가임대차 추가 ✔️
- [x] 기초데이터에 경매비용 추가 ✔️
- [x] 기초데이터에 공매비용 추가 ✔️

---

## 13. 인쇄/엑셀 기능

### 📸 관련 이미지
- `page_19.png`

### 📝 내용
- 인쇄 클릭 시 현재처럼 전체/차주로 나누지 말고
- **인쇄할 차주를 선택**할 수 있게 수정
- **엑셀** 또한 마찬가지

### ✅ 작업 항목
- [x] 인쇄 기능: 차주 선택 가능하도록 변경 ✔️
- [x] 엑셀 다운로드: 차주 선택 가능하도록 변경 ✔️

---

## 14. 마감 화면

### 📸 관련 이미지
- `page_25.png`

### 📝 내용
- 마감에서 비낙찰시 낙찰가 업로드는 **여러 차주에 대한 금액**이 나옴
- **엑셀을 업로드하는 식**으로 진행해야 함

### ✅ 작업 항목
- [x] 비낙찰시 낙찰가 엑셀 업로드 기능 구현 ✔️

> **구현 내용:**
> - 기존 단일 금액 입력 → 엑셀 업로드 방식으로 변경
> - 차주별 비낙찰가 모델 클래스 추가 (차주번호, 차주명, 물건주소, 낙찰가, 낙찰일자, 비고)
> - 엑셀 업로드 버튼 + 템플릿 다운로드 버튼 + 초기화 버튼 추가
> - 업로드된 데이터를 DataGrid로 표시
> - 합계 금액 자동 계산 및 표시
> - 유연한 컬럼명 매핑 지원 (차주번호/borrower_no, 낙찰가/금액/amount 등)

---

## 15. 메뉴 구조 변경

### 📸 관련 이미지
- `page_07.png`
- `page_21.png`

### 📝 내용
1. **중간 메뉴 변경** (page_07)
   - 중간 메뉴들을 조금 변경해야 함
   - 표시된 메뉴: 비핵심, 등기부등본, 권리분석, 기초데이터, QA 집계, 권리분석, 현금흐름 집계, NPV 비교, 마감

2. **QA 집계 메뉴 위치** (page_21)
   - 기초데이터와 권리분석 사이에 배치

### ✅ 작업 항목
- [x] 메뉴 구조 재정렬 ✔️
- [x] QA 집계 메뉴 추가 ✔️

> **구현 내용:**
> - 중간 탭 메뉴 순서: 비핵심 → 등기부등본 → 권리분석 → 기초데이터 → QA집계 → 현금흐름집계 → NPV비교 → 마감
> - QASummaryTab 플레이스홀더 뷰 생성 (추후 기능 구현 예정)
> - DashboardView.xaml/cs에 탭 전환 로직 추가
> - 상단 헤더에서 현금흐름/NPV비교 버튼 제거 (중간 탭으로 이동했으므로)

---

## 16. UI 통일성 개선

### 📸 관련 이미지
- `page_08.png`

### 📝 내용
- 통일성을 위해 **물건목록**과 위 **물건 기본 정보**가
- 아래 내용들과 같은 **배경 + 네이비 테두리**로 변경

### ✅ 작업 항목
- [x] 물건목록 영역 스타일 통일 (배경 + 네이비 테두리) ✔️
- [x] 물건 기본 정보 영역 스타일 통일 ✔️

> **구현 내용:**
> - DashboardView.xaml의 LeftPanel: BorderBrush를 PrimaryBrush(네이비)로 변경
> - HomeTab.xaml의 물건 헤더: 흰색 배경(SurfaceBrush) + 네이비 테두리로 변경

---

## 17. 권한 관리

### 📸 관련 이미지
- `page_02.png`

### 📝 내용
- 현재 관리자는 여러 개의 프로그램을 관리하는 유암코의 관리자
- 표시된 부분(빨간색 하이라이트)은 **프로그램 관리자만 확인**할 수 있어야 함

### ✅ 작업 항목
- [ ] 프로그램 관리자 전용 영역 권한 체크 구현

---

## 18. 알림 기능

### 📸 관련 이미지
- `page_23.png`

### 📝 내용
- 답변이 오면 배정된 계정 로그인 시 **팝업 알람**
- 해당 팝업은 **닫기를 누르지 않으면 꺼지지 않고** 떠있어야 함

### ✅ 작업 항목
- [ ] QA 답변 도착 시 팝업 알림 기능
- [ ] 팝업은 수동으로 닫기 전까지 유지

---

## 📊 이미지별 태스크 매핑 요약

| 이미지 | 주요 태스크 |
|--------|------------|
| `page_01.png` | MPV → NPV 용어 변경 |
| `page_02.png` | 권한 관리 (프로그램 관리자 전용 영역) |
| `page_03.png` | 새 프로그램 등록 - Pool 팝업 크기 |
| `page_04.png` | 새 프로그램 등록 - 시트 매핑, 여백 조정 |
| `page_05.png` | 프로그램 수정 - 재업로드 버튼 |
| `page_06.png` | 진행 중인 프로그램 - 필터 버그 |
| `page_07.png` | 메뉴 구조 변경 |
| `page_08.png` | UI 통일성 - 물건목록/기본정보 스타일 |
| `page_09.png` | 비핵심 "전체" 구성 정의 |
| `page_10.png` | 비핵심 - 담보물건 오류 |
| `page_11.png` | 비핵심 - 담보물건 오류 |
| `page_12.png` | 담보물건 - 버튼 배치 |
| `page_13.png` | 담보물건 - 여백/테이블 형태 |
| `page_14.png` | 선순위 - 권리분석 내용 이동 |
| `page_15.png` | 평가 - 유형 선택, 낙찰통계 |
| `page_16.png` | 평가 - 시나리오 3 제거 |
| `page_17.png` | 경(공)매 일정 - 화면 구현 |
| `page_18.png` | (내용 불완전) |
| `page_19.png` | 인쇄/엑셀 - 차주 선택 |
| `page_20.png` | 권리분석 - 엑셀 업로드, 차주별 분할 |
| `page_21.png` | QA 집계 메뉴 추가, 총괄 관리 |
| `page_22.png` | QA - 답변 엑셀 매칭 |
| `page_23.png` | 알림 - 팝업 알람 기능 |
| `page_24.png` | 기초데이터 - 저감율/임대차/비용 |
| `page_25.png` | 마감 - 비낙찰 엑셀 업로드 |

---

## 🔗 여러 이미지를 함께 봐야 하는 태스크

### 1. 비핵심 담보물건 오류
- **이미지**: `page_10.png`, `page_11.png`
- 동일한 오류 화면 (XamlParseException)

### 2. 선순위/권리분석 내용 이동
- **이미지**: `page_14.png`, `page_20.png`
- 권리분석 → 선순위 이동 관련

### 3. QA 집계 기능 전체
- **이미지**: `page_21.png`, `page_22.png`, `page_23.png`
- 메뉴 추가 + 답변 매칭 + 알림 기능

### 4. 평가 탭 전체 수정
- **이미지**: `page_15.png`, `page_16.png`
- 유형 선택 + 낙찰통계 + 시나리오 정리

### 5. 새 프로그램 등록 전체
- **이미지**: `page_03.png`, `page_04.png`
- Pool 팝업 + 시트 매핑 + 여백 조정
