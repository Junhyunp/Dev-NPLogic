<UserControl x:Class="NPLogic.Views.CollateralPropertyView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:vm="clr-namespace:NPLogic.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1200"
             d:DataContext="{d:DesignInstance Type=vm:PropertyDetailViewModel}">
    
    <UserControl.Resources>
        <!-- í…Œì´ë¸” í—¤ë” ìŠ¤íƒ€ì¼ -->
        <Style x:Key="TableHeaderCell" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource BlueGray100Brush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="0,0,1,1"/>
            <Setter Property="Padding" Value="12,8"/>
        </Style>
        
        <!-- í…Œì´ë¸” ë°ì´í„° ì…€ ìŠ¤íƒ€ì¼ -->
        <Style x:Key="TableDataCell" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="0,0,1,1"/>
            <Setter Property="Padding" Value="12,8"/>
        </Style>
    </UserControl.Resources>
    
    <Grid Background="{StaticResource BackgroundBrush}">
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel Margin="24">
                
                <!-- ========== ìƒë‹¨: ë²„íŠ¼ ë°” (ìœ„ì„±ë„, ì§€ì ë„, ë¡œë“œë·°, í† ì§€ì´ìš©ê³„íš, ê±´ì¶•ë¬¼ëŒ€ìž¥) ========== -->
                <Border Background="{StaticResource SurfaceColor}"
                        BorderBrush="{StaticResource PrimaryBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="16"
                        Margin="0,0,0,16">
                    <!-- ë²„íŠ¼ë“¤ -->
                    <StackPanel Orientation="Horizontal">
                        <Button Style="{StaticResource SecondaryButton}"
                                Padding="16,8"
                                Margin="0,0,8,0"
                                Click="OpenSatelliteMap_Click"
                                ToolTip="ìœ„ì„±ë„ ì—´ê¸°">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Satellite" Width="16" Height="16" Margin="0,0,6,0" VerticalAlignment="Center"/>
                                <TextBlock Text="ìœ„ì„±ë„" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        
                        <Button Style="{StaticResource SecondaryButton}"
                                Padding="16,8"
                                Margin="0,0,8,0"
                                Click="OpenCadastralMap_Click"
                                ToolTip="ì§€ì ë„ ì—´ê¸°">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Map" Width="16" Height="16" Margin="0,0,6,0" VerticalAlignment="Center"/>
                                <TextBlock Text="ì§€ì ë„" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        
                        <Button Style="{StaticResource SecondaryButton}"
                                Padding="16,8"
                                Margin="0,0,8,0"
                                Click="OpenRoadView_Click"
                                ToolTip="ë¡œë“œë·° ì—´ê¸°">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Walk" Width="16" Height="16" Margin="0,0,6,0" VerticalAlignment="Center"/>
                                <TextBlock Text="ë¡œë“œë·°" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        
                        <Button Style="{StaticResource SecondaryButton}"
                                Padding="16,8"
                                Margin="0,0,8,0"
                                Click="OpenLandUsePlan_Click"
                                ToolTip="í† ì§€ì´ìš©ê³„íš ì—´ê¸°">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="FileDocument" Width="16" Height="16" Margin="0,0,6,0" VerticalAlignment="Center"/>
                                <TextBlock Text="í† ì§€ì´ìš©ê³„íš" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        
                        <Button Style="{StaticResource SecondaryButton}"
                                Padding="16,8"
                                Click="OpenBuildingRegister_Click"
                                ToolTip="ê±´ì¶•ë¬¼ëŒ€ìž¥ ì—´ê¸°">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="OfficeBuildingMarker" Width="16" Height="16" Margin="0,0,6,0" VerticalAlignment="Center"/>
                                <TextBlock Text="ê±´ì¶•ë¬¼ëŒ€ìž¥" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Border>
                
                <!-- ========== ë¬¼ê±´ ê¸°ë³¸ ì •ë³´ í…Œì´ë¸” (1~2ì¤„ë¡œ ê°„ì†Œí™”) ========== -->
                <Border Background="{StaticResource SurfaceColor}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <!-- í—¤ë” -->
                        <Border Background="{StaticResource PrimaryBrush}"
                                CornerRadius="8,8,0,0"
                                Padding="16,10">
                            <TextBlock Text="ðŸ“ ë¬¼ê±´ ê¸°ë³¸ ì •ë³´" 
                                       Foreground="White" 
                                       FontWeight="SemiBold"
                                       FontSize="14"/>
                        </Border>
                        
                        <!-- í…Œì´ë¸” (1ì¤„: ì£¼ì†Œ, ë‹´ë³´ì¢…ë¥˜, í† ì§€ë©´ì , ê±´ë¬¼ë©´ì , ê³µìž¥ì €ë‹¹) -->
                        <Grid Margin="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- ì£¼ì†Œ -->
                            <Border Grid.Column="0" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="ì£¼ì†Œ" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="1" Style="{StaticResource TableDataCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="{Binding Property.AddressFull, FallbackValue='-'}" 
                                           TextWrapping="NoWrap"
                                           TextTrimming="CharacterEllipsis"
                                           FontWeight="SemiBold"
                                           ToolTip="{Binding Property.AddressFull}"/>
                            </Border>
                            
                            <!-- ë‹´ë³´ì¢…ë¥˜ -->
                            <Border Grid.Column="2" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="ë‹´ë³´ì¢…ë¥˜" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="3" Style="{StaticResource TableDataCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="{Binding Property.PropertyType, FallbackValue='-'}" HorizontalAlignment="Center"/>
                            </Border>
                            
                            <!-- í† ì§€ë©´ì  -->
                            <Border Grid.Column="4" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="í† ì§€ë©´ì " FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="5" Style="{StaticResource TableDataCell}" BorderThickness="0,0,1,0">
                                <TextBlock HorizontalAlignment="Right">
                                    <Run Text="{Binding Property.LandArea, StringFormat=N2, FallbackValue='-'}"/>
                                    <Run Text=" ãŽ¡" Foreground="{StaticResource TextSecondaryBrush}"/>
                                </TextBlock>
                            </Border>
                            
                            <!-- ê±´ë¬¼ë©´ì  -->
                            <Border Grid.Column="6" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="ê±´ë¬¼ë©´ì " FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="7" Style="{StaticResource TableDataCell}" BorderThickness="0,0,1,0">
                                <TextBlock HorizontalAlignment="Right">
                                    <Run Text="{Binding Property.BuildingArea, StringFormat=N2, FallbackValue='-'}"/>
                                    <Run Text=" ãŽ¡" Foreground="{StaticResource TextSecondaryBrush}"/>
                                </TextBlock>
                            </Border>
                            
                            <!-- ê³µìž¥ì €ë‹¹ -->
                            <Border Grid.Column="8" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="ê³µìž¥ì €ë‹¹" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="9" Style="{StaticResource TableDataCell}" BorderThickness="0">
                                <TextBlock Text="{Binding IsFactoryMortgageText, FallbackValue='-'}" HorizontalAlignment="Center"/>
                            </Border>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- ========== ë“±ê¸°ë¶€ë“±ë³¸ ì •ë³´ ========== -->
                <Border Background="{StaticResource SurfaceColor}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <!-- í—¤ë” -->
                        <Border Background="{StaticResource PrimaryBrush}"
                                CornerRadius="8,8,0,0"
                                Padding="16,10">
                            <TextBlock Text="ðŸ“„ ë“±ê¸°ë¶€ë“±ë³¸ ì •ë³´" 
                                       Foreground="White" 
                                       FontWeight="SemiBold"
                                       FontSize="14"/>
                        </Border>
                        
                        <!-- 3ì—´ í…Œì´ë¸” (í‘œì œë¶€, ê°‘êµ¬, ì„êµ¬) -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- í‘œì œë¶€ -->
                            <Border Grid.Column="0" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,1,0">
                                <StackPanel>
                                    <Border Background="{StaticResource BlueGray100Brush}" Padding="12,8">
                                        <TextBlock Text="í‘œì œë¶€" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                    </Border>
                                    <Border Padding="12" MinHeight="80">
                                        <TextBlock Text="{Binding RegistryTitleSummary, FallbackValue='ë“±ê¸°ë¶€ íƒ­ì—ì„œ í™•ì¸'}"
                                                   TextWrapping="Wrap"
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="13"/>
                                    </Border>
                                </StackPanel>
                            </Border>
                            
                            <!-- ê°‘êµ¬ (ì†Œìœ ê¶Œ) -->
                            <Border Grid.Column="1" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,1,0">
                                <StackPanel>
                                    <Border Background="{StaticResource BlueGray100Brush}" Padding="12,8">
                                        <TextBlock Text="ê°‘êµ¬ (ì†Œìœ ê¶Œ)" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                    </Border>
                                    <Border Padding="12" MinHeight="80">
                                        <TextBlock Text="{Binding RegistryOwnershipSummary, FallbackValue='ë“±ê¸°ë¶€ íƒ­ì—ì„œ í™•ì¸'}"
                                                   TextWrapping="Wrap"
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="13"/>
                                    </Border>
                                </StackPanel>
                            </Border>
                            
                            <!-- ì„êµ¬ (ê·¼ì €ë‹¹) -->
                            <Border Grid.Column="2">
                                <StackPanel>
                                    <Border Background="{StaticResource BlueGray100Brush}" Padding="12,8">
                                        <TextBlock Text="ì„êµ¬ (ê·¼ì €ë‹¹)" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                    </Border>
                                    <Border Padding="12" MinHeight="80">
                                        <TextBlock Text="{Binding RegistryMortgageSummary, FallbackValue='ë“±ê¸°ë¶€ íƒ­ì—ì„œ í™•ì¸'}"
                                                   TextWrapping="Wrap"
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="13"/>
                                    </Border>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- ========== ê±´ì¶•ë¬¼ëŒ€ìž¥ ì •ë³´ (ì´ê´„í‘œì œë¶€ + í‘œì œë¶€) ========== -->
                <Border Background="{StaticResource SurfaceColor}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <!-- í—¤ë” -->
                        <Border Background="{StaticResource PrimaryBrush}"
                                CornerRadius="8,8,0,0"
                                Padding="16,10">
                            <TextBlock Text="ðŸ¢ ê±´ì¶•ë¬¼ëŒ€ìž¥ ì •ë³´" 
                                       Foreground="White" 
                                       FontWeight="SemiBold"
                                       FontSize="14"/>
                        </Border>
                        
                        <!-- 2ì—´ í…Œì´ë¸” (ì´ê´„í‘œì œë¶€, í‘œì œë¶€) -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- ì´ê´„í‘œì œë¶€ -->
                            <Border Grid.Column="0" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,1,0">
                                <StackPanel>
                                    <Border Background="{StaticResource BlueGray100Brush}" Padding="12,8">
                                        <TextBlock Text="ì´ê´„í‘œì œë¶€" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                    </Border>
                                    <Border Padding="12" MinHeight="80">
                                        <StackPanel>
                                            <TextBlock Text="{Binding BuildingRegisterGeneralSummary, FallbackValue='ê±´ì¶•ë¬¼ëŒ€ìž¥ ì¡°íšŒ í•„ìš”'}"
                                                       TextWrapping="Wrap"
                                                       Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="13"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Border>
                            
                            <!-- í‘œì œë¶€ -->
                            <Border Grid.Column="1">
                                <StackPanel>
                                    <Border Background="{StaticResource BlueGray100Brush}" Padding="12,8">
                                        <TextBlock Text="í‘œì œë¶€" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                    </Border>
                                    <Border Padding="12" MinHeight="80">
                                        <StackPanel>
                                            <TextBlock Text="{Binding BuildingRegisterTitleSummary, FallbackValue='ê±´ì¶•ë¬¼ëŒ€ìž¥ ì¡°íšŒ í•„ìš”'}"
                                                       TextWrapping="Wrap"
                                                       Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="13"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- ========== ê°ì •í‰ê°€ ì •ë³´ (í•œ ì¤„ë¡œ ê°„ì†Œí™”) ========== -->
                <Border Background="{StaticResource SurfaceColor}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <!-- í—¤ë” -->
                        <Border Background="{StaticResource PrimaryBrush}"
                                CornerRadius="8,8,0,0"
                                Padding="16,10">
                            <TextBlock Text="ðŸ’° ê°ì •í‰ê°€ ì •ë³´" 
                                       Foreground="White" 
                                       FontWeight="SemiBold"
                                       FontSize="14"/>
                        </Border>
                        
                        <!-- ê°ì •í‰ê°€ ì •ë³´ í•œ ì¤„ í…Œì´ë¸” -->
                        <Grid Margin="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="130"/>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- êµ¬ë¶„ -->
                            <Border Grid.Column="0" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="êµ¬ë¶„" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="1" Style="{StaticResource TableDataCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="{Binding AppraisalType, FallbackValue='-'}" HorizontalAlignment="Center"/>
                            </Border>
                            
                            <!-- ì¼ìž -->
                            <Border Grid.Column="2" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="ì¼ìž" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="3" Style="{StaticResource TableDataCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="{Binding Property.AppraisalDate, StringFormat=yyyy-MM-dd, FallbackValue='-'}" HorizontalAlignment="Center"/>
                            </Border>
                            
                            <!-- ê¸°ê´€ -->
                            <Border Grid.Column="4" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="ê¸°ê´€" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="5" Style="{StaticResource TableDataCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="{Binding AppraisalOrganization, FallbackValue='-'}" 
                                           TextTrimming="CharacterEllipsis"
                                           ToolTip="{Binding AppraisalOrganization}"/>
                            </Border>
                            
                            <!-- í† ì§€ -->
                            <Border Grid.Column="6" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="í† ì§€" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="7" Style="{StaticResource TableDataCell}" BorderThickness="0,0,1,0">
                                <TextBlock HorizontalAlignment="Right">
                                    <Run Text="{Binding LandAppraisalValue, StringFormat=N0, FallbackValue='0'}"/>
                                </TextBlock>
                            </Border>
                            
                            <!-- ê±´ë¬¼ -->
                            <Border Grid.Column="8" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="ê±´ë¬¼" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="9" Style="{StaticResource TableDataCell}" BorderThickness="0,0,1,0">
                                <TextBlock HorizontalAlignment="Right">
                                    <Run Text="{Binding BuildingAppraisalValue, StringFormat=N0, FallbackValue='0'}"/>
                                </TextBlock>
                            </Border>
                            
                            <!-- ê¸°ê³„ -->
                            <Border Grid.Column="10" Style="{StaticResource TableHeaderCell}" BorderThickness="0,0,1,0">
                                <TextBlock Text="ê¸°ê³„" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border Grid.Column="11" Style="{StaticResource TableDataCell}" BorderThickness="0,0,1,0">
                                <TextBlock HorizontalAlignment="Right">
                                    <Run Text="{Binding MachineAppraisalValue, StringFormat=N0, FallbackValue='0'}"/>
                                </TextBlock>
                            </Border>
                            
                            <!-- í•©ê³„ (ê°•ì¡°) -->
                            <Border Grid.Column="12" Style="{StaticResource TableHeaderCell}" Background="{StaticResource PrimaryBrush}" BorderThickness="0,0,1,0">
                                <TextBlock Text="í•©ê³„" FontWeight="Bold" Foreground="White"/>
                            </Border>
                            <Border Grid.Column="13" Background="{StaticResource PrimaryBrush}" BorderThickness="0">
                                <TextBlock Margin="8,0" HorizontalAlignment="Right" VerticalAlignment="Center">
                                    <Run Text="{Binding Property.AppraisalValue, StringFormat=N0, FallbackValue='0'}" FontWeight="Bold" Foreground="White"/>
                                    <Run Text=" ì›" FontSize="11" Foreground="#B0FFFFFF"/>
                                </TextBlock>
                            </Border>
                        </Grid>
                    </StackPanel>
                </Border>
                
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
