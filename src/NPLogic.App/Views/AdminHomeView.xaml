<UserControl x:Class="NPLogic.Views.AdminHomeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:NPLogic.Views"
             xmlns:vm="clr-namespace:NPLogic.ViewModels"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1400"
             d:DataContext="{d:DesignInstance Type=vm:AdminHomeViewModel}"
             Loaded="AdminHomeView_Loaded">
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="400" MinWidth="300"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ========== 좌측: 프로그램 목록 ========== -->
        <Border Grid.Column="0" 
                Background="{StaticResource BackgroundBrush}"
                Margin="16,16,8,16">
            <Border.Effect>
                <DropShadowEffect Color="Black" Opacity="0.08" BlurRadius="8" ShadowDepth="2"/>
            </Border.Effect>
            
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- 헤더 -->
                <Border Grid.Row="0" 
                        Background="{StaticResource PrimaryBrush}"
                        Padding="16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel>
                            <TextBlock Text="{Binding DisplayName}" 
                                       Foreground="White"
                                       FontSize="18"
                                       FontWeight="Bold"/>
                            <TextBlock Text="진행중인 프로그램" 
                                       Foreground="#B0FFFFFF"
                                       FontSize="12"
                                       Margin="0,4,0,0"/>
                        </StackPanel>
                        
                        <Button Grid.Column="1"
                                Content="프로그램 관리"
                                Command="{Binding GoToProgramManagementCommand}"
                                Style="{StaticResource SecondaryButton}"
                                Foreground="White"
                                Background="Transparent"
                                BorderBrush="#80FFFFFF"
                                Padding="12,6"
                                FontSize="12"/>
                    </Grid>
                </Border>

                <!-- 통계 요약 -->
                <Border Grid.Row="1" 
                        Background="{StaticResource BlueGray50Brush}"
                        Padding="16,12">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Style="{StaticResource CaptionTextStyle}">
                            <Run Text="전체"/>
                            <Run Text="{Binding TotalProgramCount}" FontWeight="Bold"/>
                            <Run Text="개 프로그램"/>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <!-- 프로그램 목록 -->
                <DataGrid Grid.Row="2"
                          ItemsSource="{Binding Programs}"
                          SelectedItem="{Binding SelectedProgram}"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          SelectionMode="Single"
                          GridLinesVisibility="All"
                          HorizontalGridLinesBrush="{StaticResource TableBorderBrush}"
                          VerticalGridLinesBrush="{StaticResource TableBorderBrush}"
                          HeadersVisibility="Column"
                          Background="Transparent"
                          BorderThickness="0"
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto">
                    
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="프로그램명" 
                                          Binding="{Binding ProgramName}" 
                                          Width="120"
                                          IsReadOnly="True"/>
                        
                        <DataGridTextColumn Header="담당팀" 
                                          Binding="{Binding Team}" 
                                          Width="80"
                                          IsReadOnly="True"/>
                        
                        <DataGridTextColumn Header="회계법인" 
                                          Binding="{Binding AccountingFirm}" 
                                          Width="80"
                                          IsReadOnly="True"/>
                        
                        <DataGridTextColumn Header="물건수" 
                                          Binding="{Binding PropertyCount}" 
                                          Width="60"
                                          IsReadOnly="True">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                    </DataGrid.Columns>

                    <DataGrid.RowStyle>
                        <Style TargetType="DataGridRow">
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="Cursor" Value="Hand"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{StaticResource BlueGray50Brush}"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="{StaticResource BlueGray100Brush}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.RowStyle>

                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="{StaticResource BlueGray100Brush}"/>
                            <Setter Property="Foreground" Value="{StaticResource DeepNavy700Brush}"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                            <Setter Property="FontSize" Value="11"/>
                            <Setter Property="Padding" Value="8,10"/>
                            <Setter Property="BorderThickness" Value="0,0,1,1"/>
                            <Setter Property="BorderBrush" Value="{StaticResource BlueGray200Brush}"/>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>

                    <DataGrid.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="Padding" Value="8,6"/>
                            <Setter Property="FontSize" Value="12"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="{StaticResource DeepNavy700Brush}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.CellStyle>
                </DataGrid>

                <!-- 프로그램 로딩 표시 -->
                <Grid Grid.Row="2"
                      Visibility="{Binding IsProgramsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                      Background="#80FFFFFF">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <ProgressBar IsIndeterminate="True" Width="100" Height="4"/>
                        <TextBlock Text="로딩 중..." Margin="0,8,0,0" FontSize="12" Opacity="0.7"/>
                    </StackPanel>
                </Grid>
            </Grid>
        </Border>

        <!-- 구분선 -->
        <GridSplitter Grid.Column="1" 
                      Width="4" 
                      HorizontalAlignment="Center"
                      VerticalAlignment="Stretch"
                      Background="{StaticResource BlueGray200Brush}"/>

        <!-- ========== 우측: 물건 목록 ========== -->
        <Border Grid.Column="2" 
                Background="{StaticResource BackgroundBrush}"
                Margin="8,16,16,16">
            <Border.Effect>
                <DropShadowEffect Color="Black" Opacity="0.08" BlurRadius="8" ShadowDepth="2"/>
            </Border.Effect>
            
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- 헤더 -->
                <Border Grid.Row="0" 
                        Background="{StaticResource SecondaryBrush}"
                        Padding="16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel>
                            <TextBlock Foreground="White" FontSize="18" FontWeight="Bold">
                                <Run Text="프로그램별 진행사항"/>
                            </TextBlock>
                            <TextBlock Foreground="#B0FFFFFF" FontSize="12" Margin="0,4,0,0">
                                <Run Text="프로그램 선택:"/>
                                <Run Text="{Binding SelectedProgram.ProgramName, FallbackValue='선택하세요'}" FontWeight="SemiBold"/>
                            </TextBlock>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <Button Content="Assign: 전체"
                                    Style="{StaticResource SecondaryButton}"
                                    Foreground="White"
                                    Background="Transparent"
                                    BorderBrush="#80FFFFFF"
                                    Padding="12,6"
                                    FontSize="12"
                                    Margin="0,0,8,0"/>
                            <Button Content="새로고침"
                                    Command="{Binding RefreshCommand}"
                                    Style="{StaticResource SecondaryButton}"
                                    Foreground="White"
                                    Background="Transparent"
                                    BorderBrush="#80FFFFFF"
                                    Padding="12,6"
                                    FontSize="12"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- 통계 요약 -->
                <Border Grid.Row="1" 
                        Background="{StaticResource BlueGray50Brush}"
                        Padding="16,12">
                    <StackPanel Orientation="Horizontal">
                        <Border Background="{StaticResource PrimaryBrush}" CornerRadius="4" Padding="12,6" Margin="0,0,12,0">
                            <TextBlock Foreground="White" FontSize="12">
                                <Run Text="전체"/>
                                <Run Text="{Binding TotalPropertyCount}" FontWeight="Bold"/>
                            </TextBlock>
                        </Border>
                        <Border Background="{StaticResource WarningBrush}" CornerRadius="4" Padding="12,6" Margin="0,0,12,0">
                            <TextBlock Foreground="White" FontSize="12">
                                <Run Text="대기"/>
                                <Run Text="{Binding PendingCount}" FontWeight="Bold"/>
                            </TextBlock>
                        </Border>
                        <Border Background="{StaticResource InfoBrush}" CornerRadius="4" Padding="12,6" Margin="0,0,12,0">
                            <TextBlock Foreground="White" FontSize="12">
                                <Run Text="진행"/>
                                <Run Text="{Binding ProcessingCount}" FontWeight="Bold"/>
                            </TextBlock>
                        </Border>
                        <Border Background="{StaticResource SuccessBrush}" CornerRadius="4" Padding="12,6">
                            <TextBlock Foreground="White" FontSize="12">
                                <Run Text="완료"/>
                                <Run Text="{Binding CompletedCount}" FontWeight="Bold"/>
                            </TextBlock>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- 물건 목록 -->
                <DataGrid Grid.Row="2"
                          x:Name="PropertiesDataGrid"
                          ItemsSource="{Binding Properties}"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          SelectionMode="Single"
                          GridLinesVisibility="All"
                          HorizontalGridLinesBrush="{StaticResource TableBorderBrush}"
                          VerticalGridLinesBrush="{StaticResource TableBorderBrush}"
                          HeadersVisibility="Column"
                          Background="Transparent"
                          BorderThickness="0"
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto">
                    
                    <DataGrid.Columns>
                        <!-- 차주번호 -->
                        <DataGridTextColumn Header="차주번호" 
                                          Binding="{Binding PropertyNumber}" 
                                          Width="90"
                                          IsReadOnly="True"/>
                        
                        <!-- 차주명 -->
                        <DataGridTextColumn Header="차주명" 
                                          Binding="{Binding DebtorName}" 
                                          Width="90"
                                          IsReadOnly="True"/>
                        
                        <!-- Assign -->
                        <DataGridTemplateColumn Header="Assign" Width="110">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <ComboBox ItemsSource="{Binding DataContext.Evaluators, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                              DisplayMemberPath="Name"
                                              SelectedValuePath="Id"
                                              SelectedValue="{Binding AssignedTo, UpdateSourceTrigger=PropertyChanged}"
                                              SelectionChanged="AssignComboBox_SelectionChanged"
                                              Padding="4"
                                              BorderThickness="0"
                                              FontSize="11"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- 담보번호 -->
                        <DataGridTextColumn Header="담보번호" 
                                          Binding="{Binding CollateralNumber}" 
                                          Width="90"
                                          IsReadOnly="True"/>
                        
                        <!-- 물건종류 -->
                        <DataGridTextColumn Header="종류" 
                                          Binding="{Binding PropertyType}" 
                                          Width="60"
                                          IsReadOnly="True"/>
                        
                        <!-- 약정서 -->
                        <DataGridTemplateColumn Header="약정서" Width="50">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding AgreementDoc, UpdateSourceTrigger=PropertyChanged}"
                                              HorizontalAlignment="Center"
                                              Click="ProgressCheckBox_Click"
                                              Tag="agreement_doc"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- 보증서 -->
                        <DataGridTemplateColumn Header="보증서" Width="50">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding GuaranteeDoc, UpdateSourceTrigger=PropertyChanged}"
                                              HorizontalAlignment="Center"
                                              Click="ProgressCheckBox_Click"
                                              Tag="guarantee_doc"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- 경개1 -->
                        <DataGridTemplateColumn Header="경개1" Width="60">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <ComboBox SelectedItem="{Binding AuctionStart1, UpdateSourceTrigger=PropertyChanged}"
                                              SelectionChanged="AuctionStartComboBox_SelectionChanged"
                                              Tag="auction_start_1"
                                              Padding="2"
                                              BorderThickness="0"
                                              FontSize="10">
                                        <ComboBoxItem Content=""/>
                                        <ComboBoxItem Content="개시"/>
                                        <ComboBoxItem Content="미개시"/>
                                    </ComboBox>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- 경매열람 -->
                        <DataGridTemplateColumn Header="열람" Width="45">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding AuctionDocs, UpdateSourceTrigger=PropertyChanged}"
                                              HorizontalAlignment="Center"
                                              Click="ProgressCheckBox_Click"
                                              Tag="auction_docs"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- 전입열람 -->
                        <DataGridTemplateColumn Header="전입" Width="45">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding TenantDocs, UpdateSourceTrigger=PropertyChanged}"
                                              HorizontalAlignment="Center"
                                              Click="ProgressCheckBox_Click"
                                              Tag="tenant_docs"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- 선순위 -->
                        <DataGridTemplateColumn Header="선순위" Width="50">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding SeniorRightsReview, UpdateSourceTrigger=PropertyChanged}"
                                              HorizontalAlignment="Center"
                                              Click="ProgressCheckBox_Click"
                                              Tag="senior_rights_review"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- 평가확정 -->
                        <DataGridTemplateColumn Header="평가" Width="45">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding AppraisalConfirmed, UpdateSourceTrigger=PropertyChanged}"
                                              HorizontalAlignment="Center"
                                              Click="ProgressCheckBox_Click"
                                              Tag="appraisal_confirmed"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- QA -->
                        <DataGridTemplateColumn Header="QA" Width="40">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Background="{StaticResource ErrorBrush}"
                                            CornerRadius="10"
                                            Padding="4,2"
                                            HorizontalAlignment="Center"
                                            Visibility="{Binding QaUnansweredCount, Converter={StaticResource IntToVisibilityConverter}}">
                                        <TextBlock Text="{Binding QaUnansweredCount}"
                                                   Foreground="White"
                                                   FontSize="10"
                                                   FontWeight="Bold"/>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- 권리분석 -->
                        <DataGridTemplateColumn Header="권리" Width="55">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border CornerRadius="4" Padding="4,2" HorizontalAlignment="Center">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="Background" Value="{StaticResource BlueGray100Brush}"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding RightsAnalysisStatus}" Value="completed">
                                                        <Setter Property="Background" Value="{StaticResource SuccessBrush}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding RightsAnalysisStatus}" Value="processing">
                                                        <Setter Property="Background" Value="{StaticResource WarningBrush}"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                        <TextBlock FontSize="10" HorizontalAlignment="Center">
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Text" Value="대기"/>
                                                    <Setter Property="Foreground" Value="{StaticResource DeepNavy700Brush}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding RightsAnalysisStatus}" Value="completed">
                                                            <Setter Property="Text" Value="완료"/>
                                                            <Setter Property="Foreground" Value="White"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding RightsAnalysisStatus}" Value="processing">
                                                            <Setter Property="Text" Value="진행"/>
                                                            <Setter Property="Foreground" Value="White"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- 상세 링크 -->
                        <DataGridTemplateColumn Header="" Width="45">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="상세" 
                                               Foreground="{StaticResource PrimaryBrush}"
                                               FontSize="11"
                                               Cursor="Hand"
                                               TextDecorations="Underline"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Margin="0,0,8,0">
                                        <TextBlock.InputBindings>
                                            <MouseBinding MouseAction="LeftClick" 
                                                          Command="{Binding DataContext.ViewPropertyDetailCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                          CommandParameter="{Binding}"/>
                                        </TextBlock.InputBindings>
                                    </TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                        <!-- 우측 여백 -->
                        <DataGridTemplateColumn Width="16" IsReadOnly="True">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Width="16"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>

                    <DataGrid.RowStyle>
                        <Style TargetType="DataGridRow">
                            <Setter Property="Background" Value="Transparent"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{StaticResource BlueGray50Brush}"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="{StaticResource BlueGray100Brush}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.RowStyle>

                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="{StaticResource BlueGray100Brush}"/>
                            <Setter Property="Foreground" Value="{StaticResource DeepNavy700Brush}"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                            <Setter Property="FontSize" Value="11"/>
                            <Setter Property="Padding" Value="6,8"/>
                            <Setter Property="BorderThickness" Value="0,0,1,1"/>
                            <Setter Property="BorderBrush" Value="{StaticResource BlueGray200Brush}"/>
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>

                    <DataGrid.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="BorderThickness" Value="0,0,1,0"/>
                            <Setter Property="BorderBrush" Value="{StaticResource BlueGray100Brush}"/>
                            <Setter Property="Padding" Value="2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="{StaticResource DeepNavy700Brush}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.CellStyle>
                </DataGrid>

                <!-- 물건 로딩 표시 -->
                <Grid Grid.Row="2"
                      Visibility="{Binding IsPropertiesLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                      Background="#80FFFFFF">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <ProgressBar IsIndeterminate="True" Width="150" Height="4"/>
                        <TextBlock Text="물건 목록 로딩 중..." Margin="0,8,0,0" FontSize="12" Opacity="0.7"/>
                    </StackPanel>
                </Grid>

                <!-- 프로그램 미선택 안내 -->
                <Grid Grid.Row="2"
                      Visibility="{Binding SelectedProgram, Converter={StaticResource NullToInverseVisibilityConverter}}"
                      Background="#F8FAFC">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <materialDesign:PackIcon Kind="FolderOpen" Width="64" Height="64" Foreground="#CBD5E1"/>
                        <TextBlock Text="좌측에서 프로그램을 선택해주세요" 
                                   FontSize="14" 
                                   Foreground="#94A3B8"
                                   Margin="0,16,0,0"/>
                    </StackPanel>
                </Grid>
            </Grid>
        </Border>

        <!-- 전체 로딩 오버레이 -->
        <Grid Grid.ColumnSpan="3"
              Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
              Background="#80000000">
            <Border Background="White" CornerRadius="8" Padding="32" 
                    VerticalAlignment="Center" HorizontalAlignment="Center">
                <StackPanel>
                    <ProgressBar IsIndeterminate="True" Width="200" Height="4"/>
                    <TextBlock Text="초기화 중..." Margin="0,16,0,0" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</UserControl>

