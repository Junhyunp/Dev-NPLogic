<UserControl x:Class="NPLogic.Views.Loan.Sections.DividendFundSection"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="200" d:DesignWidth="600">
    
    <UserControl.Resources>
        <SolidColorBrush x:Key="TableBorderBrush" Color="#D0D0D0"/>
        <SolidColorBrush x:Key="HeaderBg" Color="#E7E7E7"/>
        <SolidColorBrush x:Key="BlueBg" Color="#BDD7EE"/>
        <SolidColorBrush x:Key="LightBlueBg" Color="#E3F2FD"/>
        <SolidColorBrush x:Key="GreenBg" Color="#92D050"/>
        <SolidColorBrush x:Key="LightGreenBg" Color="#C6EFCE"/>
        
        <Style x:Key="CellBorder" TargetType="Border">
            <Setter Property="BorderBrush" Value="{StaticResource TableBorderBrush}"/>
            <Setter Property="BorderThickness" Value="0,0,1,1"/>
            <Setter Property="Padding" Value="8,4"/>
        </Style>
        
        <Style x:Key="LabelText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <Style x:Key="AmountText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
    </UserControl.Resources>
    
    <Border BorderBrush="{StaticResource TableBorderBrush}" BorderThickness="1,1,0,0">
        <StackPanel>
            <!-- 섹션 헤더 - SheetType과 Phase에 따라 동적으로 표시 -->
            <Border Background="{StaticResource LightBlueBg}" Padding="8,4" BorderBrush="{StaticResource TableBorderBrush}" BorderThickness="0,0,1,1">
                <TextBlock x:Name="SectionHeader" Text="배당가능재원" FontWeight="Bold" FontSize="12"/>
            </Border>
            
            <!-- 1안 / 2안 -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="180"/>
                    <ColumnDefinition Width="110"/>
                    <ColumnDefinition Width="110"/>
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="0" Style="{StaticResource CellBorder}" Background="{StaticResource HeaderBg}">
                    <TextBlock Text="구분" Style="{StaticResource LabelText}" FontWeight="SemiBold"/>
                </Border>
                <Border Grid.Column="1" Style="{StaticResource CellBorder}" Background="{StaticResource HeaderBg}">
                    <TextBlock Text="1안 (AT)" Style="{StaticResource LabelText}" HorizontalAlignment="Center" FontWeight="SemiBold"/>
                </Border>
                <Border Grid.Column="2" Style="{StaticResource CellBorder}" Background="{StaticResource HeaderBg}">
                    <TextBlock Text="2안 (AU)" Style="{StaticResource LabelText}" HorizontalAlignment="Center" FontWeight="SemiBold"/>
                </Border>
            </Grid>
            
            <!-- 당해시설 배당가능재원 -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="180"/>
                    <ColumnDefinition Width="110"/>
                    <ColumnDefinition Width="110"/>
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="0" Style="{StaticResource CellBorder}" Background="White">
                    <TextBlock Text="당해시설 배당가능재원" Style="{StaticResource LabelText}"/>
                </Border>
                <Border Grid.Column="1" Style="{StaticResource CellBorder}" Background="{StaticResource BlueBg}">
                    <TextBlock Text="{Binding DividendFund1.ThisFacilityFund, StringFormat=N0}" Style="{StaticResource AmountText}"/>
                </Border>
                <Border Grid.Column="2" Style="{StaticResource CellBorder}" Background="{StaticResource BlueBg}">
                    <TextBlock Text="{Binding DividendFund2.ThisFacilityFund, StringFormat=N0}" Style="{StaticResource AmountText}"/>
                </Border>
            </Grid>
            
            <!-- 당해시설 외 배당가능재원 -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="180"/>
                    <ColumnDefinition Width="110"/>
                    <ColumnDefinition Width="110"/>
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="0" Style="{StaticResource CellBorder}" Background="White">
                    <TextBlock Text="당해시설 외 배당가능재원" Style="{StaticResource LabelText}"/>
                </Border>
                <Border Grid.Column="1" Style="{StaticResource CellBorder}" Background="{StaticResource BlueBg}">
                    <TextBlock Text="{Binding DividendFund1.NonThisFacilityFund, StringFormat=N0}" Style="{StaticResource AmountText}"/>
                </Border>
                <Border Grid.Column="2" Style="{StaticResource CellBorder}" Background="{StaticResource BlueBg}">
                    <TextBlock Text="{Binding DividendFund2.NonThisFacilityFund, StringFormat=N0}" Style="{StaticResource AmountText}"/>
                </Border>
            </Grid>
            
            <!-- 비보증부대출 합계 -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="180"/>
                    <ColumnDefinition Width="110"/>
                    <ColumnDefinition Width="110"/>
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="0" Style="{StaticResource CellBorder}" Background="White">
                    <TextBlock Text="비보증부대출 합계" Style="{StaticResource LabelText}"/>
                </Border>
                <Border Grid.Column="1" Style="{StaticResource CellBorder}" Background="White">
                    <TextBlock Text="{Binding DividendFund1.NonGuaranteeTotal, StringFormat=N0}" Style="{StaticResource AmountText}"/>
                </Border>
                <Border Grid.Column="2" Style="{StaticResource CellBorder}" Background="White">
                    <TextBlock Text="{Binding DividendFund2.NonGuaranteeTotal, StringFormat=N0}" Style="{StaticResource AmountText}"/>
                </Border>
            </Grid>
            
            <!-- 연체이자, 약정이자 차이 -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="180"/>
                    <ColumnDefinition Width="110"/>
                    <ColumnDefinition Width="110"/>
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="0" Style="{StaticResource CellBorder}" Background="White">
                    <TextBlock Text="연체이자, 약정이자 차이" Style="{StaticResource LabelText}"/>
                </Border>
                <Border Grid.Column="1" Style="{StaticResource CellBorder}" Background="White">
                    <TextBlock Text="{Binding DividendFund1.InterestDifference, StringFormat=N0}" Style="{StaticResource AmountText}"/>
                </Border>
                <Border Grid.Column="2" Style="{StaticResource CellBorder}" Background="White">
                    <TextBlock Text="{Binding DividendFund2.InterestDifference, StringFormat=N0}" Style="{StaticResource AmountText}"/>
                </Border>
            </Grid>
            
            <!-- 안분대상금액 -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="180"/>
                    <ColumnDefinition Width="110"/>
                    <ColumnDefinition Width="110"/>
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="0" Style="{StaticResource CellBorder}" Background="{StaticResource LightGreenBg}">
                    <TextBlock Text="안분대상금액 (AV)" Style="{StaticResource LabelText}" FontWeight="SemiBold"/>
                </Border>
                <Border Grid.Column="1" Style="{StaticResource CellBorder}" Background="{StaticResource GreenBg}">
                    <TextBlock Text="{Binding DividendFund1.AllocationAmount, StringFormat=N0}" Style="{StaticResource AmountText}" FontWeight="Bold"/>
                </Border>
                <Border Grid.Column="2" Style="{StaticResource CellBorder}" Background="{StaticResource GreenBg}">
                    <TextBlock Text="{Binding DividendFund2.AllocationAmount, StringFormat=N0}" Style="{StaticResource AmountText}" FontWeight="Bold"/>
                </Border>
            </Grid>
            
        </StackPanel>
    </Border>
</UserControl>
