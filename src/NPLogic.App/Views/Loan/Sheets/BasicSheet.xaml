<UserControl x:Class="NPLogic.Views.Loan.Sheets.BasicSheet"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:sections="clr-namespace:NPLogic.Views.Loan.Sections"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1400">
    
    <UserControl.Resources>
        <SolidColorBrush x:Key="TableBorderBrush" Color="#D0D0D0"/>
    </UserControl.Resources>
    
    <!-- 일반 시트: 채권정보 + Loan Cap 계산 + 이미지 영역 + MCI 보증 -->
    <StackPanel>
        <!-- 채권정보 섹션 -->
        <sections:BondInfoSection DataContext="{Binding}" Margin="0,0,0,16"/>
        
        <!-- Loan Cap 계산 + 이미지 업로드 영역 (가로 배치) -->
        <Grid Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Loan Cap 계산 섹션 -->
            <sections:LoanCapSection Grid.Column="0" DataContext="{Binding}" Margin="0,0,16,0"/>
            
            <!-- 이미지 업로드 영역 (보증서 등 + 기타항목 및 전송) -->
            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <!-- 보증서 등 -->
                <Border BorderBrush="{StaticResource TableBorderBrush}" BorderThickness="1" Width="180" Margin="0,0,8,0">
                    <StackPanel>
                        <Border Background="#E8F5E9" Padding="8,4">
                            <TextBlock Text="보증서 등" FontWeight="SemiBold" FontSize="11"/>
                        </Border>
                        <Border Padding="8" MinHeight="180">
                            <StackPanel VerticalAlignment="Top">
                                <Button Content="이미지 붙여넣기" 
                                        Command="{Binding PasteGuaranteeImageCommand}" 
                                        Padding="8,4" 
                                        FontSize="10" 
                                        Margin="0,0,0,8"
                                        HorizontalAlignment="Stretch"/>
                                <Button Content="파일 선택" 
                                        Command="{Binding SelectGuaranteeImageCommand}" 
                                        Padding="8,4" 
                                        FontSize="10" 
                                        Margin="0,0,0,8"
                                        HorizontalAlignment="Stretch"/>
                                <Image Source="{Binding GuaranteeImage}" 
                                       MaxHeight="100" 
                                       Stretch="Uniform"
                                       Margin="0,4,0,0"/>
                                <TextBlock Text="{Binding GuaranteeImageInfo}" 
                                           FontSize="9" 
                                           Opacity="0.7" 
                                           TextWrapping="Wrap"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>
                
                <!-- 기타항목 및 전송 -->
                <Border BorderBrush="{StaticResource TableBorderBrush}" BorderThickness="1" Width="180">
                    <StackPanel>
                        <Border Background="#FFF3E0" Padding="8,4">
                            <TextBlock Text="기타항목 및 전송" FontWeight="SemiBold" FontSize="11"/>
                        </Border>
                        <Border Padding="8" MinHeight="180">
                            <StackPanel VerticalAlignment="Top">
                                <Button Content="이미지 붙여넣기" 
                                        Command="{Binding PasteOtherItemsImageCommand}" 
                                        Padding="8,4" 
                                        FontSize="10" 
                                        Margin="0,0,0,8"
                                        HorizontalAlignment="Stretch"/>
                                <Button Content="파일 선택" 
                                        Command="{Binding SelectOtherItemsImageCommand}" 
                                        Padding="8,4" 
                                        FontSize="10" 
                                        Margin="0,0,0,8"
                                        HorizontalAlignment="Stretch"/>
                                <Image Source="{Binding OtherItemsImage}" 
                                       MaxHeight="100" 
                                       Stretch="Uniform"
                                       Margin="0,4,0,0"/>
                                <TextBlock Text="{Binding OtherItemsImageInfo}" 
                                           FontSize="9" 
                                           Opacity="0.7" 
                                           TextWrapping="Wrap"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>
        
        <!-- MCI 보증 섹션 -->
        <sections:MciSection DataContext="{Binding}"/>
    </StackPanel>
</UserControl>
