<UserControl x:Class="NPLogic.Views.EvaluationTab"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:NPLogic.Views"
             xmlns:vm="clr-namespace:NPLogic.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="900" d:DesignWidth="1400"
             d:DataContext="{d:DesignInstance Type=vm:EvaluationTabViewModel}">

    <UserControl.Resources>
        <!-- ì„¹ì…˜ í—¤ë” ìŠ¤íƒ€ì¼ -->
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>
        
        <!-- ë¼ë²¨ ìŠ¤íƒ€ì¼ -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <!-- ê°’ ìŠ¤íƒ€ì¼ -->
        <Style x:Key="ValueStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <!-- ê¸ˆì•¡ ìŠ¤íƒ€ì¼ -->
        <Style x:Key="AmountStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <!-- ì¹´ë“œ ìŠ¤íƒ€ì¼ -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource BlueGray200Brush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                  HorizontalScrollBarVisibility="Disabled"
                  Padding="24">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
            <Border Grid.RowSpan="2" 
                    Background="#80FFFFFF" 
                    Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"
                    Panel.ZIndex="100">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <ProgressBar IsIndeterminate="True" Width="200" Height="4"/>
                    <TextBlock Text="ë¡œë”© ì¤‘..." Margin="0,12,0,0" 
                               HorizontalAlignment="Center"
                               Style="{StaticResource BodyTextStyle}"/>
                </StackPanel>
            </Border>

            <!-- í—¤ë”: í‰ê°€ ìœ í˜• ì„ íƒ -->
            <Border Grid.Row="0" Style="{StaticResource CardStyle}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <TextBlock Text="ðŸ“Š í‰ê°€ ìœ í˜• ì„ íƒ" 
                                   Style="{StaticResource SectionHeaderStyle}"
                                   Margin="0"/>
                    </StackPanel>

                    <!-- í‰ê°€ ìœ í˜• ë¼ë””ì˜¤ ë²„íŠ¼ -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" 
                                Margin="32,0,0,0"
                                VerticalAlignment="Center">
                        <RadioButton Content="1. ì•„íŒŒíŠ¸" 
                                     IsChecked="{Binding IsApartmentType}"
                                     GroupName="EvaluationType"
                                     Margin="0,0,24,0"
                                     FontSize="13"/>
                        <RadioButton Content="2. ì—°ë¦½ë‹¤ì„¸ëŒ€" 
                                     IsChecked="{Binding IsMultiFamilyType}"
                                     GroupName="EvaluationType"
                                     Margin="0,0,24,0"
                                     FontSize="13"/>
                        <RadioButton Content="3. ê³µìž¥/ì°½ê³ " 
                                     IsChecked="{Binding IsFactoryType}"
                                     GroupName="EvaluationType"
                                     Margin="0,0,24,0"
                                     FontSize="13"/>
                        <RadioButton Content="4. ìƒê°€/ì•„íŒŒíŠ¸í˜•ê³µìž¥" 
                                     IsChecked="{Binding IsCommercialType}"
                                     GroupName="EvaluationType"
                                     Margin="0,0,24,0"
                                     FontSize="13"/>
                        <RadioButton Content="5. ì£¼íƒ/ê·¼ë¦°ì‹œì„¤/í† ì§€" 
                                     IsChecked="{Binding IsHouseLandType}"
                                     GroupName="EvaluationType"
                                     FontSize="13"/>
                    </StackPanel>

                    <!-- ì €ìž¥ ë²„íŠ¼ -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <Button Content="ì €ìž¥" 
                                Command="{Binding SaveCommand}"
                                Style="{StaticResource PrimaryButton}"
                                Padding="24,8"
                                Margin="0,0,8,0"/>
                        <Button Content="ìƒˆë¡œê³ ì¹¨" 
                                Command="{Binding RefreshCommand}"
                                Style="{StaticResource SecondaryButton}"
                                Padding="16,8"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ë©”ì¸ ì½˜í…ì¸  -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="16"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- ì¢Œì¸¡: ì‚¬ë¡€ì§€ë„ + ì‚¬ë¡€í‰ê°€ -->
                <StackPanel Grid.Column="0">
                    
                    <!-- ì‚¬ë¡€ì§€ë„ ì˜ì—­ -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <Grid Margin="0,0,0,12">
                                <TextBlock Text="ðŸ—ºï¸ ì‚¬ë¡€ì§€ë„" Style="{StaticResource SectionHeaderStyle}" Margin="0"/>
                                <Button Content="ê°€ì ¸ì˜¤ê¸°" 
                                        Command="{Binding LoadCaseMapCommand}"
                                        Style="{StaticResource SecondaryButton}"
                                        Padding="12,4"
                                        FontSize="12"
                                        HorizontalAlignment="Right"/>
                            </Grid>
                            
                            <!-- ì§€ë„ í”Œë ˆì´ìŠ¤í™€ë” -->
                            <Border Background="{StaticResource BlueGray50Brush}" 
                                    CornerRadius="4"
                                    Height="200">
                                <TextBlock Text="ì†Œìž¬ì§€ ê¸°ì¤€ìœ¼ë¡œ ìœ„ì¹˜, ë³¸ê±´ê¸°ì¤€ê±°ëž˜ ìžë™ ì‚°ì • ë° í‘œì‹œ"
                                           Style="{StaticResource BodyTextStyle}"
                                           Opacity="0.6"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"/>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- ì‚¬ë¡€í‰ê°€ ê·¸ë¦¬ë“œ -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <Grid Margin="0,0,0,12">
                                <TextBlock Text="ðŸ“‹ ì‚¬ë¡€í‰ê°€" Style="{StaticResource SectionHeaderStyle}" Margin="0"/>
                                <Button Content="ê²½ë§¤ì‚¬ê±´ê²€ìƒ‰" 
                                        Command="{Binding SearchAuctionCaseCommand}"
                                        Style="{StaticResource SecondaryButton}"
                                        Padding="12,4"
                                        FontSize="12"
                                        HorizontalAlignment="Right"/>
                            </Grid>
                            
                            <!-- ì‚¬ë¡€í‰ê°€ í…Œì´ë¸” -->
                            <DataGrid ItemsSource="{Binding CaseItems}"
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      CanUserDeleteRows="False"
                                      HeadersVisibility="Column"
                                      GridLinesVisibility="All"
                                      BorderThickness="1"
                                      BorderBrush="{StaticResource BlueGray200Brush}"
                                      MaxHeight="400"
                                      FontSize="12">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="êµ¬ë¶„" Binding="{Binding Label}" Width="100" IsReadOnly="True">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Background" Value="{StaticResource BlueGray50Brush}"/>
                                                <Setter Property="Padding" Value="8,4"/>
                                                <Setter Property="FontWeight" Value="SemiBold"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>
                                    <DataGridTextColumn Header="ë³¸ê±´ ê°ì •ê°€" Binding="{Binding BaseValue, StringFormat=N0}" Width="110"/>
                                    <DataGridTextColumn Header="ì‚¬ë¡€1" Binding="{Binding Case1Value, StringFormat=N0}" Width="110"/>
                                    <DataGridTextColumn Header="ì‚¬ë¡€2" Binding="{Binding Case2Value, StringFormat=N0}" Width="110"/>
                                    <DataGridTextColumn Header="ì‚¬ë¡€3" Binding="{Binding Case3Value, StringFormat=N0}" Width="110"/>
                                    <DataGridTextColumn Header="ì‚¬ë¡€4" Binding="{Binding Case4Value, StringFormat=N0}" Width="110"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- ìš°ì¸¡: ì‹¤ê±°ëž˜ê°€ + ë‚™ì°°í†µê³„ + í‰ê°€ê²°ê³¼ -->
                <StackPanel Grid.Column="2">
                    
                    <!-- ì‹¤ê±°ëž˜ê°€ ì˜ì—­ -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <Grid Margin="0,0,0,12">
                                <TextBlock Text="ðŸ’° ì‹¤ê±°ëž˜ê°€" Style="{StaticResource SectionHeaderStyle}" Margin="0"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button Content="ì¡°íšŒ" 
                                            Command="{Binding FetchRealTransactionCommand}"
                                            Style="{StaticResource SecondaryButton}"
                                            Padding="12,4"
                                            FontSize="12"
                                            Margin="0,0,8,0"/>
                                    <Button Content="ðŸ”— rt.molit.go.kr" 
                                            Command="{Binding OpenRealTransactionSiteCommand}"
                                            Style="{StaticResource SecondaryButton}"
                                            Padding="12,4"
                                            FontSize="12"/>
                                </StackPanel>
                            </Grid>
                            
                            <!-- ì‹¤ê±°ëž˜ê°€ í…Œì´ë¸” -->
                            <DataGrid ItemsSource="{Binding RealTransactions}"
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      CanUserDeleteRows="False"
                                      HeadersVisibility="Column"
                                      GridLinesVisibility="All"
                                      BorderThickness="1"
                                      BorderBrush="{StaticResource BlueGray200Brush}"
                                      MaxHeight="150"
                                      FontSize="12">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="ê±°ëž˜ë©´ì " Binding="{Binding Area, StringFormat=N2}" Width="80"/>
                                    <DataGridTextColumn Header="ê±°ëž˜ì¼ìž" Binding="{Binding TransactionDate, StringFormat=yyyy-MM-dd}" Width="90"/>
                                    <DataGridTextColumn Header="ê±°ëž˜ê¸ˆì•¡" Binding="{Binding Amount, StringFormat=N0}" Width="100"/>
                                    <DataGridTextColumn Header="ì¸µìˆ˜" Binding="{Binding Floor}" Width="50"/>
                                    <DataGridTextColumn Header="ë“±ê¸°ì—¬ë¶€" Binding="{Binding IsRegistered}" Width="60"/>
                                    <DataGridCheckBoxColumn Header="ì ìš©" Binding="{Binding IsApplied}" Width="50"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>
                    </Border>

                    <!-- ë‚™ì°°í†µê³„ ì˜ì—­ -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="ðŸ“ˆ ë‚™ì°°í†µê³„" Style="{StaticResource SectionHeaderStyle}"/>
                            
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- í—¤ë” -->
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="ì§€ì—­í†µê³„" 
                                           Style="{StaticResource LabelStyle}" FontWeight="SemiBold"
                                           Margin="0,0,0,8"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding RegionName1}" 
                                           Style="{StaticResource ValueStyle}"
                                           Margin="0,0,0,8"/>
                                <TextBlock Grid.Row="0" Grid.Column="2" Text="{Binding RegionName2}" 
                                           Style="{StaticResource ValueStyle}"
                                           Margin="0,0,0,8"/>
                                <TextBlock Grid.Row="0" Grid.Column="3" Text="ì ìš©ë‚™ì°°ê°€ìœ¨" 
                                           Style="{StaticResource LabelStyle}" FontWeight="SemiBold"
                                           Margin="16,0,0,8"/>

                                <!-- 1ë…„ í‰ê·  -->
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="1ë…„ í‰ê· " Style="{StaticResource LabelStyle}"/>
                                <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal">
                                    <TextBlock Text="{Binding Stats1Year_Rate1, StringFormat={}{0:P1}}" Style="{StaticResource ValueStyle}"/>
                                    <TextBlock Text=" / " Style="{StaticResource LabelStyle}"/>
                                    <TextBlock Text="{Binding Stats1Year_Count1, StringFormat={}{0}ê±´}" Style="{StaticResource LabelStyle}"/>
                                </StackPanel>
                                <StackPanel Grid.Row="1" Grid.Column="2" Orientation="Horizontal">
                                    <TextBlock Text="{Binding Stats1Year_Rate2, StringFormat={}{0:P1}}" Style="{StaticResource ValueStyle}"/>
                                    <TextBlock Text=" / " Style="{StaticResource LabelStyle}"/>
                                    <TextBlock Text="{Binding Stats1Year_Count2, StringFormat={}{0}ê±´}" Style="{StaticResource LabelStyle}"/>
                                </StackPanel>

                                <!-- 6ê°œì›” í‰ê·  -->
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="6ê°œì›” í‰ê· " Style="{StaticResource LabelStyle}" Margin="0,8,0,0"/>
                                <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Margin="0,8,0,0">
                                    <TextBlock Text="{Binding Stats6Month_Rate1, StringFormat={}{0:P1}}" Style="{StaticResource ValueStyle}"/>
                                    <TextBlock Text=" / " Style="{StaticResource LabelStyle}"/>
                                    <TextBlock Text="{Binding Stats6Month_Count1, StringFormat={}{0}ê±´}" Style="{StaticResource LabelStyle}"/>
                                </StackPanel>
                                <StackPanel Grid.Row="2" Grid.Column="2" Orientation="Horizontal" Margin="0,8,0,0">
                                    <TextBlock Text="{Binding Stats6Month_Rate2, StringFormat={}{0:P1}}" Style="{StaticResource ValueStyle}"/>
                                    <TextBlock Text=" / " Style="{StaticResource LabelStyle}"/>
                                    <TextBlock Text="{Binding Stats6Month_Count2, StringFormat={}{0}ê±´}" Style="{StaticResource LabelStyle}"/>
                                </StackPanel>
                                <TextBlock Grid.Row="2" Grid.Column="3" 
                                           Text="10ê±´ì´ìƒ í‰ê· " 
                                           Style="{StaticResource LabelStyle}"
                                           Margin="16,8,0,0"
                                           FontSize="11"/>

                                <!-- 3ê°œì›” í‰ê·  -->
                                <TextBlock Grid.Row="3" Grid.Column="0" Text="3ê°œì›” í‰ê· " Style="{StaticResource LabelStyle}" Margin="0,8,0,0"/>
                                <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Margin="0,8,0,0">
                                    <TextBlock Text="{Binding Stats3Month_Rate1, StringFormat={}{0:P1}}" Style="{StaticResource ValueStyle}"/>
                                    <TextBlock Text=" / " Style="{StaticResource LabelStyle}"/>
                                    <TextBlock Text="{Binding Stats3Month_Count1, StringFormat={}{0}ê±´}" Style="{StaticResource LabelStyle}"/>
                                </StackPanel>
                                <StackPanel Grid.Row="3" Grid.Column="2" Orientation="Horizontal" Margin="0,8,0,0">
                                    <TextBlock Text="{Binding Stats3Month_Rate2, StringFormat={}{0:P1}}" Style="{StaticResource ValueStyle}"/>
                                    <TextBlock Text=" / " Style="{StaticResource LabelStyle}"/>
                                    <TextBlock Text="{Binding Stats3Month_Count2, StringFormat={}{0}ê±´}" Style="{StaticResource LabelStyle}"/>
                                </StackPanel>

                                <!-- ì ìš© ë‚™ì°°ê°€ìœ¨ -->
                                <Border Grid.Row="1" Grid.RowSpan="3" Grid.Column="3"
                                        Background="{StaticResource PrimaryLightBrush}"
                                        CornerRadius="4"
                                        Padding="16,8"
                                        Margin="16,0,0,0"
                                        VerticalAlignment="Center">
                                    <StackPanel>
                                        <TextBlock Text="{Binding AppliedBidRate, StringFormat={}{0:P1}}" 
                                                   Style="{StaticResource AmountStyle}"
                                                   FontSize="24"
                                                   HorizontalAlignment="Center"/>
                                        <TextBlock Text="{Binding AppliedBidRateDescription}" 
                                                   Style="{StaticResource LabelStyle}"
                                                   FontSize="11"
                                                   HorizontalAlignment="Center"
                                                   Margin="0,4,0,0"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- í‰ê°€ê²°ê³¼ ì˜ì—­ -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="âœ… í‰ê°€ê²°ê³¼" Style="{StaticResource SectionHeaderStyle}"/>
                            
                            <!-- ì‹œë‚˜ë¦¬ì˜¤ 1 -->
                            <Border Background="{StaticResource BlueGray50Brush}" 
                                    CornerRadius="4" 
                                    Padding="16"
                                    Margin="0,0,0,12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.ColumnSpan="4" 
                                               Text="ì‹œë‚˜ë¦¬ì˜¤ 1" 
                                               FontWeight="Bold" FontSize="14"
                                               Foreground="{StaticResource PrimaryBrush}"
                                               Margin="0,0,0,12"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="ë‚™ì°°ê°€ì•¡" Style="{StaticResource LabelStyle}"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" 
                                               Text="{Binding Scenario1_Amount, StringFormat={}{0:N0}ì›}" 
                                               Style="{StaticResource AmountStyle}"
                                               Margin="8,0,24,0"/>
                                    <TextBlock Grid.Row="1" Grid.Column="2" Text="ë‚™ì°°ê°€ìœ¨" Style="{StaticResource LabelStyle}"/>
                                    <TextBlock Grid.Row="1" Grid.Column="3" 
                                               Text="{Binding Scenario1_Rate, StringFormat={}{0:P1}}" 
                                               Style="{StaticResource ValueStyle}"
                                               Margin="8,0,0,0"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="í‰ê°€ ì‚¬ìœ " Style="{StaticResource LabelStyle}" Margin="0,8,0,0"/>
                                    <TextBox Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3"
                                             Text="{Binding Scenario1_Reason, UpdateSourceTrigger=PropertyChanged}"
                                             Margin="8,8,0,0"
                                             Padding="8,4"
                                             FontSize="12"/>
                                </Grid>
                            </Border>

                            <!-- ì‹œë‚˜ë¦¬ì˜¤ 2 -->
                            <Border Background="{StaticResource BlueGray50Brush}" 
                                    CornerRadius="4" 
                                    Padding="16">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.ColumnSpan="4" 
                                               Text="ì‹œë‚˜ë¦¬ì˜¤ 2" 
                                               FontWeight="Bold" FontSize="14"
                                               Foreground="{StaticResource SecondaryBrush}"
                                               Margin="0,0,0,12"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="ë‚™ì°°ê°€ì•¡" Style="{StaticResource LabelStyle}"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" 
                                               Text="{Binding Scenario2_Amount, StringFormat={}{0:N0}ì›}" 
                                               Style="{StaticResource AmountStyle}"
                                               Foreground="{StaticResource SecondaryBrush}"
                                               Margin="8,0,24,0"/>
                                    <TextBlock Grid.Row="1" Grid.Column="2" Text="ë‚™ì°°ê°€ìœ¨" Style="{StaticResource LabelStyle}"/>
                                    <TextBlock Grid.Row="1" Grid.Column="3" 
                                               Text="{Binding Scenario2_Rate, StringFormat={}{0:P1}}" 
                                               Style="{StaticResource ValueStyle}"
                                               Margin="8,0,0,0"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="í‰ê°€ ì‚¬ìœ " Style="{StaticResource LabelStyle}" Margin="0,8,0,0"/>
                                    <TextBox Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3"
                                             Text="{Binding Scenario2_Reason, UpdateSourceTrigger=PropertyChanged}"
                                             Margin="8,8,0,0"
                                             Padding="8,4"
                                             FontSize="12"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>

            <!-- ë©”ì‹œì§€ í‘œì‹œ -->
            <Border Grid.Row="1" 
                    Background="#E8F5E9" 
                    CornerRadius="4" 
                    Padding="12"
                    Margin="0,16,0,0"
                    VerticalAlignment="Bottom"
                    Visibility="{Binding SuccessMessage, Converter={StaticResource NullToVisibilityConverter}}">
                <TextBlock Text="{Binding SuccessMessage}" 
                           Foreground="#2E7D32"
                           FontSize="13"/>
            </Border>

            <Border Grid.Row="1" 
                    Background="#FFEBEE" 
                    CornerRadius="4" 
                    Padding="12"
                    Margin="0,16,0,0"
                    VerticalAlignment="Bottom"
                    Visibility="{Binding ErrorMessage, Converter={StaticResource NullToVisibilityConverter}}">
                <TextBlock Text="{Binding ErrorMessage}" 
                           Foreground="#C62828"
                           FontSize="13"/>
            </Border>
        </Grid>
    </ScrollViewer>
</UserControl>

