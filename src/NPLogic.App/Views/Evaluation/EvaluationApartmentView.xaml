<UserControl x:Class="NPLogic.Views.Evaluation.EvaluationApartmentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1400">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="16"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ì¢Œì¸¡: ì‚¬ë¡€ì§€ë„ + ì‹¤ê±°ëž˜ê°€ + ì‚¬ë¡€í‰ê°€ -->
        <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- ì‚¬ë¡€ì§€ë„ ì˜ì—­ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <TextBlock Text="ðŸ—ºï¸ ì‚¬ë¡€ì§€ë„" Style="{StaticResource SectionHeader}" Margin="0"/>
                            <Button Content="ê°€ì ¸ì˜¤ê¸°" 
                                    Command="{Binding LoadCaseMapCommand}"
                                    Style="{StaticResource SecondaryButton}"
                                    Padding="12,4"
                                    HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <!-- ì§€ë„ í”Œë ˆì´ìŠ¤í™€ë” -->
                        <Border Background="{StaticResource BlueGray50Brush}" 
                                CornerRadius="4"
                                Height="200"
                                Cursor="Hand"
                                ToolTip="í´ë¦­í•˜ì—¬ í™•ëŒ€">
                            <Grid>
                                <TextBlock Text="ì†Œìž¬ì§€ ê¸°ì¤€ìœ¼ë¡œ ìœ„ì¹˜, ë³¸ê±´ê¸°ì¤€ê±°ëž˜ ìžë™ ì‚°ì • ë° í‘œì‹œ"
                                           Style="{StaticResource BodyTextStyle}"
                                           Opacity="0.6"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"/>
                                <TextBlock Text="ðŸ” í´ë¦­í•˜ì—¬ í™•ëŒ€"
                                           Style="{StaticResource BodyTextStyle}"
                                           FontSize="{StaticResource FontSizeSmall}"
                                           Opacity="0.5"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Bottom"
                                           Margin="0,0,8,8"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- ì‹¤ê±°ëž˜ê°€ ì˜ì—­ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <TextBlock Text="ðŸ’° ì‹¤ê±°ëž˜ê°€" Style="{StaticResource SectionHeader}" Margin="0"/>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <Button Content="ì¡°íšŒ" 
                                        Command="{Binding FetchRealTransactionCommand}"
                                        Style="{StaticResource SecondaryButton}"
                                        Padding="12,4"
                                        Margin="0,0,8,0"/>
                                <Button Content="ðŸ”— rt.molit.go.kr" 
                                        Command="{Binding OpenRealTransactionSiteCommand}"
                                        Style="{StaticResource SecondaryButton}"
                                        Padding="12,4"/>
                            </StackPanel>
                        </Grid>
                        
                        <!-- ì‹¤ê±°ëž˜ê°€ í…Œì´ë¸” -->
                        <DataGrid ItemsSource="{Binding RealTransactions}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="All"
                                  BorderThickness="1"
                                  BorderBrush="{StaticResource BlueGray200Brush}"
                                  MaxHeight="150"
                                  FontSize="{StaticResource FontSizeBody}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ê±°ëž˜ë©´ì " Binding="{Binding Area, StringFormat=N2}" Width="80"/>
                                <DataGridTextColumn Header="ê±°ëž˜ì¼ìž" Binding="{Binding TransactionDate, StringFormat=yyyy-MM-dd}" Width="90"/>
                                <DataGridTextColumn Header="ê±°ëž˜ê¸ˆì•¡" Binding="{Binding Amount, StringFormat=N0}" Width="100"/>
                                <DataGridTextColumn Header="ì¸µìˆ˜" Binding="{Binding Floor}" Width="50"/>
                                <DataGridTextColumn Header="ë“±ê¸°ì—¬ë¶€" Binding="{Binding IsRegistered}" Width="60"/>
                                <DataGridCheckBoxColumn Header="ì ìš©" Binding="{Binding IsApplied}" Width="50"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <!-- ê±°ëž˜ê°€ê²© ì°¨íŠ¸ ì˜ì—­ -->
                        <Border Background="{StaticResource BlueGray50Brush}" 
                                CornerRadius="4"
                                Height="120"
                                Margin="0,12,0,0">
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock Text="ðŸ“ˆ ê±°ëž˜ê°€ê²© ì¶”ì´" 
                                           Style="{StaticResource BodyTextStyle}"
                                           Opacity="0.6"
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="(ì°¨íŠ¸ ì˜ì—­)" 
                                           Style="{StaticResource BodyTextStyle}"
                                           FontSize="{StaticResource FontSizeSmall}"
                                           Opacity="0.4"
                                           HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- ìœ ì‚¬ë¬¼ê±´ ì¶”ì²œ ì˜ì—­ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="ðŸŽ¯ ìœ ì‚¬ë¬¼ê±´ ì¶”ì²œ" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>
                        
                        <!-- í•„í„° + ë²„íŠ¼ í–‰ -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <TextBlock Text="ê·œì¹™:" Style="{StaticResource LabelText}" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <ComboBox SelectedIndex="{Binding SelectedRuleIndex, Mode=TwoWay}"
                                      Width="70" FontSize="{StaticResource FontSizeBody}" Padding="4,2" Margin="0,0,16,0">
                                <ComboBoxItem Content="1ìˆœìœ„" Tag="1"/>
                                <ComboBoxItem Content="2ìˆœìœ„" Tag="2"/>
                                <ComboBoxItem Content="3ìˆœìœ„" Tag="3"/>
                                <ComboBoxItem Content="ì „ì²´"/>
                            </ComboBox>
                            <TextBlock Text="ë²”ìœ„:" Style="{StaticResource LabelText}" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <ComboBox Width="80" FontSize="{StaticResource FontSizeBody}" Padding="4,2" Margin="0,0,16,0"
                                      SelectedValue="{Binding SelectedRegionScope, Mode=TwoWay}"
                                      SelectedValuePath="Tag">
                                <ComboBoxItem Content="ì‹œ/ë„" Tag="big"/>
                                <ComboBoxItem Content="ì‹œ/êµ°/êµ¬" Tag="mid"/>
                            </ComboBox>
                            <Button Content="ì¶”ì²œ ê²€ìƒ‰" 
                                    Command="{Binding RecommendSimilarCasesCommand}"
                                    Style="{StaticResource PrimaryButton}"
                                    Padding="12,4"
                                    Margin="0,0,8,0"/>
                            <Button Content="ì‚¬ë¡€ ì ìš©" 
                                    Command="{Binding ApplyRecommendedCaseCommand}"
                                    Style="{StaticResource SecondaryButton}"
                                    Padding="12,4"/>
                        </StackPanel>
                        
                        <!-- ì¶”ì²œ ê²°ê³¼ í…Œì´ë¸” -->
                        <DataGrid ItemsSource="{Binding RecommendedCases}"
                                  SelectedItem="{Binding SelectedRecommendCase, Mode=TwoWay}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="All"
                                  BorderThickness="1"
                                  BorderBrush="{StaticResource BlueGray200Brush}"
                                  MaxHeight="200"
                                  FontSize="{StaticResource FontSizeSmall}"
                                  SelectionMode="Single">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ì‚¬ê±´ë²ˆí˜¸" Binding="{Binding CaseNo}" Width="100" IsReadOnly="True"/>
                                <DataGridTextColumn Header="ë‚™ì°°ì¼" Binding="{Binding AuctionDate, StringFormat=yyyy-MM-dd}" Width="80" IsReadOnly="True"/>
                                <DataGridTextColumn Header="ìš©ë„" Binding="{Binding Usage}" Width="60" IsReadOnly="True"/>
                                <DataGridTextColumn Header="ê°ì •ê°€" Binding="{Binding AppraisalPrice, StringFormat=N0}" Width="90" IsReadOnly="True"/>
                                <DataGridTextColumn Header="ë‚™ì°°ê°€" Binding="{Binding WinningPrice, StringFormat=N0}" Width="90" IsReadOnly="True"/>
                                <DataGridTextColumn Header="ë‚™ì°°ìœ¨" Binding="{Binding WinningRateDisplay}" Width="55" IsReadOnly="True"/>
                                <DataGridTextColumn Header="ê±°ë¦¬" Binding="{Binding DistanceDisplay}" Width="55" IsReadOnly="True"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>

                <!-- ì‚¬ë¡€í‰ê°€ ê·¸ë¦¬ë“œ -->
                <Border Style="{StaticResource CardBorder}" Padding="16">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ðŸ“‹ ì‚¬ë¡€í‰ê°€" Style="{StaticResource SectionHeader}" Margin="0"/>
                                <TextBlock Text="(ì§ì ‘ ìž…ë ¥ ê°€ëŠ¥)" 
                                           Style="{StaticResource LabelText}"
                                           FontSize="{StaticResource FontSizeSmall}"
                                           Opacity="0.7"
                                           Margin="8,0,0,0"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <Button Content="ì´ˆê¸°í™”" 
                                        Command="{Binding ClearCaseEvaluationCommand}"
                                        Style="{StaticResource SecondaryButton}"
                                        Padding="12,4"
                                        Margin="0,0,8,0"/>
                                <Button Content="ê²½ë§¤ì‚¬ê±´ê²€ìƒ‰" 
                                        Command="{Binding SearchAuctionCaseCommand}"
                                        Style="{StaticResource SecondaryButton}"
                                        Padding="12,4"/>
                            </StackPanel>
                        </Grid>
                        
                        <!-- ì‚¬ë¡€í‰ê°€ í…Œì´ë¸” -->
                        <DataGrid ItemsSource="{Binding CaseItems}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="All"
                                  BorderThickness="1"
                                  BorderBrush="{StaticResource BlueGray200Brush}"
                                  MaxHeight="400"
                                  FontSize="{StaticResource FontSizeBody}"
                                  SelectionUnit="Cell">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="êµ¬ë¶„" Binding="{Binding Label}" Width="100" IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Background" Value="{StaticResource BlueGray50Brush}"/>
                                            <Setter Property="Padding" Value="8,4"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="ë³¸ê±´ ê°ì •ê°€" Binding="{Binding BaseValue, Mode=TwoWay}" Width="100"/>
                                <DataGridTextColumn Header="ì‚¬ë¡€1" Binding="{Binding Case1Value, Mode=TwoWay}" Width="100"/>
                                <DataGridTextColumn Header="ì‚¬ë¡€2" Binding="{Binding Case2Value, Mode=TwoWay}" Width="100"/>
                                <DataGridTextColumn Header="ì‚¬ë¡€3" Binding="{Binding Case3Value, Mode=TwoWay}" Width="100"/>
                                <DataGridTextColumn Header="ì‚¬ë¡€4" Binding="{Binding Case4Value, Mode=TwoWay}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- ìš°ì¸¡: ì‚¬ë¡€ ë¡œë“œë·° + ê²½ë§¤ì‚¬ê±´ê²€ìƒ‰ + ë‚™ì°°í†µê³„ -->
        <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- ì‚¬ë¡€ ë¡œë“œë·° ì˜ì—­ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="ðŸ  ì‚¬ë¡€ ë¡œë“œë·°" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- ì‚¬ë¡€1 ë¡œë“œë·° -->
                            <Border Grid.Row="0" Grid.Column="0" Background="{StaticResource BlueGray100Brush}" CornerRadius="4" Height="100">
                                <TextBlock Text="ì‚¬ë¡€1" Style="{StaticResource LabelText}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <!-- ì‚¬ë¡€2 ë¡œë“œë·° -->
                            <Border Grid.Row="0" Grid.Column="2" Background="{StaticResource BlueGray100Brush}" CornerRadius="4" Height="100">
                                <TextBlock Text="ì‚¬ë¡€2" Style="{StaticResource LabelText}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <!-- ì‚¬ë¡€3 ë¡œë“œë·° -->
                            <Border Grid.Row="2" Grid.Column="0" Background="{StaticResource BlueGray100Brush}" CornerRadius="4" Height="100">
                                <TextBlock Text="ì‚¬ë¡€3" Style="{StaticResource LabelText}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <!-- ì‚¬ë¡€4 ë¡œë“œë·° -->
                            <Border Grid.Row="2" Grid.Column="2" Background="{StaticResource BlueGray100Brush}" CornerRadius="4" Height="100">
                                <TextBlock Text="ì‚¬ë¡€4" Style="{StaticResource LabelText}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- ê²½ë§¤ì‚¬ê±´ê²€ìƒ‰ ì˜ì—­ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="ðŸ” ê²½ë§¤ì‚¬ê±´ê²€ìƒ‰" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- ì‚¬ë¡€1 ê²½ë§¤ì •ë³´ -->
                            <Border Grid.Column="0" Background="{StaticResource BlueGray50Brush}" CornerRadius="4" Padding="12">
                                <StackPanel>
                                    <TextBlock Text="ì‚¬ë¡€1" FontWeight="Bold" Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding Case1AuctionInfo}" Style="{StaticResource BodyTextStyle}" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Border>
                            <!-- ì‚¬ë¡€2 ê²½ë§¤ì •ë³´ -->
                            <Border Grid.Column="2" Background="{StaticResource BlueGray50Brush}" CornerRadius="4" Padding="12">
                                <StackPanel>
                                    <TextBlock Text="ì‚¬ë¡€2" FontWeight="Bold" Margin="0,0,0,8"/>
                                    <TextBlock Text="{Binding Case2AuctionInfo}" Style="{StaticResource BodyTextStyle}" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- ë‚™ì°°í†µê³„ ì˜ì—­ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <TextBlock Text="ðŸ“ˆ ë‚™ì°°í†µê³„" Style="{StaticResource SectionHeader}" Margin="0"/>
                            <TextBlock Text="ì ìš©ë‚™ì°°ê°€ìœ¨" 
                                       HorizontalAlignment="Right"
                                       FontSize="{StaticResource FontSizeH4}"
                                       FontWeight="Bold"
                                       Foreground="{StaticResource PrimaryBrush}"/>
                        </Grid>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- í—¤ë” í–‰ -->
                            <Border Grid.Row="0" Grid.Column="0" Background="{StaticResource BlueGray100Brush}" Padding="8,6" Margin="0,0,1,1">
                                <TextBlock Text="ì§€ì—­í†µê³„" Style="{StaticResource LabelText}" FontWeight="SemiBold"/>
                            </Border>
                            <Border Grid.Row="0" Grid.Column="1" Background="{StaticResource BlueGray100Brush}" Padding="8,6" Margin="0,0,1,1">
                                <TextBlock Text="{Binding RegionName1}" Style="{StaticResource ValueText}" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="0" Grid.Column="2" Background="{StaticResource BlueGray100Brush}" Padding="8,6" Margin="0,0,1,1">
                                <TextBlock Text="{Binding RegionName2}" Style="{StaticResource ValueText}" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="0" Grid.Column="3" Background="{StaticResource BlueGray100Brush}" Padding="8,6" Margin="0,0,0,1">
                                <TextBlock Text="{Binding RegionName3}" Style="{StaticResource ValueText}" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            </Border>

                            <!-- 1ë…„ í‰ê·  -->
                            <Border Grid.Row="1" Grid.Column="0" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="1,0,1,1" Padding="8,6">
                                <TextBlock Text="1ë…„ í‰ê· " Style="{StaticResource LabelText}"/>
                            </Border>
                            <Border Grid.Row="1" Grid.Column="1" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats1Year_Display1}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="1" Grid.Column="2" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats1Year_Display2}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="1" Grid.Column="3" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats1Year_Display3}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>

                            <!-- 6ê°œì›” í‰ê·  -->
                            <Border Grid.Row="2" Grid.Column="0" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="1,0,1,1" Padding="8,6">
                                <TextBlock Text="6ê°œì›” í‰ê· " Style="{StaticResource LabelText}"/>
                            </Border>
                            <Border Grid.Row="2" Grid.Column="1" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats6Month_Display1}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="2" Grid.Column="2" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats6Month_Display2}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="2" Grid.Column="3" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats6Month_Display3}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>

                            <!-- 3ê°œì›” í‰ê·  -->
                            <Border Grid.Row="3" Grid.Column="0" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="1,0,1,1" Padding="8,6">
                                <TextBlock Text="3ê°œì›” í‰ê· " Style="{StaticResource LabelText}"/>
                            </Border>
                            <Border Grid.Row="3" Grid.Column="1" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats3Month_Display1}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="3" Grid.Column="2" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats3Month_Display2}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="3" Grid.Column="3" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats3Month_Display3}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>

                            <!-- ì ìš© ë‚™ì°°ê°€ìœ¨ -->
                            <Border Grid.Row="0" Grid.RowSpan="4" Grid.Column="4"
                                    Background="{StaticResource PrimaryBrush}"
                                    CornerRadius="8"
                                    Padding="20,12"
                                    Margin="12,0,0,0"
                                    VerticalAlignment="Center">
                                <StackPanel>
                                    <TextBlock Text="{Binding AppliedBidRate, StringFormat={}{0:P1}}" 
                                               FontSize="{StaticResource FontSizeLarge}"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               HorizontalAlignment="Center"/>
                                    <TextBlock Text="{Binding AppliedBidRateDescription}" 
                                               FontSize="{StaticResource FontSizeSmall}"
                                               Foreground="White"
                                               Opacity="0.9"
                                               HorizontalAlignment="Center"
                                               TextWrapping="Wrap"
                                               MaxWidth="100"
                                               TextAlignment="Center"
                                               Margin="0,6,0,0"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- ë¶€ë™ì‚° íƒë¬¸ë‚´ì—­ -->
                <Border Style="{StaticResource CardBorder}" Padding="16">
                    <StackPanel>
                        <TextBlock Text="ðŸ“ž ë¶€ë™ì‚° íƒë¬¸ë‚´ì—­" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="ë¶€ë™ì‚°ëª…" Style="{StaticResource LabelText}" Margin="0,0,0,8"/>
                            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding InquiryRealEstateName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="ì—°ë½ì²˜" Style="{StaticResource LabelText}"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding InquiryPhone, UpdateSourceTrigger=PropertyChanged}"/>
                        </Grid>
                        <TextBox Text="{Binding InquiryContent, UpdateSourceTrigger=PropertyChanged}" 
                                 Margin="0,8,0,0"
                                 Height="60"
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"
                                 VerticalScrollBarVisibility="Auto"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
