<UserControl x:Class="NPLogic.Views.Evaluation.EvaluationFactoryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="900" d:DesignWidth="1400">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="16"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ì¢Œì¸¡: ê³µì‹œì§€ê°€ + ì§€ë²ˆë³„ í‰ê°€ + ê¸°ê³„ê¸°êµ¬ ëª©ë¡ -->
        <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- ê³µì‹œì§€ê°€ ì—°ë™ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <TextBlock Text="ðŸ“‹ ê³µì‹œì§€ê°€" Style="{StaticResource SectionHeader}" Margin="0"/>
                            <Button Content="ì¡°íšŒ" 
                                    Command="{Binding FetchOfficialLandPriceCommand}"
                                    Style="{StaticResource SecondaryButton}"
                                    Padding="12,4"
                                    HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,8,0">
                                <TextBlock Text="2023ë…„" Style="{StaticResource LabelText}" Margin="0,0,0,4"/>
                                <TextBox Text="{Binding OfficialLandPrice2023, StringFormat=N0, UpdateSourceTrigger=PropertyChanged}" 
                                         IsReadOnly="True"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1" Margin="0,0,8,0">
                                <TextBlock Text="2024ë…„" Style="{StaticResource LabelText}" Margin="0,0,0,4"/>
                                <TextBox Text="{Binding OfficialLandPrice2024, StringFormat=N0, UpdateSourceTrigger=PropertyChanged}" 
                                         IsReadOnly="True"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="2025ë…„" Style="{StaticResource LabelText}" Margin="0,0,0,4"/>
                                <TextBox Text="{Binding OfficialLandPrice2025, StringFormat=N0, UpdateSourceTrigger=PropertyChanged}" 
                                         IsReadOnly="True"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- ì§€ë²ˆë³„ í‰ê°€ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <TextBlock Text="ðŸ“ ì§€ë²ˆë³„ í‰ê°€" Style="{StaticResource SectionHeader}" Margin="0"/>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <Button Content="+ í† ì§€ ì¶”ê°€" 
                                        Command="{Binding AddLandParcelCommand}"
                                        CommandParameter="í† ì§€"
                                        Style="{StaticResource SecondaryButton}"
                                        Padding="12,4"
                                        Margin="0,0,8,0"/>
                                <Button Content="+ ê±´ë¬¼ ì¶”ê°€" 
                                        Command="{Binding AddLandParcelCommand}"
                                        CommandParameter="ê±´ë¬¼"
                                        Style="{StaticResource SecondaryButton}"
                                        Padding="12,4"/>
                            </StackPanel>
                        </Grid>

                        <!-- í† ì§€ í‰ê°€ í…Œì´ë¸” -->
                        <TextBlock Text="í† ì§€" Style="{StaticResource LabelText}" FontWeight="Bold" Margin="0,0,0,8"/>
                        <DataGrid ItemsSource="{Binding LandParcels}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="All"
                                  BorderThickness="1"
                                  BorderBrush="{StaticResource BlueGray200Brush}"
                                  MaxHeight="180"
                                  FontSize="{StaticResource FontSizeSmall}"
                                  Margin="0,0,0,16">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ì§€ë²ˆë²ˆí˜¸" Binding="{Binding ParcelNumber}" Width="80"/>
                                <DataGridTextColumn Header="ì§€ë²ˆì£¼ì†Œ" Binding="{Binding Address}" Width="*"/>
                                <DataGridTextColumn Header="ë©´ì (í‰)" Binding="{Binding AreaPyeong, StringFormat=N2}" Width="70"/>
                                <DataGridTextColumn Header="í‰ë‹¹ê°ì •ê°€" Binding="{Binding UnitAppraisal, StringFormat=N0}" Width="80"/>
                                <DataGridTextColumn Header="ê°ì •ê°€" Binding="{Binding AppraisalValue, StringFormat=N0}" Width="100"/>
                                <DataGridTextColumn Header="1ì•ˆ í‰ë‹¨ê°€" Binding="{Binding Scenario1UnitPrice, StringFormat=N0}" Width="80"/>
                                <DataGridTextColumn Header="1ì•ˆ í‰ê°€ì•¡" Binding="{Binding Scenario1Value, StringFormat=N0}" Width="100"/>
                                <DataGridTextColumn Header="2ì•ˆ í‰ë‹¨ê°€" Binding="{Binding Scenario2UnitPrice, StringFormat=N0}" Width="80"/>
                                <DataGridTextColumn Header="2ì•ˆ í‰ê°€ì•¡" Binding="{Binding Scenario2Value, StringFormat=N0}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <!-- ê±´ë¬¼ í‰ê°€ í…Œì´ë¸” -->
                        <TextBlock Text="ê±´ë¬¼" Style="{StaticResource LabelText}" FontWeight="Bold" Margin="0,0,0,8"/>
                        <DataGrid ItemsSource="{Binding BuildingParcels}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="All"
                                  BorderThickness="1"
                                  BorderBrush="{StaticResource BlueGray200Brush}"
                                  MaxHeight="180"
                                  FontSize="{StaticResource FontSizeSmall}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ì§€ë²ˆë²ˆí˜¸" Binding="{Binding ParcelNumber}" Width="80"/>
                                <DataGridTextColumn Header="ì§€ë²ˆì£¼ì†Œ" Binding="{Binding Address}" Width="*"/>
                                <DataGridTextColumn Header="ë©´ì (í‰)" Binding="{Binding AreaPyeong, StringFormat=N2}" Width="70"/>
                                <DataGridTextColumn Header="í‰ë‹¹ê°ì •ê°€" Binding="{Binding UnitAppraisal, StringFormat=N0}" Width="80"/>
                                <DataGridTextColumn Header="ê°ì •ê°€" Binding="{Binding AppraisalValue, StringFormat=N0}" Width="100"/>
                                <DataGridTextColumn Header="1ì•ˆ í‰ë‹¨ê°€" Binding="{Binding Scenario1UnitPrice, StringFormat=N0}" Width="80"/>
                                <DataGridTextColumn Header="1ì•ˆ í‰ê°€ì•¡" Binding="{Binding Scenario1Value, StringFormat=N0}" Width="100"/>
                                <DataGridTextColumn Header="2ì•ˆ í‰ë‹¨ê°€" Binding="{Binding Scenario2UnitPrice, StringFormat=N0}" Width="80"/>
                                <DataGridTextColumn Header="2ì•ˆ í‰ê°€ì•¡" Binding="{Binding Scenario2Value, StringFormat=N0}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <!-- ì§€ë²ˆë³„ í‰ê°€ í•©ê³„ -->
                        <Border Background="{StaticResource BlueGray50Brush}" CornerRadius="4" Padding="12" Margin="0,12,0,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="í† ì§€+ê±´ë¬¼ ê°ì •ê°€ í•©ê³„" Style="{StaticResource LabelText}" FontSize="{StaticResource FontSizeSmall}"/>
                                    <TextBlock Text="{Binding TotalLandBuildingAppraisal, StringFormat=\{0:N0\}}"
                                               Style="{StaticResource ValueText}" FontWeight="Bold"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="1ì•ˆ í‰ê°€ì•¡ í•©ê³„" Style="{StaticResource LabelText}" FontSize="{StaticResource FontSizeSmall}"/>
                                    <TextBlock Text="{Binding TotalScenario1Value, StringFormat=\{0:N0\}}"
                                               Style="{StaticResource ValueText}" FontWeight="Bold"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="2ì•ˆ í‰ê°€ì•¡ í•©ê³„" Style="{StaticResource LabelText}" FontSize="{StaticResource FontSizeSmall}"/>
                                    <TextBlock Text="{Binding TotalScenario2Value, StringFormat=\{0:N0\}}"
                                               Style="{StaticResource ValueText}" FontWeight="Bold"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- ê¸°ê³„ê¸°êµ¬ ëª©ë¡ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="âš™ï¸ ê¸°ê³„ê¸°êµ¬ ëª©ë¡" Style="{StaticResource SectionHeader}" Margin="0"/>
                                <Border Background="{StaticResource WarningBrush}" 
                                        CornerRadius="4" 
                                        Padding="8,2" 
                                        Margin="12,0,0,0"
                                        VerticalAlignment="Center">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ê¸°ê³„ì¸ì •ìœ¨:" Foreground="White" FontSize="{StaticResource FontSizeSmall}"/>
                                        <TextBlock Text="{Binding MachineryRecognitionRate, StringFormat={}{0:P0}}"
                                                   Foreground="White" FontSize="{StaticResource FontSizeSmall}" FontWeight="Bold" Margin="4,0,0,0"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <Button Content="+ ì¶”ê°€" 
                                        Command="{Binding AddMachineryCommand}"
                                        Style="{StaticResource SecondaryButton}"
                                        Padding="12,4"
                                        Margin="0,0,8,0"/>
                                <Button Content="ì‚­ì œ" 
                                        Command="{Binding DeleteMachineryCommand}"
                                        Style="{StaticResource SecondaryButton}"
                                        Padding="12,4"/>
                            </StackPanel>
                        </Grid>

                        <DataGrid ItemsSource="{Binding MachineryList}"
                                  SelectedItem="{Binding SelectedMachinery, Mode=TwoWay}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="All"
                                  BorderThickness="1"
                                  BorderBrush="{StaticResource BlueGray200Brush}"
                                  MaxHeight="250"
                                  FontSize="{StaticResource FontSizeSmall}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ë²ˆí˜¸" Binding="{Binding ItemNumber}" Width="50" IsReadOnly="True"/>
                                <DataGridTextColumn Header="ê¸°ê³„ê¸°êµ¬ëª…" Binding="{Binding MachineryName}" Width="*"/>
                                <DataGridTextColumn Header="ì œì¡°ì‚¬" Binding="{Binding Manufacturer}" Width="100"/>
                                <DataGridTextColumn Header="ì œìž‘ì¼ìž" Binding="{Binding ManufactureDate, StringFormat=yyyy-MM-dd}" Width="80"/>
                                <DataGridTextColumn Header="ìˆ˜ëŸ‰" Binding="{Binding Quantity}" Width="50"/>
                                <DataGridTextColumn Header="ë‹¨ê°€" Binding="{Binding UnitPrice, StringFormat=N0}" Width="100"/>
                                <DataGridTextColumn Header="ê°ì •ê°€" Binding="{Binding AppraisalValue, StringFormat=N0}" Width="100"/>
                                <DataGridCheckBoxColumn Header="ê³µìž¥1" Binding="{Binding FactoryMortgage1}" Width="50"/>
                                <DataGridCheckBoxColumn Header="ê³µìž¥2" Binding="{Binding FactoryMortgage2}" Width="50"/>
                                <DataGridCheckBoxColumn Header="ê³µìž¥3" Binding="{Binding FactoryMortgage3}" Width="50"/>
                                <DataGridCheckBoxColumn Header="ê³µìž¥4" Binding="{Binding FactoryMortgage4}" Width="50"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <!-- ê¸°ê³„ê¸°êµ¬ í•©ê³„ -->
                        <Border Background="{StaticResource BlueGray50Brush}" CornerRadius="4" Padding="12" Margin="0,12,0,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="ê¸°ê³„ ê°ì •ê°€ í•©ê³„" Style="{StaticResource LabelText}" FontSize="{StaticResource FontSizeSmall}"/>
                                    <TextBlock Text="{Binding TotalMachineryAppraisal, StringFormat=\{0:N0\}}"
                                               Style="{StaticResource ValueText}" FontWeight="Bold"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="ì¸ì • ê¸°ê³„ ê°ì •ê°€" Style="{StaticResource LabelText}" FontSize="{StaticResource FontSizeSmall}"/>
                                    <TextBlock Text="{Binding RecognizedMachineryValue, StringFormat=\{0:N0\}}"
                                               Style="{StaticResource ValueText}" FontWeight="Bold" Foreground="{StaticResource PrimaryBrush}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="ê¸°ê³„ í‰ê°€ì•¡ (ì¸ì •ìœ¨ ì ìš©)" Style="{StaticResource LabelText}" FontSize="{StaticResource FontSizeSmall}"/>
                                    <TextBlock Text="{Binding MachineryEvaluationValue, StringFormat=\{0:N0\}}"
                                               Style="{StaticResource ValueText}" FontWeight="Bold"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- ìš°ì¸¡: ì‚¬ë¡€ì§€ë„ + ë‚™ì°°í†µê³„ + ì‚¬ë¡€í‰ê°€ -->
        <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- ì‚¬ë¡€ì§€ë„ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <TextBlock Text="ðŸ—ºï¸ ì‚¬ë¡€ì§€ë„" Style="{StaticResource SectionHeader}" Margin="0"/>
                            <Button Content="ê°€ì ¸ì˜¤ê¸°" 
                                    Command="{Binding LoadCaseMapCommand}"
                                    Style="{StaticResource SecondaryButton}"
                                    Padding="12,4"
                                    HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <Border Background="{StaticResource BlueGray50Brush}" 
                                CornerRadius="4"
                                Height="180"
                                Cursor="Hand">
                            <TextBlock Text="ê³µìž¥/ì°½ê³  ê±°ëž˜ ì‚¬ë¡€ í‘œì‹œ"
                                       Style="{StaticResource BodyTextStyle}"
                                       Opacity="0.6"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- ë‚™ì°°í†µê³„ -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <TextBlock Text="ðŸ“ˆ ë‚™ì°°í†µê³„" Style="{StaticResource SectionHeader}" Margin="0"/>
                            <TextBlock Text="ì ìš©ë‚™ì°°ê°€ìœ¨"
                                       HorizontalAlignment="Right"
                                       FontSize="{StaticResource FontSizeH4}"
                                       FontWeight="Bold"
                                       Foreground="{StaticResource PrimaryBrush}"/>
                        </Grid>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" Grid.Column="0" Background="{StaticResource BlueGray100Brush}" Padding="8,6" Margin="0,0,1,1">
                                <TextBlock Text="ì§€ì—­í†µê³„" Style="{StaticResource LabelText}" FontWeight="SemiBold"/>
                            </Border>
                            <Border Grid.Row="0" Grid.Column="1" Background="{StaticResource BlueGray100Brush}" Padding="8,6" Margin="0,0,1,1">
                                <TextBlock Text="{Binding RegionName1}" Style="{StaticResource ValueText}" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="0" Grid.Column="2" Background="{StaticResource BlueGray100Brush}" Padding="8,6" Margin="0,0,1,1">
                                <TextBlock Text="{Binding RegionName2}" Style="{StaticResource ValueText}" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="0" Grid.Column="3" Background="{StaticResource BlueGray100Brush}" Padding="8,6" Margin="0,0,0,1">
                                <TextBlock Text="{Binding RegionName3}" Style="{StaticResource ValueText}" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            </Border>

                            <Border Grid.Row="1" Grid.Column="0" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="1,0,1,1" Padding="8,6">
                                <TextBlock Text="1ë…„ í‰ê· " Style="{StaticResource LabelText}"/>
                            </Border>
                            <Border Grid.Row="1" Grid.Column="1" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats1Year_Display1}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="1" Grid.Column="2" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats1Year_Display2}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="1" Grid.Column="3" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats1Year_Display3}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>

                            <Border Grid.Row="2" Grid.Column="0" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="1,0,1,1" Padding="8,6">
                                <TextBlock Text="6ê°œì›” í‰ê· " Style="{StaticResource LabelText}"/>
                            </Border>
                            <Border Grid.Row="2" Grid.Column="1" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats6Month_Display1}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="2" Grid.Column="2" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats6Month_Display2}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="2" Grid.Column="3" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats6Month_Display3}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>

                            <Border Grid.Row="3" Grid.Column="0" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="1,0,1,1" Padding="8,6">
                                <TextBlock Text="3ê°œì›” í‰ê· " Style="{StaticResource LabelText}"/>
                            </Border>
                            <Border Grid.Row="3" Grid.Column="1" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats3Month_Display1}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="3" Grid.Column="2" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats3Month_Display2}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>
                            <Border Grid.Row="3" Grid.Column="3" BorderBrush="{StaticResource BlueGray200Brush}" BorderThickness="0,0,1,1" Padding="8,6">
                                <TextBlock Text="{Binding Stats3Month_Display3}" Style="{StaticResource ValueText}" HorizontalAlignment="Center"/>
                            </Border>

                            <Border Grid.Row="0" Grid.RowSpan="4" Grid.Column="4"
                                    Background="{StaticResource PrimaryBrush}"
                                    CornerRadius="8"
                                    Padding="20,12"
                                    Margin="12,0,0,0"
                                    VerticalAlignment="Center">
                                <StackPanel>
                                    <TextBlock Text="{Binding AppliedBidRate, StringFormat={}{0:P1}}"
                                               FontSize="{StaticResource FontSizeLarge}"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               HorizontalAlignment="Center"/>
                                    <TextBlock Text="{Binding AppliedBidRateDescription}"
                                               FontSize="{StaticResource FontSizeSmall}"
                                               Foreground="White"
                                               Opacity="0.9"
                                               HorizontalAlignment="Center"
                                               TextWrapping="Wrap"
                                               MaxWidth="100"
                                               TextAlignment="Center"
                                               Margin="0,6,0,0"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- ì‚¬ë¡€í‰ê°€ (ê³µìž¥/ì°½ê³ ìš©) -->
                <Border Style="{StaticResource CardBorder}" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <TextBlock Text="ðŸ“‹ ì‚¬ë¡€í‰ê°€" Style="{StaticResource SectionHeader}" Margin="0"/>
                            <Button Content="ê²½ë§¤ì‚¬ê±´ê²€ìƒ‰" 
                                    Command="{Binding SearchAuctionCaseCommand}"
                                    Style="{StaticResource SecondaryButton}"
                                    Padding="12,4"
                                    HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <DataGrid ItemsSource="{Binding CaseItems}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="All"
                                  BorderThickness="1"
                                  BorderBrush="{StaticResource BlueGray200Brush}"
                                  MaxHeight="300"
                                  FontSize="{StaticResource FontSizeSmall}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="êµ¬ë¶„" Binding="{Binding Label}" Width="100" IsReadOnly="True"/>
                                <DataGridTextColumn Header="ë³¸ê±´ ê°ì •ê°€" Binding="{Binding BaseValue, Mode=TwoWay}" Width="90"/>
                                <DataGridTextColumn Header="ì‚¬ë¡€1" Binding="{Binding Case1Value, Mode=TwoWay}" Width="90"/>
                                <DataGridTextColumn Header="ì‚¬ë¡€2" Binding="{Binding Case2Value, Mode=TwoWay}" Width="90"/>
                                <DataGridTextColumn Header="ì‚¬ë¡€3" Binding="{Binding Case3Value, Mode=TwoWay}" Width="90"/>
                                <DataGridTextColumn Header="ì‚¬ë¡€4" Binding="{Binding Case4Value, Mode=TwoWay}" Width="90"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>

                <!-- ë¶€ë™ì‚° íƒë¬¸ë‚´ì—­ -->
                <Border Style="{StaticResource CardBorder}" Padding="16">
                    <StackPanel>
                        <TextBlock Text="ðŸ“ž ë¶€ë™ì‚° íƒë¬¸ë‚´ì—­" Style="{StaticResource SectionHeader}" Margin="0,0,0,12"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="ë¶€ë™ì‚°ëª…" Style="{StaticResource LabelText}" Margin="0,0,0,8"/>
                            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding InquiryRealEstateName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="ì—°ë½ì²˜" Style="{StaticResource LabelText}"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding InquiryPhone, UpdateSourceTrigger=PropertyChanged}"/>
                        </Grid>
                        <TextBox Text="{Binding InquiryContent, UpdateSourceTrigger=PropertyChanged}" 
                                 Margin="0,8,0,0"
                                 Height="60"
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"
                                 VerticalScrollBarVisibility="Auto"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
