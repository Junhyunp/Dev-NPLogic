<UserControl x:Class="NPLogic.Views.NonCoreView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:NPLogic.Views"
             xmlns:vm="clr-namespace:NPLogic.ViewModels"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1400"
             d:DataContext="{d:DesignInstance Type=vm:NonCoreViewModel}"
             Loaded="NonCoreView_Loaded"
             Focusable="True"
             PreviewKeyDown="NonCoreView_PreviewKeyDown">
    
    <Grid>
        <!-- ë©”ì¸ ì˜ì—­ (ì°¨ì£¼ë¦¬ìŠ¤íŠ¸, ê¸°ëŠ¥íƒ­+ì»¨í…ì¸ , íˆ´ë°•ìŠ¤) -->
        <Grid>
            <Grid.ColumnDefinitions>
                <!-- ì°¨ì£¼ ë¦¬ìŠ¤íŠ¸ íŒ¨ë„ (ì¢Œì¸¡) - 3ë‹¨ê³„ ë„¤ë¹„ê²Œì´ì…˜ìœ¼ë¡œ ë” ì´ìƒ í•„ìš”ì—†ìŒ -->
                <ColumnDefinition Width="Auto"/>
                <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
                <ColumnDefinition Width="*"/>
                <!-- íˆ´ë°•ìŠ¤ ì‚¬ì´ë“œ íŒ¨ë„ -->
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
        
        <!-- ì¢Œì¸¡ ì°¨ì£¼ ë¦¬ìŠ¤íŠ¸ íŒ¨ë„ (ìˆ¨ê¹€ - 3ë‹¨ê³„ ë„¤ë¹„ê²Œì´ì…˜ ì ìš©) -->
        <Border Grid.Column="0"
                x:Name="BorrowerListPanel"
                Background="{StaticResource HeaderNavyBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,0,1,0"
                Visibility="Collapsed">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- ê²€ìƒ‰ í—¤ë” -->
                <Border Grid.Row="0" 
                        Background="{StaticResource HeaderNavyBrush}"
                        Padding="8,10">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="AccountGroup" 
                                                 Width="18" Height="18" 
                                                 Foreground="White"
                                                 VerticalAlignment="Center"
                                                 Margin="0,0,8,0"/>
                        <TextBlock Text="ì°¨ì£¼ ëª©ë¡"
                                   Foreground="White"
                                   FontWeight="SemiBold"
                                   FontSize="{StaticResource FontSizeH4}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
                
                <!-- ê²€ìƒ‰ ìž…ë ¥ -->
                <Border Grid.Row="1" 
                        Background="{StaticResource HeaderNavyBrush}"
                        Padding="8,4,8,8">
                    <TextBox x:Name="BorrowerSearchBox"
                             Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                             Padding="8,6"
                             FontSize="{StaticResource FontSizeSmall}"
                             materialDesign:HintAssist.Hint="ì°¨ì£¼ë²ˆí˜¸/ì´ë¦„ ê²€ìƒ‰"
                             KeyDown="BorrowerSearchBox_KeyDown"/>
                </Border>
                
                <!-- ì°¨ì£¼ ë¦¬ìŠ¤íŠ¸ -->
                <ListBox Grid.Row="2" 
                         x:Name="BorrowerListBox"
                         ItemsSource="{Binding BorrowerItems}"
                         SelectedItem="{Binding SelectedBorrower}"
                         Background="{StaticResource HeaderNavyBrush}"
                         BorderThickness="0"
                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                         SelectionChanged="BorrowerListBox_SelectionChanged">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Padding" Value="12,8"/>
                            <Setter Property="Cursor" Value="Hand"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                        <Border x:Name="ItemBorder"
                                                Background="Transparent"
                                                BorderBrush="Transparent"
                                                BorderThickness="4,0,0,1"
                                                Padding="{TemplateBinding Padding}">
                                            <ContentPresenter/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="ItemBorder" Property="Background" Value="{StaticResource DarkPanelHoverBrush}"/>
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter TargetName="ItemBorder" Property="Background" Value="{StaticResource PrimaryBrush}"/>
                                                <Setter TargetName="ItemBorder" Property="BorderBrush" Value="{StaticResource AccentOnDarkBrush}"/>
                                                <Setter TargetName="ItemBorder" Property="BorderThickness" Value="4,0,0,1"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ListBox.ItemContainerStyle>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <!-- ì°¨ì£¼ë²ˆí˜¸ + íšŒìƒ í‘œì‹œ -->
                                <TextBlock Grid.Row="0" 
                                           Text="{Binding DisplayNumber}"
                                           FontSize="{StaticResource FontSizeBody}"
                                           FontWeight="SemiBold"
                                           Foreground="White"
                                           TextTrimming="CharacterEllipsis"/>
                                
                                <!-- ì°¨ì£¼ëª… + ë¬¼ê±´ìˆ˜ -->
                                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,2,0,0">
                                    <TextBlock Text="{Binding BorrowerName}"
                                               FontSize="{StaticResource FontSizeSmall}"
                                               Foreground="{StaticResource TextOnDarkBrush}"
                                               TextTrimming="CharacterEllipsis"
                                               MaxWidth="100"/>
                                    <TextBlock Text=" | "
                                               FontSize="{StaticResource FontSizeSmall}"
                                               Foreground="{StaticResource TextOnDarkBrush}"/>
                                    <TextBlock FontSize="{StaticResource FontSizeSmall}"
                                               Foreground="{StaticResource TextOnDarkBrush}">
                                        <Run Text="{Binding PropertyCount, Mode=OneWay}"/>
                                        <Run Text="ê±´"/>
                                    </TextBlock>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                
                <!-- í•˜ë‹¨ ì •ë³´ -->
                <Border Grid.Row="3" 
                        Background="{StaticResource DarkPanelBrush}"
                        Padding="8">
                    <TextBlock FontSize="{StaticResource FontSizeSmall}" 
                               Foreground="{StaticResource TextOnDarkBrush}"
                               HorizontalAlignment="Center">
                        <Run Text="{Binding FilteredCount, Mode=OneWay}"/>
                        <Run Text=" / "/>
                        <Run Text="{Binding TotalCount, Mode=OneWay}"/>
                        <Run Text=" ì°¨ì£¼"/>
                    </TextBlock>
                </Border>
            </Grid>
        </Border>
        
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>  <!-- ê¸°ëŠ¥ íƒ­ ë°” + ë²„íŠ¼ -->
                <RowDefinition Height="*"/>     <!-- ì»¨í…ì¸  ì˜ì—­ -->
            </Grid.RowDefinitions>

            <!-- ê¸°ëŠ¥ íƒ­ ë°” + ë²„íŠ¼ ì˜ì—­ -->
            <Border Grid.Row="0" 
                    Background="White"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="0,0,0,1">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- ê¸°ëŠ¥ íƒ­ -->
                    <ScrollViewer Grid.Column="0"
                                  HorizontalScrollBarVisibility="Auto" 
                                  VerticalScrollBarVisibility="Disabled">
                        <StackPanel Orientation="Horizontal" Margin="16,0">
                        <!-- 1. ì „ì²´ -->
                        <RadioButton x:Name="TabHome"
                                     Content="ì „ì²´"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     IsChecked="True"
                                     Checked="FunctionTab_Checked"
                                     Tag="Home"/>
                        
                        <!-- 2. ì°¨ì£¼ê°œìš” -->
                        <RadioButton x:Name="TabBorrowerOverview"
                                     Content="ì°¨ì£¼ê°œìš”"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     Checked="FunctionTab_Checked"
                                     Tag="BorrowerOverview"/>
                        
                        <!-- 3. Loan -->
                        <RadioButton x:Name="TabLoan"
                                     Content="Loan"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     Checked="FunctionTab_Checked"
                                     Tag="Loan"/>
                        
                        <!-- 4. ë‹´ë³´ë¬¼ê±´ (ì§€ë„+ë‹´ë³´ì´ê´„ í¬í•¨) -->
                        <RadioButton x:Name="TabCollateralProperty"
                                     Content="ë‹´ë³´ë¬¼ê±´"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     Checked="FunctionTab_Checked"
                                     Tag="CollateralProperty"/>
                        
                        <!-- 5. ì„ ìˆœìœ„ -->
                        <RadioButton x:Name="TabSeniorRights"
                                     Content="ì„ ìˆœìœ„"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     Checked="FunctionTab_Checked"
                                     Tag="SeniorRights"/>
                        
                        <!-- 6. íšŒìƒê°œìš” (íšŒìƒì°¨ì£¼ì¸ ê²½ìš°ì—ë§Œ í‘œì‹œ) -->
                        <RadioButton x:Name="TabRestructuring"
                                     Content="íšŒìƒê°œìš”"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     Checked="FunctionTab_Checked"
                                     Tag="Restructuring"
                                     Visibility="{Binding IsRestructuringBorrower, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                        
                        <!-- 7. í‰ê°€ (ì¶”ì²œ ì‹œìŠ¤í…œ í¬í•¨) -->
                        <RadioButton x:Name="TabEvaluation"
                                     Content="í‰ê°€"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     Checked="FunctionTab_Checked"
                                     Tag="Evaluation"/>
                        
                        <!-- 8. ê²½(ê³µ)ë§¤ì¼ì • -->
                        <RadioButton x:Name="TabAuctionSchedule"
                                     Content="ê²½(ê³µ)ë§¤ì¼ì •"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     Checked="FunctionTab_Checked"
                                     Tag="AuctionSchedule"/>
                        
                        <!-- 9. ì¸í„°ë¦¼ (ê°€ì§€ê¸‰ê¸ˆ/íšŒìˆ˜ì •ë³´) -->
                        <RadioButton x:Name="TabInterim"
                                     Content="ì¸í„°ë¦¼"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     Checked="FunctionTab_Checked"
                                     Tag="Interim"/>
                        
                        <!-- S-002: í˜„ê¸ˆíë¦„, XNPV ë¹„êµëŠ” ìƒë‹¨ ë©”ë‰´ë¡œ ì´ë™ (Collapsed) -->
                        <!-- 9. í˜„ê¸ˆíë¦„ - ìƒë‹¨ ë©”ë‰´ë¡œ ì´ë™ -->
                        <RadioButton x:Name="TabCashFlow"
                                     Content="í˜„ê¸ˆíë¦„"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     Checked="FunctionTab_Checked"
                                     Tag="CashFlow"
                                     Visibility="Collapsed"/>
                        
                        <!-- 10. XNPV ë¹„êµ - ìƒë‹¨ ë©”ë‰´ë¡œ ì´ë™ -->
                        <RadioButton x:Name="TabXnpvComparison"
                                     Content="XNPV ë¹„êµ"
                                     Style="{StaticResource NonCoreTabStyle}"
                                     Checked="FunctionTab_Checked"
                                     Tag="XnpvComparison"
                                     Visibility="Collapsed"/>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- ë²„íŠ¼ ì˜ì—­ -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="8,0,16,0">
                        <!-- QA ë²„íŠ¼ -->
                        <Button Style="{StaticResource SecondaryButton}"
                                Padding="10,6"
                                FontSize="{StaticResource FontSizeBody}"
                                Margin="0,0,4,0"
                                ToolTip="QA ì§ˆë¬¸ ìž‘ì„±"
                                Click="QAButton_Click">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="CommentQuestion" 
                                                         Width="14" Height="14" 
                                                         VerticalAlignment="Center"
                                                         Foreground="{StaticResource MaterialOrangeBrush}"
                                                         Margin="0,0,4,0"/>
                                <TextBlock Text="QA" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        
                        <!-- ì¸ì‡„ ë²„íŠ¼ (ì°¨ì£¼ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸) -->
                        <Button Style="{StaticResource SecondaryButton}"
                                Padding="10,6"
                                FontSize="{StaticResource FontSizeBody}"
                                Margin="0,0,4,0"
                                ToolTip="ì¸ì‡„í•  ì°¨ì£¼ ì„ íƒ"
                                Click="PrintWithSelectionButton_Click">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Printer" 
                                                         Width="14" Height="14" 
                                                         VerticalAlignment="Center"
                                                         Margin="0,0,4,0"/>
                                <TextBlock Text="ì¸ì‡„" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        
                        <!-- Excel ë²„íŠ¼ (ì°¨ì£¼ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸) -->
                        <Button Style="{StaticResource SecondaryButton}"
                                Padding="10,6"
                                FontSize="{StaticResource FontSizeBody}"
                                Margin="0,0,4,0"
                                ToolTip="Excelë¡œ ë‚´ë³´ë‚¼ ì°¨ì£¼ ì„ íƒ"
                                Click="ExcelWithSelectionButton_Click">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="MicrosoftExcel" 
                                                         Width="14" Height="14" 
                                                         VerticalAlignment="Center"
                                                         Foreground="{StaticResource MaterialGreenDarkBrush}"
                                                         Margin="0,0,4,0"/>
                                <TextBlock Text="Excel" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        
                        <!-- View(ë¡¤ì—…) ë²„íŠ¼ -->
                        <Button Style="{StaticResource PrimaryButton}"
                                Padding="10,6"
                                FontSize="{StaticResource FontSizeBody}"
                                Click="RollupButton_Click"
                                ToolTip="ì „ì²´ í˜„í™© ì°½ ì—´ê¸° (View)">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Eye" 
                                                         Width="14" Height="14" 
                                                         VerticalAlignment="Center"
                                                         Margin="0,0,4,0"/>
                                <TextBlock Text="View" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ì»¨í…ì¸  ì˜ì—­ -->
            <ContentControl Grid.Row="1" x:Name="ContentArea"/>
        </Grid>
        
        <!-- íˆ´ë°•ìŠ¤ ì‚¬ì´ë“œ íŒ¨ë„ -->
        <Border Grid.Column="2" 
                x:Name="ToolBoxPanel"
                Width="300"
                Background="{StaticResource SurfaceColor}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1,0,0,0"
                Visibility="{Binding IsToolBoxVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- íˆ´ë°•ìŠ¤ í—¤ë” -->
                <Border Grid.Row="0" 
                        Background="{StaticResource BlueGray50Brush}"
                        Padding="12,8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" 
                                   Text="Tool Box" 
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>
                        
                        <Button Grid.Column="1"
                                Style="{StaticResource IconButton}"
                                Click="CloseToolBox_Click">
                            <materialDesign:PackIcon Kind="Close" Width="18" Height="18"/>
                        </Button>
                    </Grid>
                </Border>
                
                <!-- íˆ´ë°•ìŠ¤ ì»¨í…ì¸  -->
                <ScrollViewer Grid.Row="1" 
                              VerticalScrollBarVisibility="Auto"
                              Padding="12">
                    <StackPanel>
                        <!-- ë²•ì› ì •ë³´ -->
                        <Expander Header="ë²•ì› ì •ë³´" IsExpanded="True" Margin="0,0,0,8">
                            <StackPanel Margin="8">
                                <ComboBox ItemsSource="{Binding Courts}"
                                          SelectedItem="{Binding SelectedCourt}"
                                          DisplayMemberPath="CourtName"
                                          Margin="0,0,0,8"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,4,4">
                                        <TextBlock Text="1íšŒì°¨" FontSize="{StaticResource FontSizeSmall}" Opacity="0.6"/>
                                        <TextBlock Text="{Binding SelectedCourt.DiscountRate1, StringFormat=P0}" FontWeight="SemiBold"/>
                                    </StackPanel>
                                    <StackPanel Grid.Row="0" Grid.Column="1" Margin="4,0,0,4">
                                        <TextBlock Text="2íšŒì°¨" FontSize="{StaticResource FontSizeSmall}" Opacity="0.6"/>
                                        <TextBlock Text="{Binding SelectedCourt.DiscountRate2, StringFormat=P0}" FontWeight="SemiBold"/>
                                    </StackPanel>
                                    <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,4,4,0">
                                        <TextBlock Text="3íšŒì°¨" FontSize="{StaticResource FontSizeSmall}" Opacity="0.6"/>
                                        <TextBlock Text="{Binding SelectedCourt.DiscountRate3, StringFormat=P0}" FontWeight="SemiBold"/>
                                    </StackPanel>
                                    <StackPanel Grid.Row="1" Grid.Column="1" Margin="4,4,0,0">
                                        <TextBlock Text="4íšŒì°¨" FontSize="{StaticResource FontSizeSmall}" Opacity="0.6"/>
                                        <TextBlock Text="{Binding SelectedCourt.DiscountRate4, StringFormat=P0}" FontWeight="SemiBold"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Expander>
                        
                        <!-- ë¹ ë¥¸ ê³„ì‚° -->
                        <Expander Header="ë¹ ë¥¸ ê³„ì‚°" IsExpanded="False" Margin="0,0,0,8">
                            <StackPanel Margin="8">
                                <TextBlock Text="ê°ì •ê°€" FontSize="{StaticResource FontSizeSmall}" Opacity="0.6" Margin="0,0,0,4"/>
                                <TextBox x:Name="QuickCalcAppraisalValue" Margin="0,0,0,8" Padding="8,6"/>
                                
                                <TextBlock Text="ì €ê°ìœ¨" FontSize="{StaticResource FontSizeSmall}" Opacity="0.6" Margin="0,0,0,4"/>
                                <TextBox x:Name="QuickCalcDiscountRate" Text="20%" Margin="0,0,0,8" Padding="8,6"/>
                                
                                <Button Content="ê³„ì‚°" 
                                        Style="{StaticResource SecondaryButton}"
                                        Click="QuickCalculate_Click"
                                        Margin="0,0,0,8"/>
                                
                                <Border Background="{StaticResource BackgroundColor}" 
                                        CornerRadius="4" 
                                        Padding="8">
                                    <StackPanel>
                                        <TextBlock Text="ì˜ˆìƒ ë‚™ì°°ê°€" FontSize="{StaticResource FontSizeSmall}" Opacity="0.6"/>
                                        <TextBlock x:Name="QuickCalcResult" 
                                                   Text="-" 
                                                   FontWeight="Bold" 
                                                   FontSize="{StaticResource FontSizeH3}"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Expander>
                        
                        <!-- ìƒê¶Œ ë¶„ì„ (Phase 7.1) -->
                        <Expander Header="ðŸ“Š ìƒê¶Œ ë¶„ì„" IsExpanded="True" Margin="0,0,0,8">
                            <StackPanel Margin="8">
                                <TextBlock Text="ì„ íƒí•œ ë¬¼ê±´ ì£¼ë³€ì˜ ìƒê¶Œ ì •ë³´ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤."
                                           FontSize="{StaticResource FontSizeSmall}"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           TextWrapping="Wrap"
                                           Margin="0,0,0,8"/>
                                <Button Style="{StaticResource PrimaryButton}"
                                        Click="OpenCommercialMap_Click"
                                        Padding="12,8"
                                        HorizontalContentAlignment="Center">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="MapSearch" 
                                                                 Width="16" Height="16" 
                                                                 VerticalAlignment="Center"
                                                                 Margin="0,0,8,0"/>
                                        <TextBlock Text="ìƒê¶Œ ì§€ë„ ì—´ê¸°" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                                <TextBlock Text="â€» ìƒê°€/ì•„íŒŒíŠ¸í˜•ê³µìž¥ ë¬¼ê±´ì— ìœ ìš©í•©ë‹ˆë‹¤."
                                           FontSize="{StaticResource FontSizeTiny}"
                                           Foreground="{StaticResource TextTertiaryBrush}"
                                           Margin="0,8,0,0"/>
                            </StackPanel>
                        </Expander>
                        
                        <!-- ì°¸ì¡° ë§í¬ -->
                        <Expander Header="ì°¸ì¡° ë§í¬" IsExpanded="False" Margin="0,0,0,8">
                            <StackPanel Margin="8">
                                <Button Content="ëŒ€ë²•ì› ê²½ë§¤ì •ë³´" 
                                        Style="{StaticResource SecondaryButton}"
                                        Click="OpenCourtAuction_Click"
                                        Margin="0,0,0,4"
                                        HorizontalContentAlignment="Left"/>
                                <Button Content="ì˜¨ë¹„ë“œ ê³µë§¤" 
                                        Style="{StaticResource SecondaryButton}"
                                        Click="OpenOnbid_Click"
                                        Margin="0,0,0,4"
                                        HorizontalContentAlignment="Left"/>
                                <Button Content="KB ë¶€ë™ì‚°" 
                                        Style="{StaticResource SecondaryButton}"
                                        Click="OpenKBLand_Click"
                                        Margin="0,0,0,4"
                                        HorizontalContentAlignment="Left"/>
                                <Button Content="êµ­í† êµí†µë¶€ ì‹¤ê±°ëž˜ê°€" 
                                        Style="{StaticResource SecondaryButton}"
                                        Click="OpenRealTransaction_Click"
                                        HorizontalContentAlignment="Left"/>
                            </StackPanel>
                        </Expander>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>
        
        <!-- íˆ´ë°•ìŠ¤ ì—´ê¸° ë²„íŠ¼ (ìˆ¨ê²¨ì ¸ ìžˆì„ ë•Œ) -->
        <Button Grid.Column="2"
                Style="{StaticResource IconButton}"
                VerticalAlignment="Top"
                Margin="4,8"
                Click="OpenToolBox_Click"
                Visibility="{Binding IsToolBoxVisible, Converter={StaticResource InverseBooleanToVisibilityConverter}}">
            <materialDesign:PackIcon Kind="Toolbox" Width="20" Height="20"/>
        </Button>
        
        </Grid>
        
        <!-- ì „ì²´ í™”ë©´ ë¡œë”© ì˜¤ë²„ë ˆì´ -->
        <Border Background="{StaticResource OverlayBrush}" 
                Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="200"/>
                <TextBlock Text="ë¡œë”© ì¤‘..." Foreground="White" Margin="0,16,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>

