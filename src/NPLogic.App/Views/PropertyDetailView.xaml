<UserControl x:Class="NPLogic.Views.PropertyDetailView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:NPLogic.Views"
             xmlns:vm="clr-namespace:NPLogic.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1400"
             d:DataContext="{d:DesignInstance Type=vm:PropertyDetailViewModel}"
             Loaded="PropertyDetailView_Loaded">
    
    <Grid Margin="32">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- í—¤ë” ì˜ì—­ -->
        <Grid Grid.Row="0" Margin="0,0,0,24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
            <Button Grid.Column="0"
                    Content="â† ëª©ë¡ìœ¼ë¡œ"
                    Command="{Binding GoBackCommand}"
                    Style="{StaticResource SecondaryButton}"
                    Padding="12,6"
                    FontSize="13"
                    Margin="0,0,16,0"/>

            <!-- ì œëª© -->
            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <TextBlock Text="ë¬¼ê±´ ìƒì„¸" 
                           Style="{StaticResource H2TextStyle}"
                           Margin="0,0,0,4"/>
                <TextBlock Style="{StaticResource BodyTextStyle}"
                           Opacity="0.7">
                    <Run Text="ë¬¼ê±´ë²ˆí˜¸:"/>
                    <Run Text="{Binding Property.PropertyNumber}" FontWeight="SemiBold"/>
                    <Run Text=" | "/>
                    <Run Text="{Binding Property.AddressFull}"/>
                </TextBlock>
            </StackPanel>

            <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ - í”¼ë“œë°± ë°˜ì˜: í¬ê¸° ì¶•ì†Œ -->
            <StackPanel Grid.Column="2" Orientation="Horizontal">
                <Button Command="{Binding SaveCommand}"
                        Style="{StaticResource PrimaryButton}"
                        Padding="12,6"
                        Margin="0,0,8,0"
                        ToolTip="ë³€ê²½ì‚¬í•­ ì €ìž¥ (Ctrl+S)">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ’¾" FontSize="12" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBlock Text="ì €ìž¥" VerticalAlignment="Center" FontSize="12"/>
                    </StackPanel>
                </Button>
                <Button Command="{Binding RefreshCommand}"
                        Style="{StaticResource SecondaryButton}"
                        Padding="12,6"
                        ToolTip="ë°ì´í„°ë¥¼ ì„œë²„ì—ì„œ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤ (Ctrl+R)">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ”„" FontSize="12" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBlock Text="ìƒˆë¡œê³ ì¹¨" VerticalAlignment="Center" FontSize="12"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>

        <!-- íƒ­ ì»¨íŠ¸ë¡¤ -->
        <TabControl Grid.Row="1"
                    SelectedIndex="{Binding SelectedTabIndex}"
                    Background="Transparent"
                    BorderThickness="0"
                    ClipToBounds="True">
            
            <!-- íƒ­ ìŠ¤íƒ€ì¼ -->
            <TabControl.Resources>
                <Style TargetType="TabItem">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="TabItem">
                                <Border Name="Border" 
                                        Background="Transparent"
                                        BorderThickness="0,0,0,2"
                                        BorderBrush="Transparent"
                                        Padding="20,12"
                                        Margin="0,0,4,0">
                                    <ContentPresenter ContentSource="Header"
                                                     VerticalAlignment="Center"
                                                     HorizontalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                                        <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Border" Property="Background" Value="{StaticResource BlueGray50Brush}"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="FontSize" Value="14"/>
                    <Setter Property="FontWeight" Value="SemiBold"/>
                    <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                </Style>
            </TabControl.Resources>

            <!-- í”¼ë“œë°± ë°˜ì˜: íƒ­ êµ¬ì¡° ë³€ê²½ -->
            
            <!-- 1. ì „ì²´ íƒ­ -->
            <TabItem Header="ì „ì²´">
                <local:HomeTab DataContext="{Binding}"/>
            </TabItem>

            <!-- 2. ì°¨ì£¼ê°œìš” íƒ­ -->
            <TabItem Header="ì°¨ì£¼ê°œìš”">
                <local:BorrowerOverviewView DataContext="{Binding}"/>
            </TabItem>

            <!-- 3. Loan íƒ­ -->
            <TabItem Header="Loan">
                <local:LoanDetailView DataContext="{Binding}"/>
            </TabItem>

            <!-- 4. ë‹´ë³´ë¬¼ê±´ íƒ­ -->
            <TabItem Header="ë‹´ë³´ë¬¼ê±´">
                <local:BasicDataTab DataContext="{Binding}"/>
            </TabItem>

            <!-- 5. ì„ ìˆœìœ„ íƒ­ -->
            <TabItem Header="ì„ ìˆœìœ„">
                <local:SeniorRightsView DataContext="{Binding}"/>
            </TabItem>

            <!-- 6. í‰ê°€ íƒ­ -->
            <TabItem Header="í‰ê°€">
                <local:EvaluationTab DataContext="{Binding}"/>
            </TabItem>

            <!-- 7. ê²½(ê³µ)ë§¤ íƒ­ -->
            <TabItem Header="ê²½(ê³µ)ë§¤">
                <local:AuctionScheduleView DataContext="{Binding}"/>
            </TabItem>

            <!-- 8. í˜„ê¸ˆíë¦„ íƒ­ -->
            <TabItem Header="í˜„ê¸ˆíë¦„">
                <local:CashFlowSummaryView DataContext="{Binding}"/>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>

