<Window x:Class="NPLogic.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:viewmodels="clr-namespace:NPLogic.ViewModels"
        mc:Ignorable="d"
        Title="NPLogic - ë¡œê·¸ì¸"
        Height="700"
        Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource BackgroundBrush}"
        ResizeMode="CanResize"
        MinWidth="1000"
        MinHeight="600">

    <!-- í”¼ë“œë°± ë°˜ì˜: ë¡œê·¸ì¸ í™”ë©´ë„ ë‚¨ìƒ‰ í…Œë‘ë¦¬ë¡œ í†µì¼ (ë©”ì¸ í™”ë©´ê³¼ ì—°ê²°ì„±) -->
    <Border BorderBrush="{DynamicResource PrimaryBrush}" 
            BorderThickness="3"
            Background="{DynamicResource BackgroundBrush}">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ì™¼ìª½: ë¸Œëžœë”© ì˜ì—­ -->
        <Border Grid.Column="0" 
                Background="{DynamicResource PrimaryBrush}">
            <StackPanel VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Margin="40">
                
                <!-- ë¡œê³  -->
                <Image Source="/Assets/img/white-logo.png"
                       MaxHeight="400"
                       MaxWidth="500"
                       Stretch="Uniform"
                       HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- ì˜¤ë¥¸ìª½: ë¡œê·¸ì¸ í¼ -->
        <Border Grid.Column="1"
                Background="White"
                Padding="60,40,60,40">
            
            <Grid>
                <!-- ë¡œê·¸ì¸ í¼ -->
                <StackPanel x:Name="LoginPanel"
                            VerticalAlignment="Top"
                            Margin="0,20,0,0"
                            Visibility="{Binding IsPasswordResetMode, Converter={StaticResource InverseBooleanToVisibilityConverter}}">
                    
                    <!-- ì œëª© -->
                    <TextBlock Text="ë¡œê·¸ì¸"
                              FontSize="32"
                              FontWeight="Bold"
                              Foreground="{DynamicResource PrimaryBrush}"
                              Margin="0,0,0,8"/>
                    
                    <TextBlock Text="ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸í•˜ì„¸ìš”"
                              FontSize="14"
                              Foreground="#666"
                              Margin="0,0,0,25"/>

                    <!-- ì—ëŸ¬ ë©”ì‹œì§€ -->
                    <Border Background="#FFEBEE"
                            BorderBrush="#EF5350"
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="12"
                            Margin="0,0,0,20"
                            Visibility="{Binding ErrorMessage, Converter={StaticResource NullToVisibilityConverter}}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="AlertCircle"
                                                    Foreground="#EF5350"
                                                    Width="20"
                                                    Height="20"
                                                    VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding ErrorMessage}"
                                      Foreground="#C62828"
                                      FontSize="14"
                                      Margin="10,0,0,0"
                                      VerticalAlignment="Center"
                                      TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>

                    <!-- ì„±ê³µ ë©”ì‹œì§€ -->
                    <Border Background="#E8F5E9"
                            BorderBrush="#66BB6A"
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="12"
                            Margin="0,0,0,20"
                            Visibility="{Binding SuccessMessage, Converter={StaticResource NullToVisibilityConverter}}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="CheckCircle"
                                                    Foreground="#66BB6A"
                                                    Width="20"
                                                    Height="20"
                                                    VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding SuccessMessage}"
                                      Foreground="#2E7D32"
                                      FontSize="14"
                                      Margin="10,0,0,0"
                                      VerticalAlignment="Center"
                                      TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>

                    <!-- ì´ë©”ì¼ ìž…ë ¥ -->
                    <TextBox materialDesign:HintAssist.Hint="ì´ë©”ì¼"
                             Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                             Margin="0,0,0,15"
                             FontSize="16"
                             Height="60"
                             Padding="12,8"
                             VerticalContentAlignment="Center">
                        <TextBox.InputBindings>
                            <KeyBinding Key="Return" Command="{Binding SignInWithEmailCommand}"/>
                        </TextBox.InputBindings>
                    </TextBox>

                    <!-- ë¹„ë°€ë²ˆí˜¸ ìž…ë ¥ -->
                    <PasswordBox x:Name="PasswordBox"
                                materialDesign:HintAssist.Hint="ë¹„ë°€ë²ˆí˜¸"
                                Margin="0,0,0,10"
                                FontSize="16"
                                Height="60"
                                Padding="12,8"
                                VerticalContentAlignment="Center"
                                PasswordChanged="PasswordBox_PasswordChanged">
                        <PasswordBox.InputBindings>
                            <KeyBinding Key="Return" Command="{Binding SignInWithEmailCommand}"/>
                        </PasswordBox.InputBindings>
                    </PasswordBox>

                    <!-- ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ë§í¬ -->
                    <Button Content="ë¹„ë°€ë²ˆí˜¸ë¥¼ ìžŠìœ¼ì…¨ë‚˜ìš”?"
                            Command="{Binding ShowPasswordResetCommand}"
                            HorizontalAlignment="Right"
                            Margin="0,0,0,15"
                            Padding="0"
                            FontSize="13"
                            Foreground="{DynamicResource PrimaryBrush}"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <TextBlock Text="{TemplateBinding Content}" 
                                                       TextDecorations="Underline"
                                                       Foreground="{TemplateBinding Foreground}"/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Foreground" Value="#1565C0"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- ìžë™ ë¡œê·¸ì¸ -->
                    <CheckBox Content="ìžë™ ë¡œê·¸ì¸"
                             IsChecked="{Binding RememberMe}"
                             Margin="0,0,0,20"/>

                    <!-- ë¡œê·¸ì¸ ë²„íŠ¼ -->
                    <Button Command="{Binding SignInWithEmailCommand}"
                            IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}"
                            Height="50"
                            Margin="0,0,0,15"
                            Style="{StaticResource PrimaryButton}">
                        <TextBlock Text="ë¡œê·¸ì¸"
                                  FontSize="16"
                                  FontWeight="SemiBold"/>
                    </Button>

                    <!-- íšŒì›ê°€ìž… ì¶”ê°€ ì •ë³´ -->
                    <Expander Header="íšŒì›ê°€ìž… (ì‹ ê·œ ì‚¬ìš©ìž)" Margin="0,0,0,15">
                        <StackPanel Margin="0,10,0,0">
                            <!-- ì´ë¦„ -->
                            <TextBlock Text="ì´ë¦„" FontSize="13" Margin="0,0,0,5" Foreground="#666"/>
                            <TextBox Text="{Binding SignUpName, UpdateSourceTrigger=PropertyChanged}"
                                     Height="45"
                                     Padding="15,0"
                                     FontSize="14"
                                     VerticalContentAlignment="Center"
                                     Margin="0,0,0,10"/>
                            
                            <!-- ì—­í•  ì„ íƒ -->
                            <TextBlock Text="ì—­í• " FontSize="13" Margin="0,0,0,5" Foreground="#666"/>
                            <ComboBox SelectedValue="{Binding SelectedRole}"
                                      SelectedValuePath="Tag"
                                      Height="45"
                                      Padding="15,0"
                                      FontSize="14"
                                      VerticalContentAlignment="Center"
                                      Margin="0,0,0,15">
                                <ComboBoxItem Content="í‰ê°€ìž" Tag="evaluator"/>
                                <ComboBoxItem Content="PM" Tag="pm"/>
                                <ComboBoxItem Content="ê´€ë¦¬ìž" Tag="admin"/>
                            </ComboBox>
                            
                            <!-- íšŒì›ê°€ìž… ë²„íŠ¼ -->
                            <Button Command="{Binding SignUpCommand}"
                                    IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}"
                                    Height="45"
                                    Style="{StaticResource PrimaryButton}">
                                <TextBlock Text="íšŒì›ê°€ìž…"
                                          FontSize="14"
                                          FontWeight="SemiBold"/>
                            </Button>
                        </StackPanel>
                    </Expander>

                    <!-- ë¡œë”© í‘œì‹œ -->
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center"
                                Margin="0,20,0,0"
                                Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ProgressBar Value="0"
                                    IsIndeterminate="True"
                                    Width="24"
                                    Height="24"
                                    Margin="0,0,10,0"/>
                        <TextBlock Text="ë¡œê·¸ì¸ ì¤‘..."
                                  FontSize="14"
                                  Foreground="#666"
                                  VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- êµ¬ë¶„ì„  -->
                    <Separator Margin="0,30,0,20"/>

                    <!-- í‘¸í„° -->
                    <TextBlock Text="Â© 2025 NPLogic. All rights reserved."
                              FontSize="12"
                              Foreground="#999"
                              HorizontalAlignment="Center"
                              Margin="0,40,0,0"/>
                </StackPanel>

                <!-- ë¹„ë°€ë²ˆí˜¸ ìž¬ì„¤ì • í¼ -->
                <StackPanel x:Name="PasswordResetPanel"
                            VerticalAlignment="Top"
                            Margin="0,20,0,0"
                            Visibility="{Binding IsPasswordResetMode, Converter={StaticResource BooleanToVisibilityConverter}}">
                    
                    <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
                    <Button Command="{Binding HidePasswordResetCommand}"
                            HorizontalAlignment="Left"
                            Margin="0,0,0,20"
                            Padding="0"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ArrowLeft"
                                                    Width="20"
                                                    Height="20"
                                                    Foreground="#666"
                                                    VerticalAlignment="Center"/>
                            <TextBlock Text="ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°"
                                      FontSize="14"
                                      Foreground="#666"
                                      Margin="8,0,0,0"
                                      VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <!-- ì œëª© -->
                    <TextBlock Text="ë¹„ë°€ë²ˆí˜¸ ìž¬ì„¤ì •"
                              FontSize="32"
                              FontWeight="Bold"
                              Foreground="{DynamicResource PrimaryBrush}"
                              Margin="0,0,0,8"/>
                    
                    <TextBlock Text="ê°€ìž…í•œ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ìž…ë ¥í•˜ì‹œë©´&#x0a;ë¹„ë°€ë²ˆí˜¸ ìž¬ì„¤ì • ë§í¬ë¥¼ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤."
                              FontSize="14"
                              Foreground="#666"
                              Margin="0,0,0,25"
                              LineHeight="22"/>

                    <!-- ì—ëŸ¬ ë©”ì‹œì§€ -->
                    <Border Background="#FFEBEE"
                            BorderBrush="#EF5350"
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="12"
                            Margin="0,0,0,20"
                            Visibility="{Binding PasswordResetErrorMessage, Converter={StaticResource NullToVisibilityConverter}}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="AlertCircle"
                                                    Foreground="#EF5350"
                                                    Width="20"
                                                    Height="20"
                                                    VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding PasswordResetErrorMessage}"
                                      Foreground="#C62828"
                                      FontSize="14"
                                      Margin="10,0,0,0"
                                      VerticalAlignment="Center"
                                      TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>

                    <!-- ì„±ê³µ ë©”ì‹œì§€ -->
                    <Border Background="#E8F5E9"
                            BorderBrush="#66BB6A"
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="12"
                            Margin="0,0,0,20"
                            Visibility="{Binding PasswordResetSuccessMessage, Converter={StaticResource NullToVisibilityConverter}}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="CheckCircle"
                                                    Foreground="#66BB6A"
                                                    Width="20"
                                                    Height="20"
                                                    VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding PasswordResetSuccessMessage}"
                                      Foreground="#2E7D32"
                                      FontSize="14"
                                      Margin="10,0,0,0"
                                      VerticalAlignment="Center"
                                      TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>

                    <!-- ì´ë©”ì¼ ìž…ë ¥ -->
                    <TextBox materialDesign:HintAssist.Hint="ì´ë©”ì¼"
                             Text="{Binding PasswordResetEmail, UpdateSourceTrigger=PropertyChanged}"
                             Margin="0,0,0,20"
                             FontSize="16"
                             Height="60"
                             Padding="12,8"
                             VerticalContentAlignment="Center">
                        <TextBox.InputBindings>
                            <KeyBinding Key="Return" Command="{Binding SendPasswordResetEmailCommand}"/>
                        </TextBox.InputBindings>
                    </TextBox>

                    <!-- ë¹„ë°€ë²ˆí˜¸ ìž¬ì„¤ì • ë§í¬ ì „ì†¡ ë²„íŠ¼ -->
                    <Button Command="{Binding SendPasswordResetEmailCommand}"
                            IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}"
                            Height="50"
                            Style="{StaticResource PrimaryButton}">
                        <TextBlock Text="ìž¬ì„¤ì • ë§í¬ ë³´ë‚´ê¸°"
                                  FontSize="16"
                                  FontWeight="SemiBold"/>
                    </Button>

                    <!-- ë¡œë”© í‘œì‹œ -->
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center"
                                Margin="0,20,0,0"
                                Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ProgressBar Value="0"
                                    IsIndeterminate="True"
                                    Width="24"
                                    Height="24"
                                    Margin="0,0,10,0"/>
                        <TextBlock Text="ì „ì†¡ ì¤‘..."
                                  FontSize="14"
                                  Foreground="#666"
                                  VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- ì•ˆë‚´ ë¬¸êµ¬ -->
                    <Border Background="#E3F2FD"
                            CornerRadius="4"
                            Padding="16"
                            Margin="0,30,0,0">
                        <StackPanel>
                            <TextBlock Text="ðŸ“§ ì´ë©”ì¼ì„ ë°›ì§€ ëª»í•˜ì…¨ë‚˜ìš”?"
                                      FontSize="14"
                                      FontWeight="SemiBold"
                                      Foreground="#1565C0"
                                      Margin="0,0,0,8"/>
                            <TextBlock Text="â€¢ ìŠ¤íŒ¸ í´ë”ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”&#x0a;â€¢ ì´ë©”ì¼ ì£¼ì†Œê°€ ì •í™•í•œì§€ í™•ì¸í•´ì£¼ì„¸ìš”&#x0a;â€¢ ëª‡ ë¶„ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”"
                                      FontSize="13"
                                      Foreground="#1976D2"
                                      LineHeight="20"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
    </Border>
</Window>
