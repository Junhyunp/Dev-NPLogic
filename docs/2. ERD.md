# NPLogic ë°ì´í„°ë² ì´ìŠ¤ ERD (Entity Relationship Diagram)

> **ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-01-21  
> **ì´ í…Œì´ë¸” ìˆ˜**: 40ê°œ  
> **ë°ì´í„°ë² ì´ìŠ¤**: Supabase (PostgreSQL)

---

## ğŸ“‹ ëª©ì°¨

1. [ì „ì²´ í…Œì´ë¸” ìš”ì•½](#ì „ì²´-í…Œì´ë¸”-ìš”ì•½)
2. [í•µì‹¬ ERD - ë¬¼ê±´ ì¤‘ì‹¬](#í•µì‹¬-erd---ë¬¼ê±´-ì¤‘ì‹¬)
3. [ì‚¬ìš©ì ë° í”„ë¡œê·¸ë¨ ê´€ë¦¬](#1-ì‚¬ìš©ì-ë°-í”„ë¡œê·¸ë¨-ê´€ë¦¬)
4. [ë¬¼ê±´ ë° ì°¨ì£¼ ê´€ë¦¬](#2-ë¬¼ê±´-ë°-ì°¨ì£¼-ê´€ë¦¬)
5. [ë“±ê¸°ë¶€ë“±ë³¸ ê´€ë¦¬](#3-ë“±ê¸°ë¶€ë“±ë³¸-ê´€ë¦¬)
6. [ê¶Œë¦¬ë¶„ì„](#4-ê¶Œë¦¬ë¶„ì„)
7. [í‰ê°€ ì‹œìŠ¤í…œ](#5-í‰ê°€-ì‹œìŠ¤í…œ)
8. [ê²½ë§¤/ê³µë§¤ ê´€ë¦¬](#6-ê²½ë§¤ê³µë§¤-ê´€ë¦¬)
9. [QA ë° ì•Œë¦¼](#7-qa-ë°-ì•Œë¦¼)
10. [ê¸°ì¤€ì •ë³´ (ë§ˆìŠ¤í„° ë°ì´í„°)](#8-ê¸°ì¤€ì •ë³´-ë§ˆìŠ¤í„°-ë°ì´í„°)
11. [ì‹œìŠ¤í…œ ê´€ë¦¬](#9-ì‹œìŠ¤í…œ-ê´€ë¦¬)

---

## ì „ì²´ í…Œì´ë¸” ìš”ì•½

| ê·¸ë£¹ | í…Œì´ë¸”ëª… | ì„¤ëª… | ë ˆì½”ë“œ ìˆ˜ |
|------|----------|------|-----------|
| **ì‚¬ìš©ì** | `users` | ì‚¬ìš©ì ì •ë³´ (PM/í‰ê°€ì/ê´€ë¦¬ì) | 7 |
| **ì‚¬ìš©ì** | `programs` | í”„ë¡œê·¸ë¨(í”„ë¡œì íŠ¸) ì •ë³´ | 3 |
| **ì‚¬ìš©ì** | `program_users` | í”„ë¡œê·¸ë¨-ì‚¬ìš©ì ë§¤í•‘ | 1 |
| **ë¬¼ê±´** | `properties` | ë¬¼ê±´ ê¸°ë³¸ ì •ë³´ | 9,537 |
| **ë¬¼ê±´** | `borrowers` | ì°¨ì£¼ ì •ë³´ | 5,562 |
| **ë¬¼ê±´** | `loans` | ëŒ€ì¶œ ì •ë³´ | 21,092 |
| **ë“±ê¸°** | `registry_documents` | ë“±ê¸°ë¶€ë“±ë³¸ ë¬¸ì„œ | 0 |
| **ë“±ê¸°** | `registry_owners` | ë“±ê¸°ë¶€ ì†Œìœ ì | 6 |
| **ë“±ê¸°** | `registry_rights` | ë“±ê¸°ë¶€ ê¶Œë¦¬ (ê·¼ì €ë‹¹, ê°€ì••ë¥˜ ë“±) | 43 |
| **ë¶„ì„** | `right_analysis` | ê¶Œë¦¬ë¶„ì„ ê²°ê³¼ | 1,449 |
| **í‰ê°€** | `evaluations` | í‰ê°€ ì •ë³´ | 21 |
| **í‰ê°€** | `evaluation_cases` | í‰ê°€ ì‚¬ë¡€ (1~4) | 0 |
| **í‰ê°€** | `evaluation_land_parcels` | ì§€ë²ˆë³„ í‰ê°€ | 0 |
| **í‰ê°€** | `evaluation_machinery` | ê¸°ê³„ê¸°êµ¬ ëª©ë¡ | 0 |
| **í‰ê°€** | `evaluation_rental_analysis` | ì„ëŒ€ ë¶„ì„ | 0 |
| **í‰ê°€** | `evaluation_management_fees` | ì„ ìˆœìœ„ ê´€ë¦¬ë¹„ | 0 |
| **í‰ê°€** | `evaluation_commercial_data` | ìƒê¶Œì •ë³´/ì„ëŒ€ë™í–¥ | 0 |
| **ê²½ë§¤** | `auction_schedules` | ê²½ë§¤ ì¼ì • | 1 |
| **ê²½ë§¤** | `public_sale_schedules` | ê³µë§¤ ì¼ì • | 1 |
| **ê²½ë§¤** | `auction_cases` | ê²½ë§¤ ë‚™ì°° ì‚¬ë¡€ | 10 |
| **QA** | `property_qa` | ë¬¼ê±´ QA | 0 |
| **QA** | `qa_notifications` | QA ì•Œë¦¼ | 0 |
| **ì¸í„°ë¦¼** | `interim_advances` | ì¸í„°ë¦¼ ì„ ê¸‰ê¸ˆ | 0 |
| **ì¸í„°ë¦¼** | `interim_collections` | ì¸í„°ë¦¼ íšŒìˆ˜ | 0 |
| **ê¸°ì¤€** | `courts` | ë²•ì› ì •ë³´ | 3 |
| **ê¸°ì¤€** | `financial_institutions` | ê¸ˆìœµê¸°ê´€ | 0 |
| **ê¸°ì¤€** | `appraisal_firms` | ê°ì •í‰ê°€ë²•ì¸ | 0 |
| **ê¸°ì¤€** | `common_codes` | ê³µí†µì½”ë“œ | 17 |
| **ê¸°ì¤€** | `lease_standards` | ì„ëŒ€ì°¨ ê¸°ì¤€ | 3 |
| **ê¸°ì¤€** | `legal_application_rates` | ë²•ì  ì ìš© ë¹„ìœ¨ | 4 |
| **ê¸°ì¤€** | `auction_cost_standards` | ê²½ë§¤ë¹„ìš© ê¸°ì¤€ | 3 |
| **ê¸°ì¤€** | `public_sale_cost_standards` | ê³µë§¤ë¹„ìš© ê¸°ì¤€ | 0 |
| **ì‹œìŠ¤í…œ** | `settings` | ì‹œìŠ¤í…œ ì„¤ì • | 7 |
| **ì‹œìŠ¤í…œ** | `system_settings` | ì‹œìŠ¤í…œ ì„¤ì • (ì‹ ê·œ) | 0 |
| **ì‹œìŠ¤í…œ** | `calculation_formulas` | ê³„ì‚° ìˆ˜ì‹ | 0 |
| **ì‹œìŠ¤í…œ** | `audit_logs` | ì‘ì—… ì´ë ¥ | 0 |
| **ì‹œìŠ¤í…œ** | `data_disks` | ì—‘ì…€ ë°ì´í„° ë””ìŠ¤í¬ | 0 |
| **ì‹œìŠ¤í…œ** | `loan_info` | ëŒ€ì¶œ ì •ë³´ (êµ¬) | 0 |
| **ì‹œìŠ¤í…œ** | `borrower_restructuring` | ì°¨ì£¼ íšŒìƒ ì •ë³´ | 33 |
| **ì‹œìŠ¤í…œ** | `program_sheet_mappings` | í”„ë¡œê·¸ë¨ ì‹œíŠ¸ ë§¤í•‘ | 0 |

---

## í•µì‹¬ ERD - ë¬¼ê±´ ì¤‘ì‹¬

> ğŸ’¡ **í•µì‹¬ ê°œë…**: `properties`(ë¬¼ê±´) í…Œì´ë¸”ì´ ì‹œìŠ¤í…œì˜ ì¤‘ì‹¬ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ í…Œì´ë¸”ì´ ë¬¼ê±´ê³¼ ì—°ê²°ë©ë‹ˆë‹¤.

```mermaid
erDiagram
    programs ||--o{ properties : "í¬í•¨"
    programs ||--o{ program_users : "has"
    users ||--o{ program_users : "belongs_to"
    
    borrowers ||--o{ properties : "ì†Œìœ "
    borrowers ||--o{ loans : "has"
    
    properties ||--o| right_analysis : "ë¶„ì„ê²°ê³¼"
    properties ||--o| evaluations : "í‰ê°€"
    properties ||--o| auction_schedules : "ê²½ë§¤ì¼ì •"
    properties ||--o| public_sale_schedules : "ê³µë§¤ì¼ì •"
    properties ||--o{ registry_documents : "ë“±ê¸°ë¶€"
    properties ||--o{ property_qa : "QA"
    
    users ||--o{ properties : "assigned_to"
    users ||--o{ properties : "created_by"

    programs {
        uuid id PK
        varchar program_name
        varchar team
        varchar accounting_firm
        int borrower_count
        int property_count
        date cut_off_date
        varchar status
    }
    
    users {
        uuid id PK
        uuid auth_user_id FK
        varchar email UK
        varchar name
        varchar role "pm/evaluator/admin"
        varchar status
    }
    
    borrowers {
        uuid id PK
        varchar borrower_number
        varchar borrower_name
        varchar borrower_type
        int property_count
        numeric opb
        boolean is_restructuring
    }
    
    properties {
        uuid id PK
        uuid program_id FK
        uuid borrower_id FK
        uuid assigned_to FK
        varchar property_number
        varchar property_type
        text address_full
        numeric appraisal_value
        varchar status
    }
```

---

## 1. ì‚¬ìš©ì ë° í”„ë¡œê·¸ë¨ ê´€ë¦¬

> ì‚¬ìš©ì ì¸ì¦ ë° í”„ë¡œê·¸ë¨(í”„ë¡œì íŠ¸) ê´€ë¦¬ í…Œì´ë¸”

```mermaid
erDiagram
    auth_users ||--o| users : "ì—°ê²°"
    users ||--o{ program_users : "ì°¸ì—¬"
    programs ||--o{ program_users : "has"
    users ||--o{ programs : "created_by"
    
    users {
        uuid id PK "ìë™ìƒì„±"
        uuid auth_user_id FK "Supabase Auth ì—°ê²°"
        varchar email UK "ì´ë©”ì¼ (ê³ ìœ )"
        varchar name "ì´ë¦„"
        varchar role "ì—­í• : pm/evaluator/admin"
        varchar status "ìƒíƒœ: active/inactive"
        varchar team "ì†Œì† íŒ€"
        varchar position "ì§ì±…"
        varchar accounting_firm "ì†Œì† íšŒê³„ë²•ì¸"
        timestamptz created_at
        timestamptz updated_at
    }
    
    programs {
        uuid id PK
        varchar program_name "í”„ë¡œê·¸ë¨ëª…"
        varchar team "ë‹´ë‹¹ íŒ€"
        varchar accounting_firm "íšŒê³„ë²•ì¸"
        int borrower_count "ì°¨ì£¼ ìˆ˜"
        int property_count "ë¬¼ê±´ ìˆ˜"
        date cut_off_date "ì»·ì˜¤í”„ì¼"
        date bid_date "ì…ì°°ì¼"
        varchar status "active/inactive/completed"
        numeric irr "í• ì¸ìœ¨ ê¸°ë³¸ê°’ 0.15"
        numeric credit_guarantee_recovery_rate "ì‹ ìš©ë³´ì¦ì„œ íšŒìˆ˜ìœ¨ 0.80"
        int auction_first_lead_time_months "ê²½ë§¤ 1íšŒì°¨ ë¦¬ë“œíƒ€ì„"
        varchar agent_name "ì‚¬ìš©ì¸ëª…"
        varchar agent_grade "ë“±ê¸‰ A/B/C"
        uuid created_by FK
    }
    
    program_users {
        uuid id PK
        uuid program_id FK
        uuid user_id FK
        varchar role "pm/member"
        timestamptz created_at
    }
```

### ì—­í• (Role) ì„¤ëª…

| ì—­í•  | ì„¤ëª… | ì£¼ìš” ê¶Œí•œ |
|------|------|----------|
| `admin` | ê´€ë¦¬ì | ëª¨ë“  ë°ì´í„° ì¡°íšŒ/ìˆ˜ì •, ì‚¬ìš©ì ê´€ë¦¬ |
| `pm` | í”„ë¡œì íŠ¸ ë§¤ë‹ˆì € | ë‹´ë‹¹ í”„ë¡œê·¸ë¨ì˜ ëª¨ë“  ë¬¼ê±´ ì¡°íšŒ/ìˆ˜ì • |
| `evaluator` | í‰ê°€ì (íšŒê³„ì‚¬) | í• ë‹¹ëœ ë¬¼ê±´ë§Œ ì¡°íšŒ/ìˆ˜ì • |

---

## 2. ë¬¼ê±´ ë° ì°¨ì£¼ ê´€ë¦¬

> ë¬¼ê±´(ë‹´ë³´ë¬¼ê±´)ê³¼ ì°¨ì£¼, ëŒ€ì¶œ ì •ë³´ ê´€ë¦¬

```mermaid
erDiagram
    programs ||--o{ properties : "í¬í•¨"
    borrowers ||--o{ properties : "ì†Œìœ "
    borrowers ||--o{ loans : "ëŒ€ì¶œ"
    borrowers ||--o| borrower_restructuring : "íšŒìƒì •ë³´"
    users ||--o{ properties : "ë‹´ë‹¹ì"
    
    borrowers {
        uuid id PK
        varchar borrower_number "ì°¨ì£¼ë²ˆí˜¸ ì˜ˆ:R-003"
        varchar borrower_name "ì°¨ì£¼ëª…"
        varchar borrower_type "ê°œì¸/ê°œì¸ì‚¬ì—…ì/ë²•ì¸"
        varchar business_number "ì‚¬ì—…ìë²ˆí˜¸"
        int property_count "ë¬¼ê±´ìˆ˜"
        numeric opb "ëŒ€ì¶œì”ì•¡"
        numeric mortgage_amount "ê·¼ì €ë‹¹ì•¡"
        boolean is_restructuring "íšŒìƒì—¬ë¶€"
        boolean is_opened "ê²½ë§¤ê°œì‹œì—¬ë¶€"
        boolean is_deceased "ì‚¬ë§ì—¬ë¶€"
        numeric xnpv_scenario1 "ì‹œë‚˜ë¦¬ì˜¤1 XNPV"
        numeric xnpv_scenario2 "ì‹œë‚˜ë¦¬ì˜¤2 XNPV"
        varchar program_id "í”„ë¡œê·¸ë¨ID"
    }
    
    properties {
        uuid id PK
        uuid program_id FK "ì†Œì† í”„ë¡œê·¸ë¨"
        uuid borrower_id FK "ì°¨ì£¼"
        varchar property_number "ë¬¼ê±´ë²ˆí˜¸"
        varchar collateral_number "ë‹´ë³´ë²ˆí˜¸"
        varchar borrower_number "ì°¨ì£¼ë²ˆí˜¸"
        varchar debtor_name "ì°¨ì£¼ëª…"
        varchar property_type "ë¬¼ê±´ìœ í˜•"
        text address_full "ì „ì²´ì£¼ì†Œ"
        text address_road "ë„ë¡œëª…ì£¼ì†Œ"
        numeric land_area "í† ì§€ë©´ì (ã¡)"
        numeric building_area "ê±´ë¬¼ë©´ì (ã¡)"
        numeric supply_area "ê³µê¸‰ë©´ì "
        numeric appraisal_value "ê°ì •ê°€"
        numeric minimum_bid "ìµœì €ì…ì°°ê°€"
        numeric opb "ëŒ€ì¶œì”ì•¡"
        numeric latitude "ìœ„ë„"
        numeric longitude "ê²½ë„"
        varchar status "pending/processing/completed"
        varchar rights_analysis_status "ê¶Œë¦¬ë¶„ì„ìƒíƒœ"
        int rights_analysis_upload_count "ê¶Œë¦¬ë¶„ì„ ì—…ë¡œë“œ íšŒì°¨"
        boolean agreement_doc "ì•½ì •ì„œ ì œì¶œ"
        boolean guarantee_doc "ë³´ì¦ì„œ ì œì¶œ"
        boolean auction_docs "ê²½ë§¤ì—´ëŒìë£Œ í™•ë³´"
        boolean tenant_docs "ì „ì…ì„¸ëŒ€ì—´ëŒ ì™„ë£Œ"
        boolean senior_rights_review "ì„ ìˆœìœ„ê²€í†  ì™„ë£Œ"
        boolean appraisal_confirmed "í‰ê°€ì•¡í™•ì •"
        boolean interim_completed "ì¸í„°ë¦¼ì™„ë£Œ"
        boolean owner_move_in "ì†Œìœ ì£¼ì „ì…"
        date auction_schedule_date "ê²½ë§¤ì¼ì •"
        int qa_unanswered_count "ë¯¸íšŒì‹ QAìˆ˜"
        uuid assigned_to FK "ë‹´ë‹¹ì"
        uuid created_by FK "ìƒì„±ì"
    }
    
    loans {
        uuid id PK
        uuid borrower_id FK
        varchar account_serial "ê³„ì¢Œì¼ë ¨ë²ˆí˜¸"
        varchar loan_type "ëŒ€ì¶œìœ í˜•"
        varchar loan_category "ëŒ€ì¶œë¶„ë¥˜"
        varchar account_number "ê³„ì¢Œë²ˆí˜¸"
        numeric initial_loan_amount "ìµœì´ˆëŒ€ì¶œê¸ˆ"
        numeric loan_principal_balance "ëŒ€ì¶œì›ê¸ˆì”ì•¡"
        numeric advance_payment "ì„ ê¸‰ê¸ˆ"
        numeric accrued_interest "ë¯¸ìˆ˜ì´ì"
        numeric total_claim_amount "ì´ì±„ê¶Œì•¡"
        date initial_loan_date "ìµœì´ˆëŒ€ì¶œì¼"
        date last_interest_date "ìµœì¢…ì´ìì¼"
        numeric normal_interest_rate "ì •ìƒì´ììœ¨"
        numeric overdue_interest_rate "ì—°ì²´ì´ììœ¨"
        uuid collateral_1_id "ë‹´ë³´ë¬¼ê±´1"
        uuid collateral_2_id "ë‹´ë³´ë¬¼ê±´2"
        uuid collateral_3_id "ë‹´ë³´ë¬¼ê±´3"
        boolean has_agreement_doc "ì•½ì •ì„œìœ ë¬´"
        boolean has_valid_guarantee "ìœ íš¨ë³´ì¦ìœ ë¬´"
        numeric principal_offset "ì›ê¸ˆìƒê³„"
        numeric interest_offset "ì´ììƒê³„"
    }
    
    borrower_restructuring {
        uuid id PK
        uuid borrower_id FK UK
        varchar approval_status "ì¸ê°€/ë¯¸ì¸ê°€"
        varchar progress_stage "ì§„í–‰ë‹¨ê³„"
        varchar court_name "ê´€í• ë²•ì›"
        varchar case_number "íšŒìƒì‚¬ê±´ë²ˆí˜¸"
        date filing_date "íšŒìƒì‹ ì²­ì¼"
        date commencement_date "ê°œì‹œê²°ì •ì¼"
        date claim_filing_date "ì±„ê¶Œì‹ ê³ ì¼"
        date approval_dismissal_date "ì¸ê°€/íì§€ê²°ì •ì¼"
        varchar excluded_claim "íšŒìƒíƒˆë½ê¶Œ"
    }
```

---

## 3. ë“±ê¸°ë¶€ë“±ë³¸ ê´€ë¦¬

> OCRë¡œ ì¶”ì¶œí•œ ë“±ê¸°ë¶€ë“±ë³¸ ì •ë³´ ê´€ë¦¬

```mermaid
erDiagram
    properties ||--o{ registry_documents : "ë“±ê¸°ë¶€"
    registry_documents ||--o{ registry_owners : "ì†Œìœ ì"
    registry_documents ||--o{ registry_rights : "ê¶Œë¦¬"
    properties ||--o{ registry_owners : "direct"
    properties ||--o{ registry_rights : "direct"
    
    registry_documents {
        uuid id PK
        uuid property_id FK
        text file_path "Storage ê²½ë¡œ"
        varchar file_name "íŒŒì¼ëª…"
        bigint file_size "íŒŒì¼í¬ê¸°"
        varchar ocr_status "pending/processing/completed/failed"
        timestamptz ocr_processed_at "OCRì²˜ë¦¬ì‹œê°„"
        text ocr_error "OCRì—ëŸ¬ë©”ì‹œì§€"
        varchar registry_type "í† ì§€/ê±´ë¬¼"
        varchar registry_number "ë“±ê¸°ë²ˆí˜¸"
        jsonb extracted_data "OCRì¶”ì¶œë°ì´í„°"
    }
    
    registry_owners {
        uuid id PK
        uuid registry_document_id FK
        uuid property_id FK
        varchar owner_name "ì†Œìœ ìëª…"
        varchar owner_regno "ì£¼ë¯¼/ì‚¬ì—…ìë²ˆí˜¸"
        varchar share_ratio "ì§€ë¶„ë¹„ìœ¨ ì˜ˆ:1/2"
        date registration_date "ë“±ê¸°ì¼"
        text registration_cause "ë“±ê¸°ì›ì¸"
        text owner_address "ì†Œìœ ìì£¼ì†Œ"
    }
    
    registry_rights {
        uuid id PK
        uuid registry_document_id FK
        uuid property_id FK
        varchar right_type "ê·¼ì €ë‹¹/ê°€ì••ë¥˜/ê°€ë“±ê¸°/ì „ì„¸ê¶Œ ë“±"
        int right_order "ìˆœìœ„"
        varchar right_holder "ê¶Œë¦¬ì"
        numeric claim_amount "ì±„ê¶Œìµœê³ ì•¡"
        date registration_date "ë“±ê¸°ì¼"
        varchar registration_number "ì ‘ìˆ˜ë²ˆí˜¸"
        text registration_cause "ë“±ê¸°ì›ì¸"
        varchar status "active/cancelled"
        varchar target_owner "ëŒ€ìƒì†Œìœ ì"
        varchar jibeon_number "ì§€ë²ˆë²ˆí˜¸"
        varchar section "ê°‘êµ¬/ì„êµ¬"
        text notes "ë¹„ê³ "
    }
```

### ê¶Œë¦¬ ìœ í˜•(right_type) ì¢…ë¥˜

| ìœ í˜• | ì„¤ëª… | ë°°ë‹¹ ì˜í–¥ |
|------|------|----------|
| `ê·¼ì €ë‹¹` | ê·¼ì €ë‹¹ê¶Œ | ì±„ê¶Œìµœê³ ì•¡ ê¸°ì¤€ ë°°ë‹¹ |
| `ê°€ì••ë¥˜` | ê°€ì••ë¥˜ | ì²­êµ¬ê¸ˆì•¡ ê¸°ì¤€ |
| `ê°€ë“±ê¸°` | ê°€ë“±ê¸° | ì†Œìœ ê¶Œ ì´ì „ ìœ„í—˜ |
| `ì „ì„¸ê¶Œ` | ì „ì„¸ê¶Œ | ëŒ€í•­ë ¥ ìˆìœ¼ë©´ ì„ ìˆœìœ„ |
| `ì§€ìƒê¶Œ` | ì§€ìƒê¶Œ | í† ì§€ ì´ìš© ì œí•œ |
| `ì„ì°¨ê¶Œ` | ì„ì°¨ê¶Œ | ëŒ€í•­ë ¥ í™•ì¸ í•„ìš” |

---

## 4. ê¶Œë¦¬ë¶„ì„

> ë¬¼ê±´ë³„ ê¶Œë¦¬ë¶„ì„ ê²°ê³¼ ì €ì¥ (ì„ ìˆœìœ„ ê³„ì‚°, ë°°ë‹¹ ì‹œë®¬ë ˆì´ì…˜)

```mermaid
erDiagram
    properties ||--o| right_analysis : "ë¶„ì„"
    users ||--o{ right_analysis : "ë¶„ì„ì"
    
    right_analysis {
        uuid id PK
        uuid property_id FK
        varchar auction_status "ê²½ë§¤ìƒíƒœ: opened/not_opened"
        boolean precedent_auction "ì„ í–‰ê²½ë§¤ì—¬ë¶€"
        boolean subsequent_auction "í›„í–‰ê²½ë§¤ì—¬ë¶€"
        varchar court_name "ë²•ì›ëª…"
        varchar case_number "ì‚¬ê±´ë²ˆí˜¸"
        varchar auction_applicant "ê²½ë§¤ì‹ ì²­ì¸"
        date auction_start_date "ê²½ë§¤ê°œì‹œì¼"
        date claim_deadline_date "ì±„ê¶Œì‹ ê³ ê¸°í•œ"
        numeric claim_amount "ì²­êµ¬ê¸ˆì•¡"
        numeric initial_appraisal_value "ê°ì •ê°€"
        date initial_auction_date "ìµœì´ˆê²½ë§¤ì¼"
        int final_auction_round "ìµœì¢…ê²½ë§¤íšŒì°¨"
        date final_auction_date "ìµœì¢…ê²½ë§¤ì¼"
        varchar final_auction_result "ìµœì¢…ê²½ë§¤ê²°ê³¼"
        numeric winning_bid_amount "ë‚™ì°°ê°€"
        date next_auction_date "ë‹¤ìŒê²½ë§¤ì¼"
        numeric next_minimum_bid "ë‹¤ìŒìµœì €ê°€"
        boolean claim_deadline_passed "ì±„ê¶Œì‹ ê³ ê¸°í•œê²½ê³¼"
        boolean address_match "ì£¼ì†Œì¼ì¹˜ì—¬ë¶€"
        boolean owner_registered "ì†Œìœ ìë“±ê¸°ì—¬ë¶€"
        varchar tenant_name "ì„ì°¨ì¸ëª…"
        date tenant_move_in_date "ì„ì°¨ì¸ì „ì…ì¼"
        numeric housing_official_price "ì£¼íƒê³µì‹œê°€ê²©"
        boolean has_auction_docs "ê²½ë§¤ìë£Œí™•ë³´"
        boolean has_tenant_registry "ì „ì…ì„¸ëŒ€í™•ì¸"
        boolean has_commercial_lease "ìƒê°€ì„ëŒ€ì°¨í™•ì¸"
        boolean has_tenant "ì„ì°¨ì¸ìœ ë¬´"
        boolean tenant_claim_submitted "ì„ì°¨ì¸ë°°ë‹¹ìš”êµ¬"
        boolean tenant_date_before_mortgage "ì„ì°¨ì¸ì„ ìˆœìœ„ì—¬ë¶€"
        varchar debtor_type "ì±„ë¬´ììœ í˜•: individual/business/corporation"
        boolean has_wage_claim "ì„ê¸ˆì±„ê¶Œìœ ë¬´"
        boolean has_tax_claim "ë‹¹í•´ì„¸ìœ ë¬´"
        boolean has_senior_tax_claim "ì„ ìˆœìœ„ì¡°ì„¸ìœ ë¬´"
    }

    right_analysis {
        numeric senior_mortgage_dd "ì„ ìˆœìœ„ê·¼ì €ë‹¹ DDê¸ˆì•¡"
        numeric senior_mortgage_reflected "ì„ ìˆœìœ„ê·¼ì €ë‹¹ ë°˜ì˜ê¸ˆì•¡"
        text senior_mortgage_reason "ì„ ìˆœìœ„ê·¼ì €ë‹¹ ê·¼ê±°"
        numeric lien_dd "ìœ ì¹˜ê¶Œ DDê¸ˆì•¡"
        numeric lien_reflected "ìœ ì¹˜ê¶Œ ë°˜ì˜ê¸ˆì•¡"
        text lien_reason "ìœ ì¹˜ê¶Œ ê·¼ê±°"
        numeric small_deposit_dd "ì†Œì•¡ë³´ì¦ê¸ˆ DDê¸ˆì•¡"
        numeric small_deposit_reflected "ì†Œì•¡ë³´ì¦ê¸ˆ ë°˜ì˜ê¸ˆì•¡"
        text small_deposit_reason "ì†Œì•¡ë³´ì¦ê¸ˆ ê·¼ê±°"
        varchar small_deposit_case "ì†Œì•¡ë³´ì¦ê¸ˆ íŒë‹¨ì¼€ì´ìŠ¤"
        numeric lease_deposit_dd "ì„ëŒ€ë³´ì¦ê¸ˆ DDê¸ˆì•¡"
        numeric lease_deposit_reflected "ì„ëŒ€ë³´ì¦ê¸ˆ ë°˜ì˜ê¸ˆì•¡"
        text lease_deposit_reason "ì„ëŒ€ë³´ì¦ê¸ˆ ê·¼ê±°"
        numeric wage_claim_dd "ì„ê¸ˆì±„ê¶Œ DDê¸ˆì•¡"
        numeric wage_claim_reflected "ì„ê¸ˆì±„ê¶Œ ë°˜ì˜ê¸ˆì•¡"
        text wage_claim_reason "ì„ê¸ˆì±„ê¶Œ ê·¼ê±°"
        numeric current_tax_dd "ë‹¹í•´ì„¸ DDê¸ˆì•¡"
        numeric current_tax_reflected "ë‹¹í•´ì„¸ ë°˜ì˜ê¸ˆì•¡"
        text current_tax_reason "ë‹¹í•´ì„¸ ê·¼ê±°"
        numeric senior_tax_dd "ì„ ìˆœìœ„ì¡°ì„¸ DDê¸ˆì•¡"
        numeric senior_tax_reflected "ì„ ìˆœìœ„ì¡°ì„¸ ë°˜ì˜ê¸ˆì•¡"
        text senior_tax_reason "ì„ ìˆœìœ„ì¡°ì„¸ ê·¼ê±°"
        numeric etc_dd "ê¸°íƒ€ DDê¸ˆì•¡"
        numeric etc_reflected "ê¸°íƒ€ ë°˜ì˜ê¸ˆì•¡"
        text etc_reason "ê¸°íƒ€ ê·¼ê±°"
        numeric senior_total_dd "ì„ ìˆœìœ„í•©ê³„ DDê¸ˆì•¡"
    }

    right_analysis {
        numeric expected_winning_bid "ì˜ˆìƒë‚™ì°°ê°€"
        numeric auction_fees "ê²½ë§¤ë¹„ìš©"
        numeric distributable_amount "ë°°ë¶„ê°€ëŠ¥ì•¡"
        numeric amount_after_senior "ì„ ìˆœìœ„ê³µì œí›„ê¸ˆì•¡"
        numeric loan_cap "ëŒ€ì¶œí•œë„"
        numeric cap_applied_dividend "í•œë„ì ìš©ë°°ë‹¹ì•¡"
        numeric recovery_amount "íšŒìˆ˜ì˜ˆìƒì•¡"
        numeric recovery_rate "íšŒìˆ˜ìœ¨"
        varchar risk_level "ìœ„í—˜ë“±ê¸‰: high/medium/low"
        text risk_reason "ìœ„í—˜ì‚¬ìœ "
        text recommendations "ê¶Œë¦¬ë¶„ì„ì˜ê²¬"
        uuid analyzed_by FK "ë¶„ì„ì"
        timestamptz analyzed_at "ë¶„ì„ì¼ì‹œ"
        boolean is_completed "ë¶„ì„ì™„ë£Œì—¬ë¶€"
        date appraisal_date "ê°ì •í‰ê°€ì¼"
        numeric appraisal_value "ê°ì •í‰ê°€ì•¡"
        varchar appraisal_type "ê°ì •í‰ê°€êµ¬ë¶„"
        varchar appraisal_agency "ê°ì •í‰ê°€ê¸°ê´€"
        numeric minimum_bid "ìµœì €ì…ì°°ê°€"
        int auction_count "ê²½ë§¤íšŒì°¨"
    }
```

---

## 5. í‰ê°€ ì‹œìŠ¤í…œ

> ë¬¼ê±´ë³„ í‰ê°€ ì •ë³´ ë° ì‚¬ë¡€, ìƒì„¸ ë¶„ì„ ë°ì´í„°

```mermaid
erDiagram
    properties ||--o| evaluations : "í‰ê°€"
    users ||--o{ evaluations : "í‰ê°€ì"
    evaluations ||--o{ evaluation_cases : "ì‚¬ë¡€"
    evaluations ||--o{ evaluation_land_parcels : "ì§€ë²ˆë³„"
    evaluations ||--o{ evaluation_machinery : "ê¸°ê³„ê¸°êµ¬"
    evaluations ||--o{ evaluation_rental_analysis : "ì„ëŒ€ë¶„ì„"
    evaluations ||--o| evaluation_management_fees : "ê´€ë¦¬ë¹„"
    evaluations ||--o| evaluation_commercial_data : "ìƒê¶Œì •ë³´"
    
    evaluations {
        uuid id PK
        uuid property_id FK
        varchar evaluation_type "í‰ê°€ìœ í˜•"
        numeric market_value "ì‹œì„¸"
        numeric evaluated_value "í‰ê°€ì•¡"
        numeric recovery_rate "íšŒìˆ˜ìœ¨"
        jsonb evaluation_details "í‰ê°€ìƒì„¸ JSON"
        uuid evaluated_by FK
        timestamptz evaluated_at
    }
    
    evaluation_cases {
        uuid id PK
        uuid evaluation_id FK
        int case_number "ì‚¬ë¡€ë²ˆí˜¸ 1~4"
        varchar case_type "ì‚¬ë¡€ìœ í˜•"
        varchar auction_case_no "ê²½ë§¤ì‚¬ê±´ë²ˆí˜¸"
        date winning_date "ë‚™ì°°ì¼"
        varchar usage "ìš©ë„"
        text address "ì£¼ì†Œ"
        numeric land_area_pyeong "í† ì§€ë©´ì (í‰)"
        numeric building_area_pyeong "ê±´ë¬¼ë©´ì (í‰)"
        date preservation_date "ë³´ì¡´ë“±ê¸°ì¼"
        date use_approval_date "ì‚¬ìš©ìŠ¹ì¸ì¼"
        numeric legal_price "ë²•ì •ê°€"
        numeric land_price "í† ì§€ê°€"
        numeric building_price "ê±´ë¬¼ê°€"
        date appraisal_date "ê°ì •ì¼"
        numeric land_unit_appraisal "í† ì§€ë‹¨ê°€(ê°ì •)"
        numeric building_unit_appraisal "ê±´ë¬¼ë‹¨ê°€(ê°ì •)"
        numeric winning_price "ë‚™ì°°ê°€"
        numeric winning_rate "ë‚™ì°°ë¥ "
        int winning_round "ë‚™ì°°íšŒì°¨"
        numeric latitude "ìœ„ë„"
        numeric longitude "ê²½ë„"
    }
    
    evaluation_land_parcels {
        uuid id PK
        uuid evaluation_id FK
        varchar parcel_number "ì§€ë²ˆë²ˆí˜¸"
        varchar parcel_type "í† ì§€/ê±´ë¬¼/ê¸°ê³„ê¸°êµ¬"
        text address "ì£¼ì†Œ"
        numeric area_pyeong "ë©´ì (í‰)"
        numeric unit_appraisal "ë‹¨ê°€(ê°ì •)"
        numeric appraisal_value "ê°ì •ê°€"
        numeric scenario1_unit_price "ì‹œë‚˜ë¦¬ì˜¤1 ë‹¨ê°€"
        numeric scenario1_value "ì‹œë‚˜ë¦¬ì˜¤1 ê°€ì•¡"
        numeric scenario2_unit_price "ì‹œë‚˜ë¦¬ì˜¤2 ë‹¨ê°€"
        numeric scenario2_value "ì‹œë‚˜ë¦¬ì˜¤2 ê°€ì•¡"
        int sort_order "ì •ë ¬ìˆœì„œ"
    }
    
    evaluation_machinery {
        uuid id PK
        uuid evaluation_id FK
        int item_number "í’ˆëª©ë²ˆí˜¸"
        varchar machinery_name "ê¸°ê³„ëª…"
        varchar manufacturer "ì œì¡°ì‚¬"
        date manufacture_date "ì œì¡°ì¼"
        int quantity "ìˆ˜ëŸ‰"
        numeric unit_price "ë‹¨ê°€"
        numeric appraisal_value "ê°ì •ê°€"
        boolean factory_mortgage_1 "ê³µì¥ì €ë‹¹1"
        boolean factory_mortgage_2 "ê³µì¥ì €ë‹¹2"
        numeric recognition_rate "ì¸ì •ë¥  ê¸°ë³¸0.2"
    }
    
    evaluation_rental_analysis {
        uuid id PK
        uuid evaluation_id FK
        varchar analysis_type "ë¶„ì„ìœ í˜•"
        int quote_number "í˜¸ê°€ë²ˆí˜¸"
        numeric supply_area_pyeong "ê³µê¸‰ë©´ì (í‰)"
        numeric exclusive_area_pyeong "ì „ìš©ë©´ì (í‰)"
        numeric deposit "ë³´ì¦ê¸ˆ"
        numeric monthly_rent "ì›”ì„¸"
        numeric unit_rent "ë‹¨ìœ„ì„ë£Œ"
        varchar floor "ì¸µ"
        varchar tenant_name "ì„ì°¨ì¸"
        date lease_start_date "ì„ëŒ€ì‹œì‘ì¼"
        date lease_end_date "ì„ëŒ€ì¢…ë£Œì¼"
        numeric annual_rent "ì—°ì„ë£Œ"
        int free_rent_months "í”„ë¦¬ë ŒíŠ¸ê¸°ê°„"
    }
    
    evaluation_management_fees {
        uuid id PK
        uuid evaluation_id FK UK
        varchar management_office_phone "ê´€ë¦¬ì‚¬ë¬´ì†Œì—°ë½ì²˜"
        numeric arrears_fee "ì²´ë‚©ê´€ë¦¬ë¹„"
        numeric monthly_fee "ì›”ê´€ë¦¬ë¹„"
        numeric scenario1_estimated_fee "ì‹œë‚˜ë¦¬ì˜¤1 ì˜ˆìƒê´€ë¦¬ë¹„"
        numeric scenario2_estimated_fee "ì‹œë‚˜ë¦¬ì˜¤2 ì˜ˆìƒê´€ë¦¬ë¹„"
    }
    
    evaluation_commercial_data {
        uuid id PK
        uuid evaluation_id FK UK
        varchar commercial_type "ìƒê¶Œìœ í˜•"
        jsonb rental_yield "ì„ëŒ€ìˆ˜ìµë¥ "
        jsonb rental_price_index "ì„ëŒ€ê°€ê²©ì§€ìˆ˜"
        jsonb vacancy_rate "ê³µì‹¤ë¥ "
        jsonb rental_price "ì„ëŒ€ë£Œ"
        jsonb floor_efficiency "ì¸µë³„íš¨ìš©"
        numeric base_discount_rate "ê¸°ì¤€í• ì¸ìœ¨ 0.06"
        numeric sensitivity_basis "ë¯¼ê°ë„ê¸°ì¤€ 0.005"
        numeric income_value "ìˆ˜ìµê°€ì¹˜"
        numeric unit_income_value "ë‹¨ìœ„ìˆ˜ìµê°€ì¹˜"
    }
```

---

## 6. ê²½ë§¤/ê³µë§¤ ê´€ë¦¬

> ê²½ë§¤ ë° ê³µë§¤ ì¼ì •, ë¹„ìš© ê³„ì‚°, ì‹œë‚˜ë¦¬ì˜¤ë³„ ë¶„ì„

```mermaid
erDiagram
    properties ||--o| auction_schedules : "ê²½ë§¤"
    properties ||--o| public_sale_schedules : "ê³µë§¤"
    
    auction_schedules {
        uuid id PK
        uuid property_id FK
        varchar auction_number "ê²½ë§¤ì°¨ìˆ˜"
        date auction_date "ê²½ë§¤ì¼"
        date bid_date "ì…ì°°ì¼"
        numeric minimum_bid "ìµœì €ì…ì°°ê°€"
        numeric sale_price "ë‚™ì°°ê°€"
        varchar status "scheduled/completed/cancelled"
        varchar schedule_type "auction/public_sale"
        varchar auction_request_type "*1=ì˜ˆì •/*2=ê²°ì •/*3=3ì/*4=ì¤‘ë³µ"
        varchar jurisdiction_court "ê´€í• ë²•ì›"
        numeric court_discount_rate "ë²•ì›ì €ê°ìœ¨"
        boolean is_borrower_deceased "ì°¨ì£¼ì‚¬ë§ì—¬ë¶€"
        boolean is_owner_moved_in "ì†Œìœ ì£¼ì „ì…ì—¬ë¶€"
        boolean is_session_opened "ê°œíšŒì—¬ë¶€"
        varchar loan_type "ëŒ€ì¶œìœ í˜•"
        boolean has_subrogation_registration "ëŒ€ìœ„ë“±ê¸°ì—¬ë¶€"
        varchar subrogation_entity "ëŒ€ìœ„ë“±ê¸°ê¸°ê´€"
        numeric subrogation_cost "ëŒ€ìœ„ë“±ê¸°ë¹„ìš©"
        boolean is_housing_mortgage_loan "ì£¼ë‹´ëŒ€ì—¬ë¶€"
        date final_completion_date "ìµœì¢…ì™„ë£Œì˜ˆì •ì¼"
    }

    auction_schedules {
        text case_capture_url "ì‚¬ê±´ë‚´ì—­ ìº¡ì²˜URL"
        text schedule_capture_url "ê¸°ì¼ë‚´ì—­ ìº¡ì²˜URL"
        text document_capture_url "ë¬¸ê±´ì†¡ë‹¬ ìº¡ì²˜URL"
        numeric land_appraisal_value "í† ì§€ê°ì •ê°€"
        numeric building_appraisal_value "ê±´ë¬¼ê°ì •ê°€"
        numeric machinery_appraisal_value "ê¸°ê³„ê°ì •ê°€"
        numeric other_bank_senior_value "íƒ€í–‰ì„ ìˆœìœ„"
        numeric scenario1_winning_bid "ì‹œë‚˜ë¦¬ì˜¤1 ë‚™ì°°ê°€"
        numeric scenario2_winning_bid "ì‹œë‚˜ë¦¬ì˜¤2 ë‚™ì°°ê°€"
        text scenario1_eval_reason "ì‹œë‚˜ë¦¬ì˜¤1 í‰ê°€ê·¼ê±°"
        text scenario2_eval_reason "ì‹œë‚˜ë¦¬ì˜¤2 í‰ê°€ê·¼ê±°"
        date scenario1_auction_request_date "ì‹œë‚˜ë¦¬ì˜¤1 ê²½ë§¤ì‹ ì²­ì¼"
        date scenario2_auction_request_date "ì‹œë‚˜ë¦¬ì˜¤2 ê²½ë§¤ì‹ ì²­ì¼"
        int scenario1_procedure_months "ì‹œë‚˜ë¦¬ì˜¤1 ì ˆì°¨ê¸°ê°„"
        int scenario2_procedure_months "ì‹œë‚˜ë¦¬ì˜¤2 ì ˆì°¨ê¸°ê°„"
        numeric scenario1_legal_price "ì‹œë‚˜ë¦¬ì˜¤1 ë²•ì •ê°€"
        numeric scenario2_legal_price "ì‹œë‚˜ë¦¬ì˜¤2 ë²•ì •ê°€"
        int scenario1_expected_round "ì‹œë‚˜ë¦¬ì˜¤1 ì˜ˆìƒíšŒì°¨"
        int scenario2_expected_round "ì‹œë‚˜ë¦¬ì˜¤2 ì˜ˆìƒíšŒì°¨"
    }

    auction_schedules {
        numeric newspaper_ad_fee "ì‹ ë¬¸ê³µê³ ë¹„ ê¸°ë³¸220000"
        numeric survey_fee "ì¡°ì‚¬ë¹„ ê¸°ë³¸70000"
        numeric auction_sale_fee "ë§¤ê°ìˆ˜ìˆ˜ë£Œ"
        numeric appraisal_fee "ê°ì •ë£Œ"
        numeric delivery_fee "ì†¡ë‹¬ë£Œ"
        numeric registration_education_fee "ë“±ë¡ë©´í—ˆì„¸"
        numeric other_cost "ê¸°íƒ€ë¹„ìš© ê¸°ë³¸5000"
        numeric additional_cost_rate "ì¶”ê°€ë¹„ìš©ìœ¨ ê¸°ë³¸0.10"
        int property_count "ë¬¼ê±´ìˆ˜ ê¸°ë³¸1"
        int creditor_count "ì±„ê¶Œììˆ˜ ê¸°ë³¸1"
        numeric scenario1_senior_deduction "ì‹œë‚˜ë¦¬ì˜¤1 ì„ ìˆœìœ„ê³µì œ"
        numeric scenario2_senior_deduction "ì‹œë‚˜ë¦¬ì˜¤2 ì„ ìˆœìœ„ê³µì œ"
        numeric scenario1_auction_fees "ì‹œë‚˜ë¦¬ì˜¤1 ê²½ë§¤ë¹„ìš©"
        numeric scenario2_auction_fees "ì‹œë‚˜ë¦¬ì˜¤2 ê²½ë§¤ë¹„ìš©"
        numeric scenario1_distributable_after_sale "ì‹œë‚˜ë¦¬ì˜¤1 ë‚™ì°°í›„ë°°ë¶„ê°€ëŠ¥ì•¡"
        numeric scenario2_distributable_after_sale "ì‹œë‚˜ë¦¬ì˜¤2 ë‚™ì°°í›„ë°°ë¶„ê°€ëŠ¥ì•¡"
        numeric scenario1_loan_cap "ì‹œë‚˜ë¦¬ì˜¤1 ëŒ€ì¶œí•œë„1"
        numeric scenario2_loan_cap "ì‹œë‚˜ë¦¬ì˜¤2 ëŒ€ì¶œí•œë„1"
        numeric scenario1_cap_applied_dividend "ì‹œë‚˜ë¦¬ì˜¤1 í•œë„ì ìš©ë°°ë‹¹"
        numeric scenario2_cap_applied_dividend "ì‹œë‚˜ë¦¬ì˜¤2 í•œë„ì ìš©ë°°ë‹¹"
        numeric actual_paid_deposit "ì‹¤ë‚©ì˜ˆë‚©ê¸ˆ"
        numeric deposit_recovery_rate "ì˜ˆë‚©ê¸ˆíšŒìˆ˜ìœ¨ ê¸°ë³¸0.90"
    }

    public_sale_schedules {
        uuid id PK
        uuid property_id FK
        varchar sale_number "ê³µë§¤ë²ˆí˜¸"
        date sale_date "ê³µë§¤ì¼"
        numeric minimum_bid "ìµœì €ì…ì°°ê°€"
        numeric sale_price "ë§¤ê°ê°€"
        varchar status "ìƒíƒœ"
        numeric total_appraisal_value "ì´ê°ì •ê°€"
        numeric land_appraisal_value "í† ì§€ê°ì •ê°€"
        numeric building_appraisal_value "ê±´ë¬¼ê°ì •ê°€"
        numeric machinery_appraisal_value "ê¸°ê³„ê°ì •ê°€"
        numeric other_bank_senior_value "íƒ€í–‰ì„ ìˆœìœ„"
        numeric initial_appraisal_value "ìµœì´ˆê°ì •ê°€"
        date scenario1_start_date "ì‹œë‚˜ë¦¬ì˜¤1 ì‹œì‘ì¼"
        date scenario2_start_date "ì‹œë‚˜ë¦¬ì˜¤2 ì‹œì‘ì¼"
        numeric scenario1_winning_bid "ì‹œë‚˜ë¦¬ì˜¤1 ë‚™ì°°ê°€"
        numeric scenario2_winning_bid "ì‹œë‚˜ë¦¬ì˜¤2 ë‚™ì°°ê°€"
        numeric scenario1_beneficiary_change_cost "ì‹œë‚˜ë¦¬ì˜¤1 ìˆ˜ìµìë³€ê²½ë¹„ìš©"
        numeric scenario2_beneficiary_change_cost "ì‹œë‚˜ë¦¬ì˜¤2 ìˆ˜ìµìë³€ê²½ë¹„ìš©"
        numeric onbid_fee "ì˜¨ë¹„ë“œìˆ˜ìˆ˜ë£Œ"
        numeric appraisal_fee "ê°ì •ë£Œ"
        numeric total_sale_cost "ì´ê³µë§¤ë¹„ìš©"
        int lead_time_days "ë¦¬ë“œíƒ€ì„ ê¸°ë³¸11ì¼"
        numeric discount_rate "ì €ê°ìœ¨ ê¸°ë³¸0.10"
        jsonb creditor_distributions "íƒ€ì±„ê¶Œìë°°ë¶„ì •ë³´"
    }
    
    auction_cases {
        uuid id PK
        varchar case_no UK "ì‚¬ê±´ë²ˆí˜¸"
        varchar auctionone_court "ë²•ì›"
        varchar auctionone_area "ì§€ì—­"
        varchar usage "ìš©ë„"
        int object_group "ë¬¼ê±´ê·¸ë£¹ 1~5"
        text address "ì£¼ì†Œ"
        text address_road "ë„ë¡œëª…ì£¼ì†Œ"
        varchar region_big "ì‹œë„"
        varchar region_mid "ì‹œêµ°êµ¬"
        varchar region_small "ìë©´ë™"
        numeric latitude "ìœ„ë„"
        numeric longitude "ê²½ë„"
        date auction_date "ê²½ë§¤ì¼"
        int big_round "ëŒ€íšŒì°¨"
        numeric appraisal_price "ê°ì •ê°€"
        numeric building_appraisal_price "ê±´ë¬¼ê°ì •ê°€"
        numeric land_appraisal_price "í† ì§€ê°ì •ê°€"
        numeric winning_price "ë‚™ì°°ê°€"
        numeric second_big_price "ì°¨ìˆœìœ„ê°€"
        numeric building_area "ê±´ë¬¼ë©´ì "
        numeric land_area "í† ì§€ë©´ì "
        numeric building_unit_price "ê±´ë¬¼ë‹¨ê°€"
        numeric land_unit_price "í† ì§€ë‹¨ê°€"
        int auction_days "ë‚™ì°°ì¼(ê²½ê³¼ì¼)"
        date valuation_base_date "í‰ê°€ê¸°ì¤€ì¼"
        date new_build_date "ì‹ ì¶•ì¼"
        date use_approval_date "ì‚¬ìš©ìŠ¹ì¸ì¼"
        text popup_url "íŒì—…URL"
    }
```

---

## 7. QA ë° ì•Œë¦¼

> ë¬¼ê±´ë³„ ì§ˆì˜ì‘ë‹µ ë° ì•Œë¦¼ ê´€ë¦¬

```mermaid
erDiagram
    properties ||--o{ property_qa : "QA"
    users ||--o{ property_qa : "ì‘ì„±ì"
    users ||--o{ property_qa : "ë‹µë³€ì"
    property_qa ||--o{ qa_notifications : "ì•Œë¦¼"
    users ||--o{ qa_notifications : "ìˆ˜ì‹ ì"
    properties ||--o{ qa_notifications : "ê´€ë ¨ë¬¼ê±´"
    
    property_qa {
        uuid id PK
        uuid property_id FK
        text question "ì§ˆë¬¸"
        text answer "ë‹µë³€"
        varchar part "ì¹´í…Œê³ ë¦¬: ë“±ê¸°ë¶€ë“±ë³¸/ì„ ìˆœìœ„/í‰ê°€ ë“±"
        varchar borrower_number "ì°¨ì£¼ë²ˆí˜¸"
        varchar borrower_name "ì°¨ì£¼ëª…"
        uuid created_by FK "ì§ˆë¬¸ì"
        uuid answered_by FK "ë‹µë³€ì"
        timestamptz created_at
        timestamptz answered_at
    }
    
    qa_notifications {
        uuid id PK
        uuid user_id FK "ìˆ˜ì‹ ì"
        uuid qa_id FK
        uuid property_id FK
        varchar borrower_number "ì°¨ì£¼ë²ˆí˜¸"
        varchar borrower_name "ì°¨ì£¼ëª…"
        varchar notification_type "answer_received ë“±"
        text message "ì•Œë¦¼ë©”ì‹œì§€"
        boolean is_read "ì½ìŒì—¬ë¶€"
        timestamptz read_at "ì½ì€ì‹œê°„"
        timestamptz created_at
    }
```

---

## 8. ê¸°ì¤€ì •ë³´ (ë§ˆìŠ¤í„° ë°ì´í„°)

> ì‹œìŠ¤í…œ ì „ë°˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê¸°ì¤€ ë°ì´í„°

```mermaid
erDiagram
    courts {
        uuid id PK
        varchar court_code UK "ë²•ì›ì½”ë“œ"
        varchar court_name "ë²•ì›ëª…"
        varchar region "ì§€ì—­"
        text address "ì£¼ì†Œ"
        varchar phone "ì—°ë½ì²˜"
        numeric discount_rate_1 "ì €ê°ìœ¨1"
        numeric discount_rate_2 "ì €ê°ìœ¨2"
        numeric discount_rate_3 "ì €ê°ìœ¨3"
        numeric discount_rate_4 "ì €ê°ìœ¨4"
        boolean is_active "ì‚¬ìš©ì—¬ë¶€"
    }
    
    financial_institutions {
        uuid id PK
        varchar institution_code UK "ê¸°ê´€ì½”ë“œ"
        varchar institution_name "ê¸°ê´€ëª…"
        varchar institution_type "ê¸°ê´€ìœ í˜•"
        text address "ì£¼ì†Œ"
        varchar phone "ì—°ë½ì²˜"
        varchar swift_code "SWIFTì½”ë“œ"
        boolean is_active "ì‚¬ìš©ì—¬ë¶€"
    }
    
    appraisal_firms {
        uuid id PK
        varchar firm_code UK "ë²•ì¸ì½”ë“œ"
        varchar firm_name "ë²•ì¸ëª…"
        varchar representative "ëŒ€í‘œì"
        text address "ì£¼ì†Œ"
        varchar phone "ì—°ë½ì²˜"
        varchar email "ì´ë©”ì¼"
        varchar license_number "ë©´í—ˆë²ˆí˜¸"
        boolean is_active "ì‚¬ìš©ì—¬ë¶€"
    }
    
    common_codes {
        uuid id PK
        varchar code_group "ì½”ë“œê·¸ë£¹"
        varchar code_value "ì½”ë“œê°’"
        varchar code_name "ì½”ë“œëª…"
        int sort_order "ì •ë ¬ìˆœì„œ"
        text description "ì„¤ëª…"
        boolean is_active "ì‚¬ìš©ì—¬ë¶€"
    }
    
    lease_standards {
        uuid id PK
        text lease_type "ì„ëŒ€ìœ í˜•: residential ë“±"
        text region "ì§€ì—­"
        date start_date "ì‹œì‘ì¼"
        date end_date "ì¢…ë£Œì¼"
        numeric deposit_limit "ë³´ì¦ê¸ˆí•œë„"
        numeric compensation_amount "ë³€ì œê¸ˆì•¡"
        text description "ì„¤ëª…"
        boolean is_active "ì‚¬ìš©ì—¬ë¶€"
    }
    
    legal_application_rates {
        uuid id PK
        text property_type "ë¬¼ê±´ìœ í˜•"
        numeric applied_rate "ì ìš©ë¹„ìœ¨"
        text description "ì„¤ëª…"
        boolean is_active "ì‚¬ìš©ì—¬ë¶€"
    }
    
    auction_cost_standards {
        uuid id PK
        text cost_type "ë¹„ìš©ìœ í˜•"
        text calculation_method "ê³„ì‚°ë°©ë²•"
        numeric base_amount "ê¸°ì¤€ê¸ˆì•¡"
        numeric rate "ë¹„ìœ¨"
        text description "ì„¤ëª…"
        boolean is_active "ì‚¬ìš©ì—¬ë¶€"
    }
    
    public_sale_cost_standards {
        uuid id PK
        text cost_type "ë¹„ìš©ìœ í˜•"
        text calculation_method "ê³„ì‚°ë°©ë²•"
        numeric base_amount "ê¸°ì¤€ê¸ˆì•¡"
        numeric rate "ë¹„ìœ¨"
        text description "ì„¤ëª…"
        boolean is_active "ì‚¬ìš©ì—¬ë¶€"
    }
```

---

## 9. ì‹œìŠ¤í…œ ê´€ë¦¬

> ì„¤ì •, ë¡œê·¸, ì¸í„°ë¦¼ ê´€ë¦¬ ë“± ì‹œìŠ¤í…œ ìš´ì˜ í…Œì´ë¸”

```mermaid
erDiagram
    programs ||--o{ interim_advances : "ì„ ê¸‰ê¸ˆ"
    programs ||--o{ interim_collections : "íšŒìˆ˜"
    programs ||--o{ program_sheet_mappings : "ì‹œíŠ¸ë§¤í•‘"
    users ||--o{ program_sheet_mappings : "ì—…ë¡œë”"
    users ||--o{ audit_logs : "ì‘ì—…ì"
    
    settings {
        uuid id PK
        varchar setting_key UK "ì„¤ì •í‚¤"
        jsonb setting_value "ì„¤ì •ê°’ JSON"
        varchar setting_type "ì„¤ì •ìœ í˜•"
        text description "ì„¤ëª…"
    }
    
    system_settings {
        uuid id PK
        varchar setting_key UK "ì„¤ì •í‚¤"
        text setting_value "ì„¤ì •ê°’"
        varchar setting_type "STRING ë“±"
        text description "ì„¤ëª…"
    }
    
    calculation_formulas {
        uuid id PK
        varchar formula_name UK "ìˆ˜ì‹ëª…"
        text formula_expression "ìˆ˜ì‹í‘œí˜„"
        text formula_description "ìˆ˜ì‹ì„¤ëª…"
        varchar applies_to "ì ìš©ëŒ€ìƒ"
        boolean is_active "ì‚¬ìš©ì—¬ë¶€"
    }
    
    audit_logs {
        uuid id PK
        varchar table_name "ëŒ€ìƒí…Œì´ë¸”"
        uuid record_id "ëŒ€ìƒë ˆì½”ë“œID"
        varchar action "INSERT/UPDATE/DELETE"
        jsonb old_data "ë³€ê²½ì „ë°ì´í„°"
        jsonb new_data "ë³€ê²½í›„ë°ì´í„°"
        uuid user_id FK "ì‘ì—…ì"
        varchar user_email "ì‘ì—…ìì´ë©”ì¼"
        varchar ip_address "IPì£¼ì†Œ"
        text user_agent "UserAgent"
        timestamptz created_at "ì‘ì—…ì‹œê°„"
    }
    
    interim_advances {
        uuid id PK
        uuid program_id FK
        varchar borrower_number "ì°¨ì£¼ë²ˆí˜¸"
        varchar borrower_name "ì°¨ì£¼ëª…"
        varchar pool "í’€"
        varchar loan_type "ëŒ€ì¶œìœ í˜•"
        varchar account_serial "ê³„ì¢Œì¼ë ¨ë²ˆí˜¸"
        varchar account_number "ê³„ì¢Œë²ˆí˜¸"
        varchar expense_type "ë¹„ìš©ìœ í˜•"
        date transaction_date "ê±°ë˜ì¼"
        varchar currency "í†µí™” ê¸°ë³¸KRW"
        numeric amount "ê¸ˆì•¡"
        text description "ì„¤ëª…"
        text notes "ë¹„ê³ "
        uuid uploaded_by FK
    }
    
    interim_collections {
        uuid id PK
        uuid program_id FK
        varchar borrower_number "ì°¨ì£¼ë²ˆí˜¸"
        varchar borrower_name "ì°¨ì£¼ëª…"
        varchar pool "í’€"
        varchar loan_type "ëŒ€ì¶œìœ í˜•"
        varchar account_serial "ê³„ì¢Œì¼ë ¨ë²ˆí˜¸"
        varchar account_number "ê³„ì¢Œë²ˆí˜¸"
        date collection_date "íšŒìˆ˜ì¼"
        numeric principal_amount "ì›ê¸ˆ"
        numeric advance_amount "ì„ ê¸‰ê¸ˆ"
        numeric interest_amount "ì´ì"
        numeric total_amount "ì´ì•¡"
        text notes "ë¹„ê³ "
        uuid uploaded_by FK
    }
    
    program_sheet_mappings {
        uuid id PK
        uuid program_id FK
        varchar sheet_type "ì‹œíŠ¸íƒ€ì…: SheetA/SheetB ë“±"
        varchar sheet_type_display "ì‹œíŠ¸íƒ€ì… í‘œì‹œëª…"
        varchar excel_sheet_name "ì—‘ì…€ì‹œíŠ¸ëª…"
        jsonb column_mappings "ì»¬ëŸ¼ë§¤í•‘ JSON"
        int row_count "í–‰ìˆ˜"
        varchar file_name "íŒŒì¼ëª…"
        timestamptz uploaded_at "ì—…ë¡œë“œì‹œê°„"
        uuid uploaded_by FK
    }
    
    data_disks {
        uuid id PK
        uuid property_id FK
        varchar debtor_name "ì°¨ì£¼ëª…"
        varchar debtor_regno "ì£¼ë¯¼/ì‚¬ì—…ìë²ˆí˜¸"
        varchar debt_type "ì±„ë¬´ìœ í˜•"
        numeric principal_amount "ì›ê¸ˆ"
        numeric interest_rate "ì´ììœ¨"
        numeric overdue_interest_rate "ì—°ì²´ì´ììœ¨"
        varchar sale_type "ê²½ë§¤/ê³µë§¤"
        varchar court_name "ë²•ì›ëª…"
        varchar case_number "ì‚¬ê±´ë²ˆí˜¸"
        jsonb data_json "ì¶”ê°€ë°ì´í„° JSON"
    }
    
    loan_info {
        uuid id PK
        uuid property_id FK
        varchar loan_type "ëŒ€ì¶œìœ í˜•"
        numeric loan_amount "ëŒ€ì¶œê¸ˆì•¡"
        numeric interest_rate "ì´ììœ¨"
        varchar guarantee_type "ë³´ì¦ìœ í˜•"
        numeric guarantee_amount "ë³´ì¦ê¸ˆì•¡"
        jsonb loan_details "ëŒ€ì¶œìƒì„¸ JSON"
    }
```

---

## ğŸ“Œ ì£¼ìš” Foreign Key ê´€ê³„ ìš”ì•½

| ì†ŒìŠ¤ í…Œì´ë¸” | FK ì»¬ëŸ¼ | ì°¸ì¡° í…Œì´ë¸” | ì„¤ëª… |
|------------|---------|------------|------|
| `properties` | `program_id` | `programs` | ë¬¼ê±´ì´ ì†í•œ í”„ë¡œê·¸ë¨ |
| `properties` | `borrower_id` | `borrowers` | ë¬¼ê±´ ì†Œìœ  ì°¨ì£¼ |
| `properties` | `assigned_to` | `users` | ë‹´ë‹¹ì |
| `properties` | `created_by` | `users` | ìƒì„±ì |
| `loans` | `borrower_id` | `borrowers` | ëŒ€ì¶œì˜ ì°¨ì£¼ |
| `right_analysis` | `property_id` | `properties` | ê¶Œë¦¬ë¶„ì„ ëŒ€ìƒ ë¬¼ê±´ |
| `evaluations` | `property_id` | `properties` | í‰ê°€ ëŒ€ìƒ ë¬¼ê±´ |
| `auction_schedules` | `property_id` | `properties` | ê²½ë§¤ ëŒ€ìƒ ë¬¼ê±´ |
| `registry_documents` | `property_id` | `properties` | ë“±ê¸°ë¶€ ëŒ€ìƒ ë¬¼ê±´ |
| `registry_rights` | `registry_document_id` | `registry_documents` | ê¶Œë¦¬ì˜ ì¶œì²˜ ë¬¸ì„œ |
| `evaluation_cases` | `evaluation_id` | `evaluations` | í‰ê°€ì˜ ì‚¬ë¡€ |
| `program_users` | `program_id` | `programs` | í”„ë¡œê·¸ë¨ ë§¤í•‘ |
| `program_users` | `user_id` | `users` | ì‚¬ìš©ì ë§¤í•‘ |

---

## ğŸ’¡ ìš©ì–´ ì„¤ëª… (ì£¼ë‹ˆì–´ ê°œë°œììš©)

| ìš©ì–´ | ì„¤ëª… |
|------|------|
| **PK** | Primary Key (ê¸°ë³¸í‚¤) - í…Œì´ë¸”ì—ì„œ ê° í–‰ì„ ê³ ìœ í•˜ê²Œ ì‹ë³„ |
| **FK** | Foreign Key (ì™¸ë˜í‚¤) - ë‹¤ë¥¸ í…Œì´ë¸”ì˜ PKë¥¼ ì°¸ì¡° |
| **UK** | Unique Key (ê³ ìœ í‚¤) - ì¤‘ë³µ ë¶ˆê°€ |
| **UUID** | ë²”ìš© ê³ ìœ  ì‹ë³„ì (ì˜ˆ: `550e8400-e29b-41d4-a716-446655440000`) |
| **JSONB** | PostgreSQLì˜ ë°”ì´ë„ˆë¦¬ JSON íƒ€ì… (ìœ ì—°í•œ ë°ì´í„° ì €ì¥) |
| **RLS** | Row Level Security - í–‰ ë‹¨ìœ„ ì ‘ê·¼ ì œì–´ |
| **ì°¨ì£¼** | ëŒ€ì¶œì„ ë°›ì€ ì‚¬ëŒ/íšŒì‚¬ (Borrower) |
| **ë‹´ë³´ë¬¼ê±´** | ëŒ€ì¶œ ë‹´ë³´ë¡œ ì¡íŒ ë¶€ë™ì‚° (Property/Collateral) |
| **ê²½ë§¤** | ë²•ì› ê²½ë§¤ (Auction) |
| **ê³µë§¤** | í•œêµ­ìì‚°ê´€ë¦¬ê³µì‚¬(KAMCO) ê³µë§¤ (Public Sale) |
| **ì„ ìˆœìœ„** | ë°°ë‹¹ ì‹œ ë¨¼ì € ë°›ì„ ê¶Œë¦¬ê°€ ìˆëŠ” ì±„ê¶Œ |
| **DD** | Due Diligence - ì‹¤ì‚¬ ê¸ˆì•¡ |
| **XNPV** | ë¶ˆê·œì¹™ í˜„ê¸ˆíë¦„ì˜ ìˆœí˜„ì¬ê°€ì¹˜ |

---

**ë¬¸ì„œ ì‘ì„±ì¼**: 2026-01-21  
**ì‘ì„±ì**: NPLogic ê°œë°œíŒ€
